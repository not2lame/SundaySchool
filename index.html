<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Come, Follow Me Companion</title>
    
    <!-- Tailwind CSS (Styling) -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Fonts: Inter (Body) and Merriweather (Headings) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Merriweather:ital,wght@0,300;0,400;0,700;1,400&display=swap" rel="stylesheet">
    
    <!-- React & ReactDOM (Switched to Cloudflare CDN for better firewall access) -->
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    
    <!-- Babel (to compile JSX in browser) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>

    <!-- Tailwind Configuration -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        serif: ['Merriweather', 'serif'],
                    },
                    colors: {
                        stone: { 50: '#fafaf9', 100: '#f5f5f4', 200: '#e7e5e4', 300: '#d6d3d1', 400: '#a8a29e', 500: '#78716c', 600: '#57534e', 700: '#44403c', 800: '#292524', 900: '#1c1917' },
                        amber: { 50: '#fffbeb', 100: '#fef3c7', 200: '#fde68a', 300: '#fcd34d', 400: '#fbbf24', 500: '#f59e0b', 600: '#d97706', 700: '#b45309', 800: '#92400e', 900: '#78350f' }
                    }
                }
            }
        }
    </script>

    <style>
        .hide-scrollbar::-webkit-scrollbar { display: none; }
        .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        .fade-in { animation: fadeIn 0.5s ease-in; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* Print Styles */
        @media print {
            body * {
                visibility: hidden;
            }
            #printable-study-section, #printable-study-section * {
                visibility: visible;
            }
            #printable-study-section {
                position: absolute;
                left: 0;
                top: 0;
                width: 100%;
                margin: 0;
                padding: 0;
                border: none;
                box-shadow: none;
            }
            .no-print {
                display: none !important;
            }
        }
    </style>
</head>
<body class="bg-stone-100 text-stone-800 h-screen flex flex-col overflow-hidden">

    <!-- Loading Fallback -->
    <div id="root" class="h-full flex flex-col">
        <div class="flex items-center justify-center h-full bg-stone-100 text-stone-500 p-4 text-center">
            <div>
                <h2 class="text-xl font-bold mb-2">Loading App...</h2>
                <p class="text-sm">If this takes longer than a few seconds, your network may be blocking the script libraries (React).</p>
            </div>
        </div>
    </div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // ==========================================
        // DATA CONSTANTS
        // ==========================================

        const WEEK_INFO = {
            title: "The Vision of the Redemption of the Dead",
            dateRange: "December 1 - December 7, 2025",
            valediction: "May you cling to the gospel, for it is your lifeline, map, and connection to those you love on both sides of the veil."
        };

        const DEVOTIONAL_DATA = [
            { id: 'monday', day: 'Mon', fullDay: 'Monday', date: 'Dec 1', title: 'God‚Äôs Fairness and the Desire of the Heart ‚ù§Ô∏è', text: 'In the early days of the Restoration, the dominant Christian view was stark: if you died without baptism, you were lost. This weighed heavily on Joseph Smith regarding his brother Alvin. But the Lord shattered that misconception in Doctrine and Covenants 137. The Prophet saw Alvin in the Celestial Kingdom and marveled. The Lord explained that He judges men "according to their works, according to the desire of their hearts". This revelation confirms that God is not looking for technicalities to exclude us; He is looking for hearts that desire Him.', prompt: 'Reflection: Do you judge yourself or others only by outward "works," or do you trust God to see the "desire of the heart"? How does this change your hope for loved ones who struggle?', scriptureRef: 'D&C 137:9', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/dc-testament/dc/137?lang=eng#p9', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-doctrine-and-covenants-2025/49-doctrine-and-covenants-137-138?lang=eng' },
            { id: 'tuesday', day: 'Tue', fullDay: 'Tuesday', date: 'Dec 2', title: 'Pondering Opens the Door üìñ', text: 'Revelation rarely comes when we are rushing. In 1918, President Joseph F. Smith was mourning the loss of his son and son-in-law, while the world was gripped by war and a flu pandemic. He wasn\'t just casually reading; he sat in his room "pondering over the scriptures" and reflecting on the "great and wonderful love made manifest by the Father". It was in this state of deep, quiet reflection that "the eyes of [his] understanding were opened". The lesson for us is clear: if we want to hear Him, we must make time to be still.', prompt: 'Challenge: Set a timer for 5 minutes today. Read a single verse of scripture and do nothing else but think about it. No phone, no distractions‚Äîjust ponder.', scriptureRef: 'D&C 138:1-2', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/dc-testament/dc/138?lang=eng#p1', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-doctrine-and-covenants-2025/49-doctrine-and-covenants-137-138?lang=eng' },
            { id: 'wednesday', day: 'Wed', fullDay: 'Wednesday', date: 'Dec 3', title: 'A Busy World Beyond üåè', text: 'We often speak of the dead "resting in peace," but modern revelation suggests they are actually quite busy! In a personal account shared by President Russell M. Nelson, his grandfather, A.C. Nelson, received a visit from his deceased father. When asked what he had been doing since he died, the father replied, "I have been very busy preaching the gospel of Jesus Christ". President Joseph F. Smith saw this same reality: "The Lord went not in person among the wicked... but behold, from among the righteous, he organized his forces" to carry the message of redemption. The work of salvation is accelerating on both sides of the veil.', prompt: 'Reflection: Knowing that faithful ancestors are "anxiously looking forth" to their living friends for temple work, how does that change your priority for the temple this month?', scriptureRef: 'D&C 138:30', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/dc-testament/dc/138?lang=eng#p30', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-doctrine-and-covenants-2025/49-doctrine-and-covenants-137-138?lang=eng' },
            { id: 'thursday', day: 'Thu', fullDay: 'Thursday', date: 'Dec 4', title: 'Just as Sure as You See That Picture üñºÔ∏è', text: 'Faith can sometimes feel intangible, but the witness of the Spirit is more real than physical sight. In A.C. Nelson\'s vision, he asked his deceased father if the gospel taught by the Church was true. His father pointed to a picture of the First Presidency on the wall and said, "Just as sure as you see that picture, just as sure is the gospel true". He continued with a powerful promise: The Gospel has the power to save every man and woman who obeys it, and in "no other way" can they obtain salvation.', prompt: 'Challenge: Identify one "picture on the wall"‚Äîone physical reality in your life‚Äîand use it as a mental anchor today. When you see it, remind yourself: "The Gospel is just as real as this object."', scriptureRef: 'D&C 138:19', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/dc-testament/dc/138?lang=eng#p19', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-doctrine-and-covenants-2025/49-doctrine-and-covenants-137-138?lang=eng' },
            { id: 'friday', day: 'Fri', fullDay: 'Friday', date: 'Dec 5', title: 'Binding the Family to the Savior üîó', text: 'In the video "Noah\'s Story," a young man from Samoa describes the feeling of taking names to the temple: "It is the best thing I could do for them, it\'s the best thing I could do for myself". He notes that finding family names is about "uniting family" and "connecting to our Heavenly Father." This is the practical application of Doctrine and Covenants 138. We are the "partners" to the spirits Joseph F. Smith saw. We perform the physical ordinances; they accept the spiritual covenant. Together, we bind the human family to Christ.', prompt: 'Challenge: Open the "Ordinances Ready" feature on the Family Tree app today. Even if you can\'t go to the temple immediately, see whose name is waiting for you.', scriptureRef: 'D&C 138:54', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/dc-testament/dc/138?lang=eng#p54', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-doctrine-and-covenants-2025/49-doctrine-and-covenants-137-138?lang=eng' },
            { id: 'saturday', day: 'Sat', fullDay: 'Saturday', date: 'Dec 6', title: 'The Sting of Death is Soothed üïäÔ∏è', text: 'Doctrine and Covenants 138 was received by a prophet who knew grief intimately. He had lost his parents, his uncle, and 13 of his own children. Yet, the vision he received testifies that the dead who repent will be redeemed "through the sacrifice of the Son of God upon the cross". Because of Christ, the separation is temporary. The vision confirms that our departed loved ones are not lost in a void; they are gathered, they are learning, and they are waiting for us.', prompt: 'Reflection: Think of a loved one you have lost. Read verses 14‚Äì17 of Section 138 and insert their name mentally into the text where it speaks of the "spirits of the just."', scriptureRef: 'D&C 138:14-17', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/dc-testament/dc/138?lang=eng#p14', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-doctrine-and-covenants-2025/49-doctrine-and-covenants-137-138?lang=eng' },
            { id: 'sunday', day: 'Sun', fullDay: 'Sunday', date: 'Dec 7', title: 'Cling to the Gospel ‚öì', text: 'As we conclude our study of the Doctrine and Covenants this year, the final words of A.C. Nelson‚Äôs father to his son resonate with everything we have studied: "My son, always cling to the gospel. Be faithful to the covenants you have made with God". Life is complex, but the instruction is simple. We don\'t just hold the gospel; we cling to it. It is our lifeline, our map, and our connection to those we love on both sides of the veil.', prompt: 'Challenge: As you take the Sacrament today, recommit to one specific covenant you have made. Imagine yourself "clinging" to that promise for safety and strength this week.', scriptureRef: 'D&C 138:58-59', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/dc-testament/dc/138?lang=eng#p58', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-doctrine-and-covenants-2025/49-doctrine-and-covenants-137-138?lang=eng' }
        ];

        const YM_DATA = [
             { id: 'monday', day: 'Mon', date: 'Dec 1', title: 'Fairness for All ‚öñÔ∏è', text: 'Have you ever worried about a friend or family member who died without knowing the gospel? It‚Äôs a tough question. In 1836, Joseph Smith was worried about his brother Alvin, who died before he could be baptized. Joseph wondered how Alvin could be saved. In a vision (D&C 137), the Lord showed Joseph that God judges us not just by our actions, but by the "desires of [our] hearts." It was a massive revelation: God is fair. He gives everyone a chance, whether in this life or the next. No one is left behind in the Savior\'s plan.', prompt: 'Challenge: Think of a friend or family member who isn\'t a member of the Church. Pray for them by name tonight, asking that their heart might be prepared to receive the gospel, now or later.', scriptureRef: 'D&C 137:7‚Äì9', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/dc-testament/dc/137?lang=eng#p7', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-doctrine-and-covenants-2025/49-doctrine-and-covenants-137-138?lang=eng' },
            { id: 'tuesday', day: 'Tue', date: 'Dec 2', title: 'Unlocking Mode üîì', text: 'In 1918, President Joseph F. Smith was dealing with heavy stuff‚ÄîWorld War I was raging, a flu pandemic was killing millions, and he had personally lost his oldest son that year. He didn\'t just scroll through the scriptures; he sat and pondered them. While he was thinking deeply about the love of God, the "eyes of [his] understanding were opened." Pondering is the key that unlocks revelation. It‚Äôs the difference between just reading words and actually hearing the voice of the Lord.', prompt: 'Reflection: When you read your scriptures, do you rush to finish, or do you stop to think? Try reading just five verses today, but spend 2 minutes thinking about what they mean for you.', scriptureRef: 'D&C 138:1‚Äì2', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/dc-testament/dc/138?lang=eng#p1', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-doctrine-and-covenants-2025/49-doctrine-and-covenants-137-138?lang=eng' },
            { id: 'wednesday', day: 'Wed', date: 'Dec 3', title: 'The Forever Mission üöÄ', text: 'President Nelson shared a story about his grandfather, A.C. Nelson, who was visited by his own father from the spirit world. His father said, "I have been assigned work that must be performed... I received my commission to preach the gospel." Here is a cool truth for Priesthood holders: Your Priesthood service doesn\'t end when you die. Faithful elders continue their work on the other side, preaching to those in darkness. You are training right now for a mission that lasts for eternity.', prompt: 'Challenge: You are a missionary now. Send a text to a friend today sharing something simple that made you happy this week, or invite them to an upcoming youth activity.', scriptureRef: 'D&C 138:57', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/dc-testament/dc/138?lang=eng#p57', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-doctrine-and-covenants-2025/49-doctrine-and-covenants-137-138?lang=eng' },
            { id: 'thursday', day: 'Thu', date: 'Dec 4', title: 'The Rescue Squad üõü', text: 'In his vision, Joseph F. Smith saw that Jesus didn\'t go personally to the "prison" (the wicked or unbaptized) in the spirit world. Instead, He organized a rescue squad. He commissioned righteous messengers to go out and teach. The Lord trusts us to do His work. Just like He organizes us into quorums here to bless the sacrament or serve others, He organizes the faithful there to save souls. We are part of the same team on both sides of the veil.', prompt: 'Reflection: How does it make you feel to know the Savior trusts Priesthood holders to be His voice? How can you be a "messenger" of peace in your home today?', scriptureRef: 'D&C 138:29‚Äì30', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/dc-testament/dc/138?lang=eng#p29', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-doctrine-and-covenants-2025/49-doctrine-and-covenants-137-138?lang=eng' },
            { id: 'friday', day: 'Fri', date: 'Dec 5', title: 'The Home Team üè†', text: 'In the video "Noah\'s Story," a young man from Samoa talked about the joy of doing temple work for his ancestors. He said, "It is the best thing I could do for them... and myself." When you use the "Ordinances Ready" feature on the Family Tree app and take a name to the temple, you are literally unlocking the prison doors for someone in your family line. You are the hero they have been waiting for.', prompt: 'Challenge: Download or open the "Family Tree" app. Use the "Ordinances Ready" button to see if there is a baptism you can perform, or find an ancestor\'s name you can learn about.', scriptureRef: 'D&C 138:53‚Äì54', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/dc-testament/dc/138?lang=eng#p53', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-doctrine-and-covenants-2025/49-doctrine-and-covenants-137-138?lang=eng' },
            { id: 'saturday', day: 'Sat', date: 'Dec 6', title: 'You Were Chosen ü´µ', text: 'Doctrine and Covenants 138 teaches that many noble spirits were "reserved" to come forth in these latter days. That includes you. You weren\'t placed in this time period by accident. You were prepared "before the foundation of the world" to build the Church and help gather Israel right now. When you feel overwhelmed or insignificant, remember that God saved you for the fourth quarter of the game because He knows you can handle it.', prompt: 'Challenge: Write down one talent or strength you have. Ask Heavenly Father in prayer how you can use that specific talent to help build His kingdom this week.', scriptureRef: 'D&C 138:56', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/dc-testament/dc/138?lang=eng#p56', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-doctrine-and-covenants-2025/49-doctrine-and-covenants-137-138?lang=eng' },
            { id: 'sunday', day: 'Sun', date: 'Dec 7', title: 'It Is Real üíØ', text: 'President Nelson\'s grandfather told his son from the spirit world: "Just as sure as you see that picture [on the wall]... just as sure is the gospel true." Sometimes spiritual things can feel distant, but this week\'s study reminds us that the spirit world is close, real, and busy. The gospel has the power to save every single person who accepts it. You are part of the greatest cause on earth or in heaven.', prompt: 'Reflection: What is one thing you have learned this week that strengthens your testimony that life continues after death? Share it with your quorum or family today.', scriptureRef: 'D&C 138:60', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/dc-testament/dc/138?lang=eng#p60', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-doctrine-and-covenants-2025/49-doctrine-and-covenants-137-138?lang=eng' }
        ];

        const YW_DATA = [
            { id: 'monday', day: 'Mon', date: 'Dec 1', title: 'God Looks at Your Heart ‚ù§Ô∏è', text: 'Have you ever worried that you aren\'t "checking all the boxes" perfectly? In Doctrine and Covenants 137, Joseph Smith was worried about his brother Alvin, who died before he could be baptized. Joseph thought Alvin might be lost forever. But God showed Joseph a vision of Alvin in the Celestial Kingdom! Why? Because God doesn\'t just judge us on our actions; He judges us "according to the desire of [our] hearts." If you are trying your best and your heart wants to follow Jesus, He sees that. You are doing better than you think!', prompt: 'Challenge: Take 2 minutes today to pray and tell Heavenly Father what you really desire. Tell Him you want to follow Him, even if you aren\'t perfect yet.', scriptureRef: 'D&C 137:9', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/dc-testament/dc/137?lang=eng#p9', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-doctrine-and-covenants-2025/49-doctrine-and-covenants-137-138?lang=eng' },
            { id: 'tuesday', day: 'Tue', date: 'Dec 2', title: 'The Power of Pondering üìñ', text: 'President Joseph F. Smith received the incredible revelation in Doctrine and Covenants 138 while he was sitting in his room, reading the Bible, and pondering (deeply thinking). He wasn\'t scrolling through a feed or rushing to the next thing. He was still. Because he took time to be quiet and think about the scriptures, "the eyes of [his] understanding were opened." If you feel like heaven is quiet sometimes, try turning down the noise of the world. God has amazing things to tell you, but He speaks in a still, small voice.', prompt: 'Challenge: Read just a few verses of scripture and sit quietly for a couple of minutes, thinking about what they mean for you.', scriptureRef: 'D&C 138:1-2', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/dc-testament/dc/138?lang=eng#p1', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-doctrine-and-covenants-2025/49-doctrine-and-covenants-137-138?lang=eng' },
            { id: 'wednesday', day: 'Wed', date: 'Dec 3', title: 'The Ultimate Missionary Squad üåç', text: 'Did you know missionary work doesn\'t stop when we die? In the video "A Visit from Father," President Nelson shares a story about his grandfather visiting from the spirit world. His grandfather said he had been "very busy preaching the gospel of Jesus Christ." The spirit world isn\'t just a waiting room; it\'s a place of work and learning! Faithful women and men (like you!) continue to teach and help others on the other side. The spiritual things you learn now are preparing you to be a powerful force for good forever.', prompt: 'Reflection: What is one gospel principle you know is true that you would want to share with someone who never heard it?', scriptureRef: 'D&C 138:57', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/dc-testament/dc/138?lang=eng#p57', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-doctrine-and-covenants-2025/49-doctrine-and-covenants-137-138?lang=eng' },
            { id: 'thursday', day: 'Thu', date: 'Dec 4', title: 'You Are Part of the Rescue üßó‚Äç‚ôÄÔ∏è', text: 'In D&C 138, we learn that Jesus organized the righteous spirits to go teach those who were in "darkness." It‚Äôs like a massive spiritual rescue mission! When you do baptisms for the dead or family history work, you aren\'t just checking a name off a list. You are providing the physical key that unlocks the door for those spirits who have accepted the gospel. You are literally partnering with Jesus Christ to save souls. You are a hero to those ancestors!', prompt: 'Challenge: Open the FamilySearch app (or download it) and look at the "Ordinances Ready" feature to see if there is an ancestor waiting for you.', scriptureRef: 'D&C 138:30', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/dc-testament/dc/138?lang=eng#p30', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-doctrine-and-covenants-2025/49-doctrine-and-covenants-137-138?lang=eng' },
            { id: 'friday', day: 'Fri', date: 'Dec 5', title: 'It\'s All About Connection üîó', text: 'In the video "Noah\'s Story," a young man from Samoa talks about how doing temple work brings him joy and peace. He says it connects him to his ancestors in a "covenant relationship." Sometimes life feels lonely or disconnected. But when we turn our hearts to our family‚Äîpast, present, and future‚Äîwe realize we are part of something huge and eternal. The temple is the place where those connections are made permanent. That "vibe" you feel in the temple? That‚Äôs the feeling of belonging to God‚Äôs family.', prompt: 'Reflection: How do you feel when you are inside the temple or on the temple grounds? Write down one word to describe it.', scriptureRef: 'D&C 138:47-48', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/dc-testament/dc/138?lang=eng#p47', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-doctrine-and-covenants-2025/49-doctrine-and-covenants-137-138?lang=eng' },
            { id: 'saturday', day: 'Sat', date: 'Dec 6', title: 'They Are Cheering You On üì£', text: 'When President Nelson\'s grandfather returned as a spirit, he asked about the family. He wanted to know how they were doing! It‚Äôs a sweet reminder that our loved ones who have passed on are not far away. They care about us. They know our struggles. You have a heavenly cheering section. You are a "choice spirit" reserved to come forth in this specific time. When you keep your covenants and try to be good, you are honoring them, and they are rejoicing over you.', prompt: 'Challenge: Ask a parent or grandparent to tell you a story about an ancestor who has passed away. Try to find a photo of them.', scriptureRef: 'D&C 138:53-56', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/dc-testament/dc/138?lang=eng#p53', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-doctrine-and-covenants-2025/49-doctrine-and-covenants-137-138?lang=eng' },
            { id: 'sunday', day: 'Sun', date: 'Dec 7', title: 'Cling to the Gospel ‚öì', text: 'In the advice given by President Nelson\'s grandfather from the spirit world, he said three simple but powerful things: "Cling to the Gospel. Be faithful to the covenants... Be good." Life can get complicated with school, friends, and the future. But the formula for happiness‚Äîin this life and the next‚Äîis actually really simple. Hold on tight to the gospel of Jesus Christ. It is the only thing that lasts forever.', prompt: 'Reflection: What is one covenant you have made with God (like baptism or the Young Women theme)? How does keeping that promise protect you this week?', scriptureRef: 'D&C 138:59', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/dc-testament/dc/138?lang=eng#p59', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-doctrine-and-covenants-2025/49-doctrine-and-covenants-137-138?lang=eng' }
        ];

        const SONGS_DATA = [
            { id: 'monday', day: 'Mon', title: 'God‚Äôs Fairness and the Desire of the Heart ‚ù§Ô∏è', devotionalText: 'In the early days of the Restoration, the dominant Christian view was stark: if you died without baptism, you were lost. This weighed heavily on Joseph Smith regarding his brother Alvin. But the Lord shattered that misconception in Doctrine and Covenants 137. The Prophet saw Alvin in the Celestial Kingdom and marveled. The Lord explained that He judges men "according to their works, according to the desire of their hearts".', 
                hymnTitle: 'Prayer Is the Soul\'s Sincere Desire', hymnLink: 'https://www.youtube.com/watch?v=-IEeLxrqJfk', hymnAnalysis: 'The devotional centers on the Lord\'s assurance that He judges us by the "desire of the heart." This hymn is the poetic definition of that principle. The opening line, "Prayer is the soul\'s sincere desire, uttered or unexpressed," teaches that our communication with God‚Äîand our standing before Him‚Äîis rooted in what we truly want, not just the words we say or the visible works we perform. As you listen, focus on the third verse which speaks of prayer as the "hidden fire," a perfect metaphor for the inner desires that God sees even when the world does not.', 
                songTitle: 'Broken', songArtist: 'Kenneth Cope', songLink: 'https://www.youtube.com/watch?v=lMrHVJVWeU0', songAnalysis: 'This song is a profound meditation on how God views our imperfections. The devotional asks if we judge ourselves only by works or if we trust God to see our hearts. "Broken" answers this with the reassuring message that God loves "broken things"‚Äîbroken clouds that give rain, broken soil that grows grain, and broken hearts that offer themselves to Him. The lyrics align with the revelation about Alvin Smith: God isn\'t looking for a completed checklist of perfection (technicalities), but for a heart that is open, humble, and desiring of Him.' },
            { id: 'tuesday', day: 'Tue', title: 'Pondering Opens the Door üìñ', devotionalText: 'Revelation rarely comes when we are rushing. In 1918, President Joseph F. Smith was mourning the loss of his son and son-in-law, while the world was gripped by war and a flu pandemic. He wasn\'t just casually reading; he sat in his room "pondering over the scriptures" and reflecting on the "great and wonderful love made manifest by the Father". It was in this state of deep, quiet reflection that "the eyes of [his] understanding were opened".', 
                hymnTitle: 'Be Still, My Soul', hymnLink: 'https://www.youtube.com/watch?v=OudatufR4To', hymnAnalysis: 'Joseph F. Smith received his vision during a time of global war and personal grief. This hymn, set to the stirring melody of Finlandia, speaks directly to the need for stillness amidst turmoil. The lyrics "Be still, my soul: the Lord is on thy side" and "The waves and winds still know His voice" mirror the prophet\'s experience of finding peace and revelation while the world was in chaos. The music invites the very state of mind described in the devotional: a "deep, quiet reflection" where the noise of the world fades away, allowing the eyes of our understanding to be opened.', 
                songTitle: 'Hear Him', songArtist: 'Strive to Be', songLink: 'https://www.youtube.com/watch?v=DdmHpgn_rgQ', songAnalysis: 'The devotional explicitly states, "if we want to hear Him, we must make time to be still." This song, created for the 2020 Youth Theme, is a direct response to that invitation. The lyrics describe the difficulty of finding God in the "noise" and "thunder" of daily life and the necessity of turning to a "quiet place" to hear His voice. The gentle, acoustic arrangement supports the challenge to "do nothing else but think" about the scriptures, encouraging us to disconnect from distractions so we can connect with the Spirit.' },
            { id: 'wednesday', day: 'Wed', title: 'A Busy World Beyond üåè', devotionalText: 'We often speak of the dead "resting in peace," but modern revelation suggests they are actually quite busy! In a personal account shared by President Russell M. Nelson, his grandfather, A.C. Nelson, received a visit from his deceased father. When asked what he had been doing since he died, the father replied, "I have been very busy preaching the gospel of Jesus Christ". President Joseph F. Smith saw this same reality: "The Lord went not in person among the wicked... but behold, from among the righteous, he organized his forces" to carry the message of redemption.', 
                hymnTitle: 'Hark, All Ye Nations!', hymnLink: 'https://www.youtube.com/watch?v=UhcuYHnGveg', hymnAnalysis: 'This hymn captures the energy and urgency of the "busy world beyond" described in the devotional. The text calls out to all nations to "hear the voice of heaven," mirroring the work of the spirits who are "busy preaching the gospel of Jesus Christ" to those who have passed on. The exuberant melody reflects the acceleration of the work on both sides of the veil. It is a musical representation of the "forces" the Lord organized to carry the message of redemption, reminding us that the gathering of Israel is a global and eternal effort.', 
                songTitle: 'Embark', songArtist: '2015 Youth Theme', songLink: 'https://www.youtube.com/watch?v=KNp7QSnrcqQ', songAnalysis: 'The devotional speaks of the dead being "anxiously looking forth" and the work of salvation accelerating. "Embark" is an anthem of active service. The lyrics "We are called to work... the time is now" apply just as much to the spirits preaching in the spirit world as they do to us performing temple work on earth. The song\'s driving rhythm and call to action serve as a motivator to answer the reflection question, encouraging us to change our priorities and actively "embark" in the service of our ancestors who are waiting for us.' },
            { id: 'thursday', day: 'Thu', title: 'Just as Sure as You See That Picture üñºÔ∏è', devotionalText: 'Faith can sometimes feel intangible, but the witness of the Spirit is more real than physical sight. In A.C. Nelson\'s vision, he asked his deceased father if the gospel taught by the Church was true. His father pointed to a picture of the First Presidency on the wall and said, "Just as sure as you see that picture, just as sure is the gospel true". He continued with a powerful promise: The Gospel has the power to save every man and woman who obeys it, and in "no other way" can they obtain salvation.', 
                hymnTitle: 'We Thank Thee, O God, for a Prophet', hymnLink: 'https://www.youtube.com/watch?v=OSOpwwIXz38', hymnAnalysis: 'The story in the devotional revolves around a picture of the First Presidency on the wall, used as a symbol of the gospel\'s tangible truth. This hymn is the quintessential expression of gratitude for that living guidance. As you listen, imagine A.C. Nelson\'s father pointing to the picture while the choir sings. It grounds the abstract concept of "truth" in the reality of the Restoration and the prophets who lead us. The hymn confirms the message that the gospel is not just a philosophy, but a reality as sure and visible as the leaders God has chosen.', 
                songTitle: 'Disciple of Christ', songArtist: '2024 Youth Theme', songLink: 'https://www.youtube.com/watch?v=ImAtx0M9hbo', songAnalysis: 'The core message of today\'s devotional is the surety of our witness‚Äîthat spiritual truth is as real as physical objects. This song is a bold declaration of that certainty. The lyrics "I\'ll stand and testify again and again" and "He is the truth and the life" resonate with the father\'s promise that there is "no other way" to obtain salvation. The song\'s confident tone empowers us to take the challenge seriously: to let our faith be a solid, visible anchor in our lives, just like the picture on the wall.' },
            { id: 'friday', day: 'Fri', title: 'Binding the Family to the Savior üîó', devotionalText: 'In the video "Noah\'s Story," a young man from Samoa describes the feeling of taking names to the temple: "It is the best thing I could do for them, it\'s the best thing I could do for myself". He notes that finding family names is about "uniting family" and "connecting to our Heavenly Father." This is the practical application of Doctrine and Covenants 138. We are the "partners" to the spirits Joseph F. Smith saw. We perform the physical ordinances; they accept the spiritual covenant. Together, we bind the human family to Christ.', 
                hymnTitle: 'High on the Mountain Top', hymnLink: 'https://www.youtube.com/watch?v=9UDCZ1LlwnM', hymnAnalysis: 'This hymn celebrates the temple as a beacon to the world, the place where we "bind the human family to Christ." The devotional speaks of the partnership between us and the spirits, and this hymn describes the physical gathering to the "house of God" where those ordinances take place. The line "And in his holy courts... they\'ll engage" speaks to the active service mentioned in "Noah\'s Story." It reminds us that the temple is the intersection of heaven and earth, where the work of binding families happens.', 
                songTitle: 'I Love to See the Temple', songArtist: 'Janice Kapp Perry', songLink: 'https://www.youtube.com/watch?v=X_Ucp45ercY', songAnalysis: 'This classic recording captures the pure, simple faith required for temple service. The lyrics "I\'ll prepare myself... to make this world a better place" and "I\'ll covenant with my Father" perfectly capture the devotional\'s theme of "uniting family" and "connecting to our Heavenly Father." The innocence of the melody reminds us that this work is about simple, pure love‚Äîdoing the "best thing" for our ancestors and ourselves. It inspires us to use the "Ordinances Ready" feature with a heart full of anticipation.' },
            { id: 'saturday', day: 'Sat', title: 'The Sting of Death is Soothed üïäÔ∏è', devotionalText: 'Doctrine and Covenants 138 was received by a prophet who knew grief intimately. He had lost his parents, his uncle, and 13 of his own children. Yet, the vision he received testifies that the dead who repent will be redeemed "through the sacrifice of the Son of God upon the cross". Because of Christ, the separation is temporary. The vision confirms that our departed loved ones are not lost in a void; they are gathered, they are learning, and they are waiting for us.', 
                hymnTitle: 'I Know That My Redeemer Lives', hymnLink: 'https://www.youtube.com/watch?v=i9k1YeXIVik', hymnAnalysis: 'This hymn is the ultimate answer to the "sting of death." Joseph F. Smith\'s vision was based on the premise that the dead are redeemed "through the sacrifice of the Son of God." This hymn testifies, "He lives, my hungry soul to feed... He lives to silence all my fears." For a prophet who lost 13 children, and for us in our own grief, the assurance that "He lives to wipe away my tears" is the source of the peace described in the devotional. It confirms that because He lives, our loved ones are alive in Him, not lost in a void.', 
                songTitle: 'My Kindness Shall Not Depart From Thee', songArtist: 'Rob Gardner', songLink: 'https://www.youtube.com/watch?v=Zq-KhxsUxNo', songAnalysis: 'The devotional focuses on the comfort and gathering of spirits. Rob Gardner\'s masterpiece, based on scripture, offers the voice of the Lord speaking directly to the grieving soul: "For a little while have I forsaken thee... but with everlasting kindness will I gather thee." This perfectly mirrors the message of D&C 138‚Äîthat the separation of death is temporary ("a little while") and that the gathering is sure. The sweeping orchestration and tender lyrics soothe the sting of death, helping us feel the reality that our loved ones are being "gathered" by a merciful Savior.' },
            { id: 'sunday', day: 'Sun', title: 'Cling to the Gospel ‚öì', devotionalText: 'As we conclude our study of the Doctrine and Covenants this year, the final words of A.C. Nelson‚Äôs father to his son resonate with everything we have studied: "My son, always cling to the gospel. Be faithful to the covenants you have made with God". Life is complex, but the instruction is simple. We don\'t just hold the gospel; we cling to it. It is our lifeline, our map, and our connection to those we love on both sides of the veil.', 
                hymnTitle: 'Press Forward, Saints', hymnLink: 'https://www.youtube.com/watch?v=VYFrGdC5MgI', hymnAnalysis: 'The final instruction to "cling to the gospel" is a call to endurance and steadfastness. This hymn provides the marching rhythm for that commitment. The lyrics "Press forward, feasting on the word of Christ" and "Receive the palm of vic\'try in your hand" encourage us to hold tight to our covenants. It reinforces the idea that the gospel is a "lifeline" that pulls us forward through the complexities of life. Singing this is an act of recommitment, perfectly aligning with the challenge to focus on our covenants during the Sacrament.', 
                songTitle: 'Strong', songArtist: 'Strive to Be', songLink: 'https://www.youtube.com/watch?v=POBIP4eh-NY', songAnalysis: 'The instruction to "cling" implies that there will be forces trying to pull us away. "Strong" is a powerful anthem about spiritual tenacity in the face of such forces. The lyrics "Come what may... you are strong enough to make it through whatever comes" directly echo the resilience needed to "cling to the gospel." It captures the essence of A.C. Nelson‚Äôs advice to be faithful to covenants no matter what life throws at us. Listening to this helps visualize the act of holding on for safety and strength, ending the week on a note of determined, covenant-keeping faith.' }
        ];

        const STUDY_GUIDE_DATA = [
            {
                title: "Background",
                content: [
                    "This week‚Äôs lesson covers two distinct revelations separated by over 80 years and 1,500 miles, yet they are doctrinally inseparable.",
                    "Doctrine and Covenants 137 was received by Joseph Smith in the Kirtland Temple in 1836. At the time, Joseph was deeply concerned about the eternal status of his beloved brother Alvin, who had died in 1823 without being baptized. The common Christian theology of the time suggested that unbaptized souls could not be saved, weighing heavily on the Smith family.",
                    "Doctrine and Covenants 138 was received by President Joseph F. Smith in Salt Lake City in 1918. This revelation came during a time of immense global and personal grief. World War I was raging, a deadly influenza pandemic was sweeping the globe, and President Smith himself had lost his parents (Hyrum and Mary Fielding Smith) and 13 of his own children to death. While pondering on the love of God and the scriptures, he received a vision that clarified how the Savior organized the preaching of the gospel in the spirit world."
                ]
            },
            {
                title: "Part 1: God‚Äôs Fairness and the Heirship of the Kingdom",
                discussionPoint: "In this vision, Joseph Smith sees the celestial kingdom and is astonished to see his brother Alvin there, as Alvin had died before the restoration of the sealing keys or baptismal authority. The Lord reveals a comforting doctrine: He judges men not just by outward ordinances they had access to, but by the desires of their hearts.",
                quote: "Doctrine and Covenants 137:7‚Äì9: \"Thus I came to understand that all who have died without a knowledge of this gospel, who would have received it if they had been permitted to tarry, shall be heirs of the celestial kingdom of God; Also all that shall die henceforth without a knowledge of it, who would have received it with all their hearts, shall be heirs of that kingdom; For I, the Lord, will judge all men according to their works, according to the desire of their hearts.\"",
                question: "Joseph Smith spent years worrying about his brother's salvation because of the prevailing religious views of his time. How does the doctrine in Section 137 change our understanding of God‚Äôs character compared to the idea that unbaptized souls are automatically lost?",
                answer: (
                    <ul className="list-disc pl-5 space-y-2">
                        <li>It confirms that God is just and merciful, not arbitrary or bureaucratic.</li>
                        <li>It teaches that our agency and our heart's true desires are the ultimate criteria for judgment.</li>
                        <li>It provides hope for those of us with family members who have passed away without accepting the gospel, assuring us that God knows what they <em>would</em> have done.</li>
                    </ul>
                )
            },
            {
                title: "Part 2: The Role of Pondering in Revelation",
                discussionPoint: "Section 138 begins not with a sudden thunderclap of revelation, but with a description of deep, quiet study. President Joseph F. Smith was reading 1 Peter 3 and 4, reflecting on the Savior's sacrifice and His visit to the spirits in prison. It was through this process of \"pondering\" that the Spirit descended upon him.",
                quote: "Doctrine and Covenants 138:1‚Äì2, 11: \"On the third of October, in the year nineteen hundred and eighteen, I sat in my room pondering over the scriptures; And reflecting upon the great atoning sacrifice that was made by the Son of God, for the redemption of the world... As I pondered over these things which are written, the eyes of my understanding were opened, and the Spirit of the Lord rested upon me, and I saw the hosts of the dead, both small and great.\"",
                question: "We often read the scriptures to \"finish a chapter,\" but President Smith read to understand and reflect. What is the difference between reading and pondering, and how can we create space for pondering in our busy lives?",
                answer: (
                    <ul className="list-disc pl-5 space-y-2">
                        <li>Reading is decoding words; pondering is inviting the Spirit to teach us what the words mean for us personally.</li>
                        <li>We can create space by reading less volume but spending more time thinking about a specific verse.</li>
                        <li>We can ponder by visualizing the events, asking "Why is this included?", or substituting our own names into the verses.</li>
                    </ul>
                )
            },
            {
                title: "Part 3: The Work in the Spirit World",
                discussionPoint: "President Smith saw that while Jesus visited the spirit world, He did not go personally to the wicked or rebellious. Instead, He organized the faithful spirits‚Äîprophets, apostles, and righteous saints‚Äîto carry the message of redemption to those in darkness. This confirms that the work of the Lord does not stop at death; it accelerates.\n\nSupplemental Story: In the video \"A Visit from Father,\" President Russell M. Nelson shares a personal account regarding his grandfather, A.C. Nelson. In 1891 (27 years before D&C 138 was received), A.C. Nelson was visited by his deceased father. His father said: \"I have been assigned work that must be performed... My son, I received my commission to preach the gospel... I have been very busy in preaching the gospel of Jesus Christ. You cannot imagine, my son, how many spirits there are in the spirit world that have not yet received the gospel; but many are receiving it and a great work is being accomplished.\"",
                quote: "Doctrine and Covenants 138:30‚Äì32: \"But behold, from among the righteous, he organized his forces and appointed messengers, clothed with power and authority, and commissioned them to go forth and carry the light of the gospel to them that were in darkness... and thus was the gospel preached to the dead. And the chosen messengers went forth to declare the acceptable day of the Lord and proclaim liberty to the captives who were bound...\"",
                question: "Combining President Smith's vision with the experience of President Nelson‚Äôs grandfather, how does knowing that our ancestors are \"very busy\" preaching the gospel change how we view their passing‚Äîand our own future death?",
                answer: (
                    <ul className="list-disc pl-5 space-y-2">
                        <li>It changes death from a state of "rest" or "sleep" to a transfer of labor; we are moving to a new mission field.</li>
                        <li>It gives us comfort that our righteous loved ones are not idle; they are actively helping others, perhaps even watching over family members who have not yet received the gospel.</li>
                        <li>It emphasizes that the gathering of Israel happens on both sides of the veil simultaneously.</li>
                    </ul>
                )
            },
            {
                title: "Part 4: Our Connection to the Dead",
                discussionPoint: "The vision concludes with the understanding that the faithful elders and sisters of this dispensation will continue their work after death. However, this work relies on a partnership. The spirits can have faith and repent, but they cannot be baptized or sealed in the spirit world. They rely on us, the living, to perform those ordinances.\n\nSupplemental Story: In the video \"Noah's Story,\" a young man describes using the \"Ordinances Ready\" feature on the FamilySearch app. He says: \"Samoan culture... is a culture of service and of love. And this really is the highest form of service I could ever do... When we perform the endowment we talk about being connected and bound to the Savior... It's the best thing I could do for them, it's the best thing I could do for myself.\"",
                questions: [
                    {
                        q: "Noah described temple work as \"the highest form of service.\" Why is providing ordinances for the dead considered such a high form of service compared to other service we might render?",
                        a: (
                            <ul className="list-disc pl-5 space-y-2">
                                <li>Because the recipients cannot do it for themselves; it is purely selfless.</li>
                                <li>It has eternal consequences, whereas much of our service on earth (feeding, clothing) is temporary.</li>
                                <li>It requires us to live worthily to enter the temple, so it sanctifies the server as much as the served.</li>
                            </ul>
                        )
                    },
                    {
                        q: "Both the scripture and Noah's story mention a \"connection.\" How does participating in proxy ordinances affect your relationship with the Savior?",
                        a: (
                            <ul className="list-disc pl-5 space-y-2">
                                <li>We become "saviors on Mount Zion," mimicking Christ's work by doing something for others they cannot do for themselves.</li>
                                <li>It binds us to Him through covenants, and as we help others make covenants, we understand our own better.</li>
                            </ul>
                        )
                    }
                ]
            }
        ];

        // ==========================================
        // ICONS (Inline SVG Components)
        // ==========================================
        const IconSun = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="12" r="4"/><path d="M12 2v2"/><path d="M12 20v2"/><path d="m4.93 4.93 1.41 1.41"/><path d="m17.66 17.66 1.41 1.41"/><path d="M2 12h2"/><path d="M20 12h2"/><path d="m6.34 17.66-1.41 1.41"/><path d="m19.07 4.93-1.41 1.41"/></svg>;
        const IconUsers = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>;
        const IconMusic = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M9 18V5l12-2v13"/><circle cx="6" cy="18" r="3"/><circle cx="18" cy="16" r="3"/></svg>;
        const IconBookOpen = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></svg>;
        const IconShare = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="18" cy="5" r="3"/><circle cx="6" cy="12" r="3"/><circle cx="18" cy="19" r="3"/><line x1="8.59" x2="15.42" y1="13.51" y2="17.49"/><line x1="15.41" x2="8.59" y1="6.51" y2="10.49"/></svg>;
        const IconChevronDown = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="m6 9 6 6 6-6"/></svg>;
        const IconChevronRight = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="m9 18 6-6-6-6"/></svg>;
        const IconLink = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/></svg>;
        const IconPlayCircle = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="12" r="10"/><polygon points="10 8 16 12 10 16 10 8"/></svg>;
        const IconPrinter = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><polyline points="6 9 6 2 18 2 18 9"></polyline><path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"></path><rect x="6" y="14" width="12" height="8"></rect></svg>;


        // ==========================================
        // COMPONENTS
        // ==========================================

        // 1. Toast Notification Component
        const Toast = ({ message, show, onClose }) => {
            useEffect(() => {
                if (show) {
                    const timer = setTimeout(onClose, 3000);
                    return () => clearTimeout(timer);
                }
            }, [show, onClose]);

            if (!show) return null;

            return (
                <div className="fixed bottom-24 left-1/2 transform -translate-x-1/2 bg-stone-800 text-white px-6 py-3 rounded-full shadow-lg z-50 flex items-center gap-2 animate-bounce toast-notification">
                    <span className="text-green-400">&#10003;</span>
                    {message}
                </div>
            );
        };

        // 2. Interactive Toggle Answer Component
        const ToggleAnswer = ({ question, answer }) => {
            const [isOpen, setIsOpen] = useState(false);

            return (
                <div className="mb-6 border-l-4 border-amber-200 pl-4">
                    <button 
                        onClick={() => setIsOpen(!isOpen)}
                        className="text-left font-bold text-amber-900 w-full hover:text-amber-700 transition-colors flex items-start gap-2"
                    >
                        <span className="mt-1">{isOpen ? <IconChevronDown className="w-5 h-5" /> : <IconChevronRight className="w-5 h-5" />}</span>
                        <span>{question}</span>
                    </button>
                    
                    {isOpen && (
                        <div className="mt-3 p-4 bg-stone-100 rounded-lg text-stone-700 italic border border-stone-200 fade-in">
                            <span className="font-bold not-italic text-stone-500 text-xs uppercase tracking-wider block mb-1">Possible Answer</span>
                            {answer}
                        </div>
                    )}
                </div>
            );
        };

        // 3. Main App Component
        const App = () => {
            const [activeTab, setActiveTab] = useState('devotional');
            const [activeDayId, setActiveDayId] = useState('');
            const [showToast, setShowToast] = useState(false);
            const [youthGroup, setYouthGroup] = useState('ym'); // 'ym' or 'yw'

            // Initialize Day based on current date
            useEffect(() => {
                const dayMap = ['sunday', 'monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday'];
                const todayIndex = new Date().getDay();
                setActiveDayId(dayMap[todayIndex]);
            }, []);

            const getActiveData = (dataArray) => {
                return dataArray.find(d => d.id === activeDayId) || dataArray[0];
            };

            const copyToClipboard = (dayData) => {
                const promptParts = dayData.prompt.split(':');
                const promptLabel = promptParts[0];
                const promptText = promptParts.slice(1).join(':').trim();
                const scriptureText = (dayData.scriptureRef && dayData.scriptureLink)
                    ? `Scripture: ${dayData.scriptureRef}\n${dayData.scriptureLink}\n\n`
                    : ""; 

                // Use dayData.date if available, otherwise fallback to empty string or generic
                const dateStr = dayData.date ? dayData.date : "";

                const textToCopy = `‚ú® Daily Devotional ‚ú®\n\n${dateStr}\n*${dayData.title}*\n\n${dayData.text}\n\n*${promptLabel}:* ${promptText}\n\n${scriptureText}Full Lesson:\n${dayData.lessonLink}`;

                // Modern clipboard API
                if (navigator.clipboard && navigator.clipboard.writeText) {
                     navigator.clipboard.writeText(textToCopy).then(() => {
                        setShowToast(true);
                    }).catch(err => {
                        fallbackCopy(textToCopy);
                    });
                } else {
                    fallbackCopy(textToCopy);
                }
            };

            const fallbackCopy = (text) => {
                 try {
                    const textArea = document.createElement("textarea");
                    textArea.value = text;
                    
                    // Avoid scrolling to bottom
                    textArea.style.top = "0";
                    textArea.style.left = "0";
                    textArea.style.position = "fixed";
        
                    document.body.appendChild(textArea);
                    textArea.focus();
                    textArea.select();
                    document.execCommand('copy');
                    document.body.removeChild(textArea);
                    setShowToast(true);
                 } catch (err) {
                     console.error("Fallback copy failed", err);
                 }
            };

            const renderDevotional = () => {
                const data = getActiveData(DEVOTIONAL_DATA);
                return (
                    <div className="space-y-6 fade-in max-w-2xl mx-auto">
                        <div className="bg-white p-6 rounded-2xl shadow-sm border border-stone-200">
                            <span className="text-amber-600 text-sm font-bold uppercase tracking-widest">{data.date}</span>
                            <h2 className="text-3xl font-serif font-bold text-stone-800 mt-2 mb-4">{data.title}</h2>
                            <p className="text-stone-600 leading-relaxed text-lg">{data.text}</p>
                            
                            <div className="mt-8 p-5 bg-amber-50 rounded-xl border border-amber-100">
                                <h3 className="font-bold text-amber-900 mb-2 flex items-center gap-2">
                                    <span className="w-2 h-2 bg-amber-500 rounded-full"></span>
                                    {data.prompt.split(':')[0]}
                                </h3>
                                <p className="text-stone-700 italic">{data.prompt.split(':').slice(1).join(':')}</p>
                            </div>

                            <div className="mt-6 grid grid-cols-1 sm:grid-cols-2 gap-3">
                                {data.scriptureLink && (
                                    <a href={data.scriptureLink} target="_blank" className="flex items-center justify-center gap-2 bg-amber-600 text-white py-3 rounded-lg font-medium hover:bg-amber-700 transition">
                                        <IconBookOpen className="w-4 h-4" /> Read Scripture: {data.scriptureRef}
                                    </a>
                                )}
                                <a href={data.lessonLink} target="_blank" className="flex items-center justify-center gap-2 bg-stone-200 text-stone-700 py-3 rounded-lg font-medium hover:bg-stone-300 transition">
                                    <IconLink className="w-4 h-4" /> Full Lesson
                                </a>
                            </div>

                            <button 
                                onClick={() => copyToClipboard(data)}
                                className="w-full mt-4 py-4 border-t border-stone-100 text-stone-500 hover:text-amber-600 font-medium flex items-center justify-center gap-2 transition-colors"
                            >
                                <IconShare className="w-4 h-4" /> Share Devotional
                            </button>
                        </div>
                    </div>
                );
            };

            const renderYouth = () => {
                const data = getActiveData(youthGroup === 'ym' ? YM_DATA : YW_DATA);
                return (
                    <div className="fade-in max-w-3xl mx-auto">
                        {/* Toggle Switch for YM/YW */}
                        <div className="flex justify-center mb-6 bg-stone-200 p-1 rounded-xl inline-flex w-full sm:w-auto mx-auto">
                            <button 
                                onClick={() => setYouthGroup('ym')}
                                className={`flex-1 sm:flex-none px-8 py-2 rounded-lg font-bold transition-all ${youthGroup === 'ym' ? 'bg-white shadow-sm text-amber-700' : 'text-stone-500 hover:text-stone-700'}`}
                            >
                                Young Men
                            </button>
                            <button 
                                onClick={() => setYouthGroup('yw')}
                                className={`flex-1 sm:flex-none px-8 py-2 rounded-lg font-bold transition-all ${youthGroup === 'yw' ? 'bg-white shadow-sm text-amber-700' : 'text-stone-500 hover:text-stone-700'}`}
                            >
                                Young Women
                            </button>
                        </div>

                        <div className="bg-white p-6 rounded-2xl shadow-sm border border-stone-200 relative overflow-hidden">
                            {/* Decorative Top Border */}
                            <div className={`absolute top-0 left-0 w-full h-2 ${youthGroup === 'ym' ? 'bg-blue-600' : 'bg-pink-500'}`}></div>

                            <h2 className="text-2xl font-serif font-bold text-stone-800 mt-4 mb-4">{data.title}</h2>
                            <p className="text-stone-600 leading-relaxed">{data.text}</p>
                            
                            <div className="mt-6 p-5 bg-stone-50 rounded-xl border border-stone-100">
                                <h3 className="font-bold text-stone-800 mb-2">{data.prompt.split(':')[0]}</h3>
                                <p className="text-stone-600">{data.prompt.split(':').slice(1).join(':')}</p>
                            </div>
                             <div className="mt-6 grid grid-cols-1 sm:grid-cols-2 gap-3">
                                {data.scriptureLink && (
                                    <a href={data.scriptureLink} target="_blank" className={`flex items-center justify-center gap-2 text-white py-3 rounded-lg font-medium transition ${youthGroup === 'ym' ? 'bg-blue-600 hover:bg-blue-700' : 'bg-pink-500 hover:bg-pink-600'}`}>
                                        <IconBookOpen className="w-4 h-4" /> Read Scripture: {data.scriptureRef}
                                    </a>
                                )}
                                <a href={data.lessonLink} target="_blank" className="flex items-center justify-center gap-2 bg-stone-200 text-stone-700 py-3 rounded-lg font-medium hover:bg-stone-300 transition">
                                    <IconLink className="w-4 h-4" /> Full Lesson
                                </a>
                            </div>
                             <button 
                                onClick={() => copyToClipboard(data)}
                                className="w-full mt-4 py-4 border-t border-stone-100 text-stone-500 hover:text-stone-800 font-medium flex items-center justify-center gap-2 transition-colors"
                            >
                                <IconShare className="w-4 h-4" /> Share Content
                            </button>
                        </div>
                    </div>
                );
            };

            const renderSongs = () => {
                const data = getActiveData(SONGS_DATA);
                return (
                    <div className="fade-in max-w-3xl mx-auto">
                         <div className="text-center bg-white p-6 rounded-2xl shadow-sm border border-stone-200 mb-6">
                            <div className="w-12 h-12 bg-amber-100 rounded-full flex items-center justify-center mx-auto mb-4">
                                <IconMusic className="w-6 h-6 text-amber-700" />
                            </div>
                            <h2 className="text-2xl font-serif font-bold text-stone-800">Songs of the Soul</h2>
                            <p className="mt-2 text-stone-500 text-sm">Music to invite the Spirit into your daily study.</p>
                        </div>

                        <div className="bg-white p-6 rounded-2xl shadow-sm border border-stone-200">
                            <h3 className="text-lg font-bold text-stone-400 uppercase tracking-wider mb-4">Daily Selection</h3>
                            <h2 className="text-xl font-bold text-stone-800 mb-2">{data.title}</h2>
                            <p className="text-stone-600 italic mb-8 text-sm border-l-2 border-amber-300 pl-4">{data.devotionalText}</p>
                            
                            <div className="space-y-8">
                                {/* Hymn Section */}
                                <div>
                                    <span className="text-xs font-bold text-amber-600 tracking-widest uppercase mb-2 block flex items-center gap-2">
                                        <IconMusic className="w-3 h-3" /> Hymn Selection
                                    </span>
                                    <div className="flex items-start justify-between gap-4">
                                        <h3 className="text-xl font-serif font-bold text-stone-800">{data.hymnTitle}</h3>
                                        <a href={data.hymnLink} target="_blank" rel="noopener noreferrer" className="text-amber-600 hover:text-amber-700 transition-colors" aria-label="Play Song">
                                            <IconPlayCircle className="w-8 h-8" />
                                        </a>
                                    </div>
                                    <p className="mt-2 text-stone-600 text-sm leading-relaxed">{data.hymnAnalysis}</p>
                                </div>

                                <hr className="border-stone-100" />

                                {/* Song Section */}
                                <div>
                                    <span className="text-xs font-bold text-sky-600 tracking-widest uppercase mb-2 block flex items-center gap-2">
                                        <IconMusic className="w-3 h-3" /> Contemporary Song
                                    </span>
                                    <div className="flex items-start justify-between gap-4">
                                        <div>
                                            <h3 className="text-xl font-serif font-bold text-stone-800">{data.songTitle}</h3>
                                            <p className="text-xs text-stone-400 mb-2">by {data.songArtist}</p>
                                        </div>
                                        <a href={data.songLink} target="_blank" rel="noopener noreferrer" className="text-sky-600 hover:text-sky-700 transition-colors" aria-label="Play Song">
                                            <IconPlayCircle className="w-8 h-8" />
                                        </a>
                                    </div>
                                    <p className="mt-2 text-stone-600 text-sm leading-relaxed">{data.songAnalysis}</p>
                                </div>
                            </div>
                        </div>
                    </div>
                );
            };

            const renderStudy = () => {
                return (
                    <div className="fade-in max-w-6xl mx-auto pb-12">
                         <div id="printable-study-section" className="bg-white p-8 rounded-2xl shadow-sm border border-stone-200 relative">
                            
                            <div className="flex justify-between items-start mb-2">
                                 <div className="w-full">
                                    <h1 className="text-3xl font-serif font-bold text-center text-amber-800">Discussion Guide</h1>
                                 </div>
                                 <button 
                                    onClick={() => window.print()} 
                                    className="no-print absolute top-6 right-6 text-stone-400 hover:text-stone-600 hover:bg-stone-100 p-2 rounded-full transition-all"
                                    aria-label="Print Discussion Guide"
                                    title="Print Discussion Guide"
                                >
                                    <IconPrinter className="w-6 h-6" />
                                </button>
                            </div>

                            <p className="text-center text-stone-500 mb-8 italic">"{WEEK_INFO.title}"</p>
                            
                            {/* --- ADDED IMAGE HERE --- */}
                            <div className="mb-8">
                                <img 
                                    src="Graphic.jpg" 
                                    alt="Infographic: The Doctrine of Salvation for the Dead" 
                                    className="w-full h-auto rounded-lg shadow-md border border-stone-200"
                                    onError={(e) => {e.target.style.display = 'none'}} 
                                />
                            </div>
                            {/* ------------------------ */}
                            
                            {STUDY_GUIDE_DATA.map((section, idx) => (
                                <div key={idx} className="mb-10 last:mb-0">
                                    <h2 className="text-xl font-bold text-stone-800 mb-3 border-b border-amber-100 pb-2">{section.title}</h2>
                                    
                                    {section.content && section.content.map((p, i) => (
                                        <p key={i} className="text-stone-700 mb-3 leading-relaxed">{p}</p>
                                    ))}

                                    {section.discussionPoint && (
                                        <div className="mb-4">
                                            <h3 className="text-amber-700 font-semibold text-sm uppercase mb-1">Context</h3>
                                            <p className="text-stone-700 whitespace-pre-line">{section.discussionPoint}</p>
                                        </div>
                                    )}

                                    {section.quote && (
                                        <blockquote className="border-l-4 border-stone-300 pl-4 py-1 my-4 text-stone-600 italic bg-stone-50 p-3 rounded-r-lg">
                                            {section.quote}
                                        </blockquote>
                                    )}

                                    {section.question && (
                                        <ToggleAnswer question={section.question} answer={section.answer} />
                                    )}

                                    {section.questions && section.questions.map((qItem, qIdx) => (
                                        <ToggleAnswer key={qIdx} question={qItem.q} answer={qItem.a} />
                                    ))}
                                </div>
                            ))}

                            <div className="mt-12 pt-8 border-t border-stone-200 text-center">
                                <p className="text-stone-800 font-medium">Lesson Summary</p>
                                <p className="text-stone-600 mt-2 text-sm">
                                    This week's lesson reminds us that the plan of salvation is truly universal and merciful.
                                    <br/><br/>
                                    <strong>God is Fair:</strong> Through D&C 137, we learn that those who died without the gospel are not lost but are judged by the desires of their hearts.
                                    <br/>
                                    <strong>The Work Continues:</strong> Through D&C 138 and the testimony of A.C. Nelson, we learn that the spirit world is a place of intense labor and missionary work.
                                    <br/>
                                    <strong>We Are Needed:</strong> As illustrated in Noah's story, we play a critical role. By living worthily and performing ordinances in the temple, we provide the necessary keys for our ancestors to progress, binding the human family together in love.
                                </p>
                            </div>
                        </div>
                    </div>
                );
            };

            // Dynamic Footer based on view
            const renderFooter = () => (
                <footer className="p-6 text-center text-stone-400 text-xs">
                    <p>{WEEK_INFO.valediction}</p>
                </footer>
            );

            return (
                <div className="flex flex-col h-full bg-stone-100">
                    {/* Header */}
                    <header className="bg-white border-b border-stone-200 pt-6 pb-2 px-4 shadow-sm z-10">
                        <div className="max-w-4xl mx-auto text-center">
                            <h1 className="text-xs font-bold tracking-[0.2em] text-stone-400 uppercase mb-1">Come, Follow Me</h1>
                            <h2 className="text-lg sm:text-xl font-serif font-bold text-stone-800 leading-tight">{WEEK_INFO.title}</h2>
                            <p className="text-stone-500 text-xs mt-1 mb-4">{WEEK_INFO.dateRange}</p>

                            {/* Main Nav Tabs */}
                            <div className="flex justify-center space-x-1 sm:space-x-4 mt-4 overflow-x-auto hide-scrollbar pb-2">
                                <button onClick={() => setActiveTab('devotional')} className={`flex flex-col sm:flex-row items-center gap-2 px-4 py-2 rounded-xl transition-all ${activeTab === 'devotional' ? 'bg-amber-50 text-amber-700 ring-1 ring-amber-200' : 'text-stone-400 hover:text-stone-600'}`}>
                                    <IconSun className="w-5 h-5" />
                                    <span className="text-xs sm:text-sm font-medium">Daily</span>
                                </button>
                                <button onClick={() => setActiveTab('youth')} className={`flex flex-col sm:flex-row items-center gap-2 px-4 py-2 rounded-xl transition-all ${activeTab === 'youth' ? 'bg-amber-50 text-amber-700 ring-1 ring-amber-200' : 'text-stone-400 hover:text-stone-600'}`}>
                                    <IconUsers className="w-5 h-5" />
                                    <span className="text-xs sm:text-sm font-medium">Youth</span>
                                </button>
                                <button onClick={() => setActiveTab('songs')} className={`flex flex-col sm:flex-row items-center gap-2 px-4 py-2 rounded-xl transition-all ${activeTab === 'songs' ? 'bg-amber-50 text-amber-700 ring-1 ring-amber-200' : 'text-stone-400 hover:text-stone-600'}`}>
                                    <IconMusic className="w-5 h-5" />
                                    <span className="text-xs sm:text-sm font-medium">Music</span>
                                </button>
                                <button onClick={() => setActiveTab('study')} className={`flex flex-col sm:flex-row items-center gap-2 px-4 py-2 rounded-xl transition-all ${activeTab === 'study' ? 'bg-amber-50 text-amber-700 ring-1 ring-amber-200' : 'text-stone-400 hover:text-stone-600'}`}>
                                    <IconBookOpen className="w-5 h-5" />
                                    <span className="text-xs sm:text-sm font-medium">Study</span>
                                </button>
                            </div>
                        </div>
                    </header>

                    {/* Secondary Day Navigation (Horizontal Scroll) - Only show for Daily, Youth, Songs */}
                    {activeTab !== 'study' && (
                        <div className="bg-white border-b border-stone-200 py-2 px-4 shadow-sm z-10">
                            <div className="max-w-4xl mx-auto">
                                <div className="flex space-x-3 overflow-x-auto hide-scrollbar pb-1 sm:justify-center">
                                    {DEVOTIONAL_DATA.map((d) => (
                                        <button
                                            key={d.id}
                                            onClick={() => setActiveDayId(d.id)}
                                            className={`flex-shrink-0 flex flex-col items-center justify-center w-12 h-14 rounded-lg transition-all border ${activeDayId === d.id ? 'bg-stone-800 text-white border-stone-800 shadow-md transform scale-105' : 'bg-white text-stone-500 border-stone-200 hover:border-stone-300'}`}
                                        >
                                            <span className="text-[10px] font-bold uppercase">{d.day}</span>
                                            <span className={`text-lg font-bold leading-none ${activeDayId === d.id ? 'text-amber-400' : 'text-stone-800'}`}>{d.date.split(' ')[1]}</span>
                                        </button>
                                    ))}
                                </div>
                            </div>
                        </div>
                    )}

                    {/* Content Area - Scrollable */}
                    <main className="flex-1 overflow-y-auto p-4 pb-20">
                        {activeTab === 'devotional' && renderDevotional()}
                        {activeTab === 'youth' && renderYouth()}
                        {activeTab === 'songs' && renderSongs()}
                        {activeTab === 'study' && renderStudy()}
                        {renderFooter()}
                    </main>

                    <Toast message="Copied to Clipboard!" show={showToast} onClose={() => setShowToast(false)} />
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
