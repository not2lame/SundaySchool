<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Come, Follow Me Companion</title>
    
    <!-- Tailwind CSS (Styling) -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Fonts: Inter (Body) and Merriweather (Headings) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Merriweather:ital,wght@0,300;0,400;0,700;1,400&display=swap" rel="stylesheet">
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    
    <!-- Babel (to compile JSX in browser) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>

    <!-- Tailwind Configuration -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        serif: ['Merriweather', 'serif'],
                    },
                    colors: {
                        stone: { 50: '#fafaf9', 100: '#f5f5f4', 200: '#e7e5e4', 300: '#d6d3d1', 400: '#a8a29e', 500: '#78716c', 600: '#57534e', 700: '#44403c', 800: '#292524', 900: '#1c1917' },
                        amber: { 50: '#fffbeb', 100: '#fef3c7', 200: '#fde68a', 300: '#fcd34d', 400: '#fbbf24', 500: '#f59e0b', 600: '#d97706', 700: '#b45309', 800: '#92400e', 900: '#78350f' }
                    }
                }
            }
        }
    </script>

    <style>
        .hide-scrollbar::-webkit-scrollbar { display: none; }
        .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        .fade-in { animation: fadeIn 0.5s ease-in; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* Print Styles */
        @media print {
            body * {
                visibility: hidden;
            }
            #printable-study-section, #printable-study-section * {
                visibility: visible;
            }
            #printable-study-section {
                position: absolute;
                left: 0;
                top: 0;
                width: 100%;
                margin: 0;
                padding: 0;
                border: none;
                box-shadow: none;
            }
            .no-print {
                display: none !important;
            }
        }
    </style>
</head>
<body class="bg-stone-100 text-stone-800 h-screen flex flex-col overflow-hidden">

    <!-- Loading Fallback -->
    <div id="root" class="h-full flex flex-col">
        <div class="flex items-center justify-center h-full bg-stone-100 text-stone-500 p-4 text-center">
            <div>
                <h2 class="text-xl font-bold mb-2">Loading App...</h2>
                <p class="text-sm">If this takes longer than a few seconds, your network may be blocking the script libraries (React).</p>
            </div>
        </div>
    </div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // ==========================================
        // DATA CONSTANTS
        // ==========================================

        const WEEK_INFO = {
            title: "To Be a Greater Follower of Righteousness",
            dateRange: "February 16‚Äì22, 2026",
            valediction: "May you find joy in becoming a 'greater follower of righteousness' this week."
        };

        const DEVOTIONAL_DATA = [
            { id: 'monday', day: 'Mon', fullDay: 'Monday', date: 'Feb 16', title: 'Defining Your Own Path üß≠', text: 'Abraham is known as the "father of the faithful," but he came from a home that was anything but faithful. His father worshipped idols and even endangered Abraham‚Äôs life. Yet, Abraham decided he wanted something different. He wrote, "I sought for the blessings of the fathers... desiring also to be one who possessed great knowledge, and to be a greater follower of righteousness" (Abraham 1:2). No matter our background or past environment, we have the agency to decide what kind of legacy we want to leave. We can choose to break old cycles and start new, righteous ones.', prompt: 'Challenge: Identify one "generational cycle" or habit you want to improve or change for the better in your family line. Write it down and make a plan.', scriptureRef: 'Abraham 1:2', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/pgp/abr/1?lang=eng&id=p2', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-old-testament-2026/08?lang=eng' },
            { id: 'tuesday', day: 'Tue', fullDay: 'Tuesday', date: 'Feb 17', title: 'Blessed to Be a Blessing ü§≤', text: 'God made a massive covenant with Abraham: land, priesthood, and innumerable posterity. But there was a "why" attached to it. God said, "Thou shalt be a blessing" (Genesis 12:2). Being a covenant people isn\'t just about the privileges we receive; it\'s about the responsibility we carry to bless "all the families of the earth." As Elder Dale G. Renlund taught, the covenant path isn\'t just a checklist; it\'s a relationship of trust where we partner with God to help His children. We are blessed so we can be a blessing.', prompt: 'Challenge: Send a text of encouragement to someone who is struggling today. Be the blessing God promised someone else.', scriptureRef: 'Genesis 12:2', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/ot/gen/12?lang=eng&id=p2', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-old-testament-2026/08?lang=eng' },
            { id: 'wednesday', day: 'Wed', fullDay: 'Wednesday', date: 'Feb 18', title: 'Faith in the Gap üåå', text: 'God took Abraham outside and told him to count the stars‚Äîif he could. That‚Äôs how many descendants he would have. The catch? Abraham and Sarah were old and childless. There was a massive gap between the promise and the reality. Yet, the scripture says Abraham "believed in the Lord; and he counted it to him for righteousness." Sometimes our greatest spiritual work is simply trusting God in the "gap"‚Äîwhen the blessings haven\'t arrived yet, but we hold on to the Promiser.', prompt: 'Reflection: Look at the night sky (or a picture of stars) tonight. Remind yourself that God\'s timing is cosmic, not just calendar-based.', scriptureRef: 'Genesis 15:5-6', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/ot/gen/15?lang=eng&id=p5-6', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-old-testament-2026/08?lang=eng' },
            { id: 'thursday', day: 'Thu', fullDay: 'Thursday', date: 'Feb 19', title: 'The Prince of Peace üëë', text: 'We are introduced to the great high priest Melchizedek this week. The JST tells us that his people "waxed strong in iniquity," but Melchizedek exercised such mighty faith and preached repentance so effectively that he established peace in the land. He didn\'t just survive a wicked culture; he transformed it. He became known as the "Prince of Peace." In a contentious world, we hold the same priesthood power and covenant responsibility to be peacemakers in our homes and communities.', prompt: 'Challenge: Be a "circuit breaker" today. If a conversation turns negative, gossipy, or contentious, use a soft answer to turn away wrath.', scriptureRef: 'JST Genesis 14:33', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/jst/jst-gen/14?lang=eng&id=p33', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-old-testament-2026/08?lang=eng' },
            { id: 'friday', day: 'Fri', fullDay: 'Friday', date: 'Feb 20', title: 'Who Makes You Rich? üí∞', text: 'After a military victory, the King of Sodom offered Abraham all the spoils of war. Abraham refused every penny, saying, "I will not take from a thread even to a shoelatchet... lest thou shouldest say, I have made Abram rich." Instead, Abraham paid tithes to Melchizedek. Abraham wanted there to be no confusion: his blessings came from God, not from the world. Tithing is our declaration of independence from the world and our dependence on the Lord.', prompt: 'Reflection: Review your attitude toward your finances. Do you view your resources as "yours" to keep, or "God\'s" to manage?', scriptureRef: 'Genesis 14:22-23', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/ot/gen/14?lang=eng&id=p22-23', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-old-testament-2026/08?lang=eng' },
            { id: 'saturday', day: 'Sat', fullDay: 'Saturday', date: 'Feb 21', title: 'The God Who Sees Me üëÅÔ∏è', text: 'Hagar found herself in a desperate situation‚Äîcaught in family tension, mistreated, and fleeing into the wilderness. She likely felt invisible and unloved. But an angel found her by a fountain of water. After the encounter, she gave God a name: El Roi, which means "The God who sees me." She realized, "Have I also here looked after him that seeth me?" No matter how marginalized or lonely you may feel, you are never invisible to God.', prompt: 'Challenge: Pray specifically to feel God\'s awareness of you today, or ask Him to show you someone who needs you to "see" them.', scriptureRef: 'Genesis 16:13', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/ot/gen/16?lang=eng&id=p13', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-old-testament-2026/08?lang=eng' },
            { id: 'sunday', day: 'Sun', fullDay: 'Sunday', date: 'Feb 22', title: 'Yoked to the Savior üêÇ', text: 'In this week\'s study, we learned about covenants. Elder David A. Bednar teaches that a covenant is like a yoke. A yoke allows two oxen to pull a load together. When we make covenants, we are "yoking" ourselves to Jesus Christ. We aren\'t pulling the load of life alone anymore; we are pulling it with Him. He provides the strength, the direction, and the pace. As you partake of the Sacrament today, visualize that yoke being placed upon you‚Äînot as a burden, but as a connection to ample power.', prompt: 'Reflection: During the Sacrament, ask yourself: "What is a burden I am carrying alone that I need to let the Savior help me carry?"', scriptureRef: 'Abraham 2:11', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/pgp/abr/2?lang=eng&id=p11', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-old-testament-2026/08?lang=eng' }
        ];

        const YM_DATA = [
             { id: 'monday', day: 'Mon', date: 'Feb 16', title: 'Level Up Your Legacy üéÆ', text: 'Abraham is a legend, but his dad was actually an idol worshipper who tried to kill him! Abraham didn\'t let his toxic environment define him. Instead, he said, "I sought for the blessings of the fathers... desiring also to be one who possessed great knowledge, and to be a greater follower of righteousness" (Abraham 1:2). You aren\'t defined by your circumstances or what people around you are doing. You have the power to choose your own level and start your own righteous legacy.', prompt: 'Challenge: Is there a bad habit your friends or schoolmates have that you want to break? Decide today to be the one who changes the pattern.', scriptureRef: 'Abraham 1:2', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/pgp/abr/1?lang=eng&id=p2', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-old-testament-2026/08?lang=eng' },
            { id: 'tuesday', day: 'Tue', date: 'Feb 17', title: 'Swimming Upstream üåä', text: 'Elder Renlund compared Priesthood covenants to a "tidal bore"‚Äîa massive wave in the Amazon river that flows against the current. The world\'s current is flowing toward selfishness and sin. But your covenants give you power to flow the other way. Being a covenant man means you have access to "heavenly power" to stand out, stand up, and do the hard things when everyone else is just drifting downstream.', prompt: 'Challenge: Do one thing today that goes "against the flow"‚Äîlike not laughing at a rude joke or sitting by someone who is alone at lunch.', scriptureRef: 'Abraham 1:18', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/pgp/abr/1?lang=eng&id=p18', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-old-testament-2026/08?lang=eng' },
            { id: 'wednesday', day: 'Wed', date: 'Feb 18', title: 'The Ultimate Spotter üèãÔ∏è‚Äç‚ôÇÔ∏è', text: 'God made a covenant with Abraham, promising to be with him and bless him. Elder Bednar teaches that a covenant is like a yoke‚Äîa tool that connects two oxen so they can pull a heavy load together. When you make covenants (like baptism and Priesthood ordination), you are "yoking" yourself to Jesus Christ. He becomes your partner. He pulls the heavy weight. You are never lifting the load of life alone; He is spotting you every rep.', prompt: 'Reflection: What is a "weight" or stress you are carrying right now? How can trusting the Savior help you carry it?', scriptureRef: 'Abraham 2:11', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/pgp/abr/2?lang=eng&id=p11', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-old-testament-2026/08?lang=eng' },
            { id: 'thursday', day: 'Thu', date: 'Feb 19', title: 'The Peacemaker Mode üïäÔ∏è', text: 'We learn about Melchizedek this week. He was such a powerful Priesthood holder that he was called the "Prince of Peace." His people were wicked, but he exercised mighty faith and helped them repent and find peace. As an Aaronic Priesthood holder, you have the authority to bring peace, too. You can be the guy who de-escalates drama, stops contention in the group chat, and brings a chill, spiritual vibe to your home.', prompt: 'Challenge: If you sense tension or drama today, be the "circuit breaker." Change the subject or say something kind to lower the temperature.', scriptureRef: 'Alma 13:18', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/bofm/alma/13?lang=eng&id=p18', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-old-testament-2026/08?lang=eng' },
            { id: 'friday', day: 'Fri', date: 'Feb 20', title: 'Don\'t Take the Cash üí∞', text: 'After winning a battle, the King of Sodom offered Abraham a ton of money. Abraham said NO. He told the king he wouldn\'t take even a "shoelatchet" (shoelace) because he didn\'t want the wicked king to say, "I have made Abram rich." Abraham paid tithing instead. He wanted his success to come from God, not the world. Don\'t sell out your standards for popularity or cash. Trust that God\'s blessings are better than anything Sodom can offer.', prompt: 'Challenge: Next time you get money, pay your tithing first. It‚Äôs a power move that shows God He is your number one priority.', scriptureRef: 'Genesis 14:22-23', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/ot/gen/14?lang=eng&id=p22-23', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-old-testament-2026/08?lang=eng' },
            { id: 'saturday', day: 'Sat', date: 'Feb 21', title: 'The God Who Sees You üëÅÔ∏è', text: 'Hagar was a servant who felt mistreated and ran away into the desert. She was totally alone. But God sent an angel to help her. She gave God the name El Roi, which means "The God who sees me." Sometimes you might feel invisible at school or like nobody gets what you\'re going through. But El Roi sees you. He knows exactly where you are and what you need.', prompt: 'Challenge: Look around today for someone who seems "invisible" or left out. Make them feel seen by saying hi or giving them a fist bump.', scriptureRef: 'Genesis 16:13', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/ot/gen/16?lang=eng&id=p13', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-old-testament-2026/08?lang=eng' },
            { id: 'sunday', day: 'Sun', date: 'Feb 22', title: 'Name Change üè∑Ô∏è', text: 'In Genesis 17, God changes Abram\'s name to Abraham to mark his new covenant. A new name meant a new mission and a new identity. When you take the Sacrament today, you are renewing your willingness to take upon yourself the name of Jesus Christ. You aren\'t just [Your Name] anymore; you are a representative of the Savior. That\'s a massive upgrade to your identity.', prompt: 'Reflection: During the Sacrament, think about one thing you can do this week to live up to the name of Christ that you carry.', scriptureRef: 'Genesis 17:5', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/ot/gen/17?lang=eng&id=p5', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-old-testament-2026/08?lang=eng' }
        ];

        const YW_DATA = [
            { id: 'monday', day: 'Mon', date: 'Feb 16', title: 'Your Spiritual Glow Up ‚ú®', text: 'Abraham is a total legend, but did you know he grew up in a really toxic environment? His dad actually worshipped idols and made bad choices. But Abraham didn\'t let that stop him. He said, "I sought for the blessings of the fathers... desiring also to be one who possessed great knowledge, and to be a greater follower of righteousness" (Abraham 1:2). He wanted a spiritual upgrade! No matter what is going on around you or what your friends are doing, you can choose to be a "greater follower" of Jesus Christ starting today.', prompt: 'Challenge: Write down one way you want to "level up" spiritually this week (like praying with more focus or being kinder to a sibling).', scriptureRef: 'Abraham 1:2', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/pgp/abr/1?lang=eng&id=p2', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-old-testament-2026/08?lang=eng' },
            { id: 'tuesday', day: 'Tue', date: 'Feb 17', title: 'The Ultimate Relationship üíñ', text: 'We talk a lot about covenants, but what does that actually mean? Basically, God is inviting you into a "relationship of trust" with Him. When God made a covenant with Abraham, He promised to always be there for him. When you are baptized and make covenants, you are "binding" yourself to God. It‚Äôs like having the ultimate heavenly Bestie who promises to never leave you, to give you power, and to help you through the drama of life. You are never walking this path alone!', prompt: 'Reflection: How does knowing you are "bound" to God through covenants make you feel about facing a hard test or a difficult social situation?', scriptureRef: 'Abraham 2:9-11', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/pgp/abr/2?lang=eng&id=p9-11', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-old-testament-2026/08?lang=eng' },
            { id: 'wednesday', day: 'Wed', date: 'Feb 18', title: 'Going Against the Flow üåä', text: 'Elder Renlund compared keeping covenants to a "tidal bore"‚Äîa rare wave in the Amazon river that flows against the powerful current. The world\'s "current" often pushes us to be selfish or unkind. But because you have covenants, you have access to heavenly power to go against the flow! You can be the one who stands up for kindness when everyone else is gossiping. You can be the one with light when things feel dark.', prompt: 'Challenge: Be the "wave" today. Do something unexpected and kind for someone who might feel left out.', scriptureRef: 'Abraham 1:18', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/pgp/abr/1?lang=eng&id=p18', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-old-testament-2026/08?lang=eng' },
            { id: 'thursday', day: 'Thu', date: 'Feb 19', title: 'No Drama Zone üïäÔ∏è', text: 'We learn about a great leader named Melchizedek this week. He lived in a place where people were making terrible choices, but he was a "Prince of Peace." He helped his people repent and stop fighting. In a world full of social media drama and contention, you can be a peacemaker like Melchizedek. You have the power to lower the temperature in a room just by being calm and kind.', prompt: 'Challenge: Go the entire day without saying anything negative about anyone (even in your head!). If drama starts, be the peacemaker.', scriptureRef: 'JST Genesis 14:33', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/jst/jst-gen/14?lang=eng&id=p33', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-old-testament-2026/08?lang=eng' },
            { id: 'friday', day: 'Fri', date: 'Feb 20', title: 'Trusting God\'s Math üí∏', text: 'After a big battle, the King of Sodom tried to give Abraham a bunch of money and stuff. Abraham said NOPE. He told the king he wouldn\'t take even a "shoelatchet" (shoelace) because he didn\'t want the world to say they made him rich. He trusted God to provide for him. Tithing is kind of like that. It‚Äôs telling the world, "I trust God\'s promises more than I trust money." It‚Äôs a power move of faith.', prompt: 'Reflection: Read the story of Abraham refusing the king\'s money. Why is it cool that he gave credit to God instead of taking the easy cash?', scriptureRef: 'Genesis 14:22-23', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/ot/gen/14?lang=eng&id=p22-23', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-old-testament-2026/08?lang=eng' },
            { id: 'saturday', day: 'Sat', date: 'Feb 21', title: 'El Roi - The God Who Sees Me üëÄ', text: 'Have you ever felt invisible? Like nobody gets what you are going through? Hagar, Sarah\'s servant, felt that way when she ran away into the wilderness. She was all alone. But God sent an angel to help her. She gave God the name El Roi, which means "The God who sees me." He saw her in the middle of nowhere, and He sees you right now‚Äîin your bedroom, at school, wherever. You are never invisible to Him.', prompt: 'Challenge: Say a prayer tonight and talk to God like He is right there with you‚Äîbecause He is. Thank Him for seeing you.', scriptureRef: 'Genesis 16:13', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/ot/gen/16?lang=eng&id=p13', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-old-testament-2026/08?lang=eng' },
            { id: 'sunday', day: 'Sun', date: 'Feb 22', title: 'Sharing the Load üéí', text: 'Elder Bednar teaches that a covenant is like a yoke (a tool that helps two animals pull a heavy cart together). When we make covenants, we are yoked to Jesus Christ. Think about your heaviest backpack. Now imagine the Savior walking next to you, carrying the weight so it feels light. That‚Äôs what He does with our worries, fears, and mistakes. You don\'t have to carry it all by yourself!', prompt: 'Reflection: During the Sacrament today, visualize handing your heavy burdens over to the Savior. Let Him help you carry them this week.', scriptureRef: 'Matthew 11:28-30', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/nt/matt/11?lang=eng&id=p28-30', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-old-testament-2026/08?lang=eng' }
        ];

        const SONGS_DATA = [
            { id: 'monday', day: 'Mon', title: 'Defining Your Own Path üß≠', devotionalText: 'Abraham is known as the "father of the faithful," but he came from a home that was anything but faithful... Yet, Abraham decided he wanted something different... No matter our background or past environment, we have the agency to decide what kind of legacy we want to leave. We can choose to break old cycles and start new, righteous ones.', 
                hymnTitle: 'True to the Faith', hymnLink: 'https://www.youtube.com/watch?v=cAfK7s7FYlE', hymnAnalysis: 'The devotional highlights Abraham\'s decision to break from his father\'s idolatry and establish a new legacy of righteousness. The hymn "True to the Faith" serves as a martial anthem for this kind of spiritual determination. The chorus, "Soul, heart, and hand, faithful and true we will ever stand," mirrors Abraham\'s declaration in Abraham 1:2. Just as Abraham had to stand against the cultural pressure of Ur, we sing this hymn to fortify our resolve to defend truth, even when our immediate environment‚Äîor even our history‚Äîchallenges it.', 
                songTitle: 'Who You Say I Am', songArtist: 'Hillsong Worship', songLink: 'https://www.youtube.com/watch?v=lKw6uqtGFfo', songAnalysis: 'Abraham‚Äôs struggle was one of identity. He was the son of an idolater, but he desired to be a "Prince of Peace." This song powerfully addresses the transition from a worldly identity to a spiritual one. The lyrics "I am chosen, not forsaken... I am a child of God" resonate with Abraham‚Äôs realization that his true lineage and potential came from his Heavenly Father, not his earthly situation. It is a perfect anthem for anyone seeking to redefine their path based on God‚Äôs view of them rather than their past.' },
            { id: 'tuesday', day: 'Tue', title: 'Blessed to Be a Blessing ü§≤', devotionalText: 'God made a massive covenant with Abraham... But there was a "why" attached to it. God said, "Thou shalt be a blessing" (Genesis 12:2). Being a covenant people isn\'t just about the privileges we receive; it\'s about the responsibility we carry to bless "all the families of the earth."... We are blessed so we can be a blessing.', 
                hymnTitle: 'Because I Have Been Given Much', hymnLink: 'https://www.youtube.com/watch?v=GfT2eH1YgQY', hymnAnalysis: 'This hymn is the quintessential musical expression of Genesis 12:2. The lyric "I too must give" captures the "why" of the Abrahamic covenant mentioned in the devotional. The song moves the singer from a position of passive gratitude to active covenant responsibility. Just as Abraham was blessed to bless all families of the earth, this hymn reminds us that our abundance‚Äîwhether material or spiritual‚Äîis a stewardship entrusted to us for the benefit of those who "weary and sad... stand within [our] reach."', 
                songTitle: 'Do Something', songArtist: 'Matthew West', songLink: 'https://www.youtube.com/watch?v=b_RjndG0IX8', songAnalysis: 'The devotional challenge is to "be the blessing God promised someone else." Matthew West‚Äôs song "Do Something" tackles the frustration of looking at a broken world and asking God why He doesn\'t fix it, only to realize, "I created you." It aligns perfectly with the concept of the covenant partnership taught by Elder Renlund. We are the hands and feet of the covenant; we are the mechanism through which the "blessing of the families of the earth" is often delivered.' },
            { id: 'wednesday', day: 'Wed', title: 'Faith in the Gap üåå', devotionalText: 'God took Abraham outside and told him to count the stars... There was a massive gap between the promise and the reality. Yet, the scripture says Abraham "believed in the Lord; and he counted it to him for righteousness." Sometimes our greatest spiritual work is simply trusting God in the "gap"‚Äîwhen the blessings haven\'t arrived yet, but we hold on to the Promiser.', 
                hymnTitle: 'Lead, Kindly Light', hymnLink: 'https://www.youtube.com/watch?v=FhiXGUbuy6w', hymnAnalysis: 'Abraham had to walk by faith, not sight, staring at stars that represented children he didn\'t have yet. "Lead, Kindly Light" is the hymn of the "gap." The plea, "I do not ask to see the distant scene; one step enough for me," perfectly describes the patience required of Abraham and Sarah. It acknowledges the "encircling gloom" of our current lack or trial while affirming a trust that God will lead us on, even when the full promise is not yet visible.', 
                songTitle: 'Trust in You', songArtist: 'Lauren Daigle', songLink: 'https://www.youtube.com/watch?v=n_aVFVveJNs', songAnalysis: 'The devotional speaks of the gap between "promise and reality." Lauren Daigle‚Äôs "Trust in You" explores the painful moments when God doesn\'t move the mountains we asked Him to move, or when the "stars" don\'t align as we hoped they would right now. The chorus, "You are my strength and comfort... I will trust in You," is a modern echo of Genesis 15:6 ("And he believed in the Lord"). It validates the struggle of the wait while reaffirming the choice to believe.' },
            { id: 'thursday', day: 'Thu', title: 'The Prince of Peace üëë', devotionalText: 'We are introduced to the great high priest Melchizedek this week... He established peace in the land. He didn\'t just survive a wicked culture; he transformed it. He became known as the "Prince of Peace." In a contentious world, we hold the same priesthood power and covenant responsibility to be peacemakers in our homes and communities.', 
                hymnTitle: 'Let There Be Peace on Earth', hymnLink: 'https://www.youtube.com/watch?v=T-K87v__Zos', hymnAnalysis: 'Melchizedek established peace in a wicked land by starting with his own faith and influence. This hymn emphasizes the personal responsibility of peacemaking: "Let peace begin with me." It aligns with the "circuit breaker" challenge in the devotional. The lyrics remind us that peace is not just a lack of war, but an active creation‚Äî"With every step I take, let this be my solemn vow." It is the anthem of a modern-day City of Salem (Zion).', 
                songTitle: 'Make Me a Channel of Your Peace', songArtist: 'James Kilbane', songLink: 'https://www.youtube.com/watch?v=Hzz9FCh5ECM', songAnalysis: 'The devotional notes that Melchizedek transformed his culture rather than just surviving it. This song, based on the Prayer of St. Francis, details exactly how that transformation happens: "Where there is hatred, let me sow love; where there is injury, pardon." It is a prayer for the specific tools needed to be a "Prince of Peace" in a contentious environment. The gentle, pleading melody invites the Spirit to soften our hearts so we can soften the hearts of others.' },
            { id: 'friday', day: 'Fri', title: 'Who Makes You Rich? üí∞', devotionalText: 'After a military victory, the King of Sodom offered Abraham all the spoils of war. Abraham refused every penny... Abraham wanted there to be no confusion: his blessings came from God, not from the world. Tithing is our declaration of independence from the world and our dependence on the Lord.', 
                hymnTitle: 'We Give Thee But Thine Own', hymnLink: 'https://www.youtube.com/watch?v=jC4O8JPMEQ4', hymnAnalysis: 'This hymn encapsulates the theology of tithing and stewardship. When Abraham refused the King of Sodom\'s money, he was acknowledging that God was the "possessor of heaven and earth" (Genesis 14:19). The lyrics "We give thee but thine own, whate‚Äôer the gift may be; all that we have is thine alone" reflect Abraham\'s mindset. It shifts the perspective from "giving up my money" to returning a portion of what God has already provided, reinforcing the "dependence on the Lord" mentioned in the devotional.', 
                songTitle: 'Jireh', songArtist: 'Elevation Worship & Maverick City', songLink: 'https://www.youtube.com/watch?v=mC-zw0zCCtg', songAnalysis: 'Abraham rejected the King of Sodom\'s "instant riches" because he trusted in God as his provider. The title of this song, "Jireh," refers to Jehovah-Jireh, the name Abraham gives to the location where God provides the ram in the thicket (Genesis 22:14), meaning "The Lord Will Provide." The lyrics "You are enough... I will be content in every circumstance" perfectly capture Abraham\'s refusal to rely on Sodom\'s wealth. It teaches that when we have the Lord, we are already rich.' },
            { id: 'saturday', day: 'Sat', title: 'The God Who Sees Me üëÅÔ∏è', devotionalText: 'Hagar found herself in a desperate situation... But an angel found her by a fountain of water. After the encounter, she gave God a name: El Roi, which means "The God who sees me."... No matter how marginalized or lonely you may feel, you are never invisible to God.', 
                hymnTitle: 'Be Still, My Soul', hymnLink: 'https://www.youtube.com/watch?v=cHNT6G9ZKik', hymnAnalysis: 'For Hagar, alone in the wilderness, the fear must have been overwhelming. "Be Still, My Soul" is a hymn of profound comfort for the distressed. The line "Thy best, thy heavenly Friend through thorny ways leads to a joyful end" mirrors the angel\'s intervention in Hagar\'s life. The music itself‚ÄîSibelius‚Äôs Finlandia‚Äîevokes a sense of calm after a storm, helping the listener feel the peace of being "seen" and known by the Lord amidst their own wilderness.', 
                songTitle: 'Known', songArtist: 'Tauren Wells', songLink: 'https://www.youtube.com/watch?v=VeqUcLeAJ98', songAnalysis: 'The name El Roi implies deep, personal intimacy. Hagar wasn\'t just spotted; she was understood. Tauren Wells‚Äô song "Known" explores the paradox of the human heart: the desire to be seen but the fear that if we are truly seen, we won\'t be loved. The lyric "I\'m fully known and loved by You" is the ultimate message of Hagar\'s story. It reassures the listener that God‚Äôs gaze is not one of judgment, but of compassionate awareness.' },
            { id: 'sunday', day: 'Sun', title: 'Yoked to the Savior üêÇ', devotionalText: 'In this week\'s study, we learned about covenants. Elder David A. Bednar teaches that a covenant is like a yoke... When we make covenants, we are "yoking" ourselves to Jesus Christ. We aren\'t pulling the load of life alone anymore; we are pulling it with Him...', 
                hymnTitle: 'Come unto Jesus', hymnLink: 'https://www.youtube.com/watch?v=Yig4Q06m8B0', hymnAnalysis: 'This hymn is a gentle invitation to accept the "yoke" of Christ. The lyrics "ye heavy laden" directly address the theology of the yoke explained by Elder Bednar. It changes the imagery of religion from a weight we carry to a support system that carries us. Singing this before or after the Sacrament reinforces the idea that we are not just renewing a promise to work harder, but renewing our connection to the Source of strength.', 
                songTitle: 'Savior, Redeemer of My Soul', songArtist: 'Dallyn Bayles & Jenny Oaks Baker', songLink: 'https://www.youtube.com/watch?v=AGhxlPAHOg4&list=RDAGhxlPAHOg4&start_radio=1', songAnalysis: 'This piece is a masterpiece of covenant devotion. The lyrics "I\'ll follow Thee... whose mighty hand hath made me whole" speak to the submissive and trusting nature of being yoked to the Savior. The orchestration builds to a powerful climax, representing the "ample power" mentioned in the devotional that comes from binding ourselves to Christ. It is a perfect, reverent conclusion to the week, focusing entirely on the Savior as the center of our covenant life.' }
        ];

        const STUDY_GUIDE_DATA = [
            {
                title: "Background and Introduction",
                content: [
                    "The life of Abraham is a testament to the power of righteous desires. He is often called \"the father of the faithful\" and \"the Friend of God.\" However, it is important to remember that Abraham came from a troubled family environment. His father had abandoned the true worship of God and even attempted to have Abraham sacrificed to false gods. Despite this difficult beginning and lack of family support, Abraham desired to be \"a greater follower of righteousness.\" His life proves that regardless of our family history or past, our future can be filled with hope through Jesus Christ.",
                    <span>Full Lesson: <a href="https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-old-testament-2026/08?lang=eng" target="_blank" rel="noopener noreferrer" className="text-amber-600 hover:underline break-all">https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-old-testament-2026/08?lang=eng</a></span>
                ]
            },
            {
                title: "Section 1: God Will Bless Me for My Faith and Righteous Desires",
                discussionPoint: "We are all influenced by our environment and upbringing, but we have the agency to choose our own spiritual path. Elder Neil L. Andersen taught that there is a place inside us that we control, where we create our inner desires. Abraham demonstrates this perfectly. While his fathers had \"turned from their righteousness\" to worship idols, Abraham sought the blessings of the fathers and the priesthood.",
                quote: "Abraham 1:2: \"And, finding there was greater happiness and peace and rest for me, I sought for the blessings of the fathers... desiring also to be one who possessed great knowledge, and to be a greater follower of righteousness...\"",
                questions: [
                    {
                        q: "In verse 2, what specific things did Abraham desire?",
                        a: "[Abraham desired greater happiness, peace, rest, knowledge, and to be a greater follower of righteousness. He wanted to be a \"prince of peace.\"]"
                    },
                    {
                        q: "Elder Ronald M. Barcellos taught that the Lord \"looketh on the heart.\" How do our deep desires (or \"the heart\") influence our ability to receive spiritual blessings, even when our circumstances are difficult?",
                        a: "[Elder Barcellos taught that God does not look at outward appearance or stature, but at the heart. When our hearts are fully turned to Him, we can receive strength to overcome challenges. Abraham's heart was set on righteousness, which allowed God to rescue him and establish a covenant with him, despite his father's wickedness.]"
                    }
                ]
            },
            {
                title: "Section 2: God Wants Me to Make and Keep Covenants with Him",
                discussionPoint: "The covenant God made with Abraham was not just for him; it was for all of us. God promised Abraham a land of inheritance, a large posterity, and the priesthood. Importantly, God told Abraham that he would \"be a blessing\" to others. As Elder Dale G. Renlund explains, the \"covenant path\" is a series of covenants whereby we come to Christ. This relationship is one of trust. When we bind ourselves to the Savior through covenants, we gain access to His power‚Äîpower to go against the \"natural flow\" of the world.",
                quote: "Abraham 2:9‚Äì11: \"And I will make of thee a great nation... and thou shalt be a blessing unto thy seed after thee... for I give unto thee a promise that this right shall continue in thee, and in thy seed after thee... shall all the families of the earth be blessed...\"",
                questions: [
                    {
                        q: "Elder David A. Bednar taught that a covenant is a \"yoke\" that binds us to the Savior. How does seeing our covenants as a partnership or \"yoke\" with Christ change how we view our daily challenges?",
                        a: "[A yoke allows two to pull a load together. Elder Bednar explained that when we are yoked with the Savior, we are not alone; we have His strength to pull the load. We can do things we couldn't do by ourselves.]"
                    },
                    {
                        q: "According to verses 9 and 11, what is the responsibility of those who receive the gospel (Abraham's seed)?",
                        a: "[Our responsibility is to \"bear this ministry and Priesthood unto all nations\" and to ensure that \"all the families of the earth be blessed.\" Being a covenant people isn't just about receiving blessings; it is about being a blessing to others and sharing the message of salvation.]"
                    }
                ]
            },
            {
                title: "Section 3: Melchizedek Was a Man of Faith",
                discussionPoint: "Melchizedek was a great high priest and the king of Salem (Jerusalem). His name means \"King of Righteousness.\" The Joseph Smith Translation gives us much more insight into his character, noting that he was a man of such great faith that he \"wrought righteousness\" and established peace in his city.",
                quote: "Alma 13:17‚Äì18: \"Now this Melchizedek was a king over the land of Salem... But Melchizedek having exercised mighty faith... did preach repentance unto his people. And behold, they did repent; and Melchizedek did establish peace in the land...\"",
                questions: [
                    {
                        q: "What qualities did Melchizedek possess that helped his people turn from wickedness to peace?",
                        a: "[He exercised mighty faith, preached repentance, and was a \"prince of peace.\" He didn't give up on his people even though they had \"waxed strong in iniquity.\"]"
                    },
                    {
                        q: "How can we emulate Melchizedek in our own spheres of influence (home, work, or school) to establish peace?",
                        a: "[We can be peacemakers by speaking with kindness, standing for truth without being contentious, and using our priesthood or covenant authority to bless and serve others rather than judge them.]"
                    }
                ]
            },
            {
                title: "Section 4: Abraham Paid Tithing",
                discussionPoint: "After a military victory, Abraham met Melchizedek. Abraham gave him tithes of all he possessed. Later, the King of Sodom offered Abraham the goods recovered from the battle, but Abraham refused, saying he would not take even a \"thread nor a shoelatchet\" so that the King of Sodom could never say, \"I have made Abram rich.\" Abraham trusted God to provide for him, not worldly powers.",
                quote: "Genesis 14:22‚Äì23: \"And Abram said to the king of Sodom, I have lift up mine hand unto the Lord... That I will not take from a thread even to a shoelatchet... lest thou shouldest say, I have made Abram rich:\"",
                questions: [
                    {
                        q: "What does Abraham‚Äôs refusal of the King of Sodom‚Äôs money teach us about his trust in God?",
                        a: "[Abraham wanted his success to be attributed strictly to the Lord's blessing, not to the world. He prioritized his covenant obligation (tithing) over worldly gain.]"
                    },
                    {
                        q: "Sister Alyssa Bradford wrote that blessings from tithing are often \"significant but subtle.\" Instead of immediate money, what kind of blessings might we receive from paying tithing?",
                        a: "[Blessings might include increased patience, spiritual resilience, a greater capacity to act and change our own circumstances, or simply the peace of knowing we are obeying God's command. As Elder Bednar taught, we might ask for success, and God gives us physical and mental stamina.]"
                    }
                ]
            },
            {
                title: "Section 5: God Hears Me",
                discussionPoint: "Hagar, Sarah‚Äôs maidservant, found herself in a very difficult and painful situation. Feeling treated unfairly, she ran away into the wilderness. However, she was not alone. An angel of the Lord found her by a fountain of water. The name she was told to give her son, Ishmael, means \"God hears.\" This is a powerful reminder that God sees us in our distress.",
                quote: "Genesis 16:13: \"And she called the name of the Lord that spake unto her, Thou God seest me: for she said, Have I also here looked after him that seeth me?\"",
                questions: [
                    {
                        q: "President Jeffrey R. Holland recently testified that \"God hears every prayer we offer.\" Why is it important to know that God sees us even when we feel marginalized or alone, like Hagar?",
                        a: "[It gives us hope and validation. Knowing God sees us reminds us that we are His children and that our current trials are known to Him. It helps us return to our covenants, just as Hagar was counseled to return.]"
                    },
                    {
                        q: "Hagar called the Lord \"Thou God seest me.\" When have you felt that God truly \"saw\" you or heard you during a difficult time?",
                        a: "[(Participants to share personal experiences of answered prayers or feelings of comfort).]"
                    }
                ]
            },
            {
                title: "Lesson Summary",
                content: [
                    "This week we learned from Abraham that our righteous desires can overcome our background. We learned that covenants bind us to Christ, giving us power to go against the flow of the world. We saw Melchizedek‚Äôs example of establishing peace, Abraham‚Äôs integrity in tithing, and Hagar‚Äôs discovery that God sees and hears us in our extremities. As we strive to be \"greater followers of righteousness,\" the Lord will lead us by the hand."
                ]
            }
        ];

        // ==========================================
        // ICONS (Inline SVG Components)
        // ==========================================
        const IconSun = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="12" r="4"/><path d="M12 2v2"/><path d="M12 20v2"/><path d="m4.93 4.93 1.41 1.41"/><path d="m17.66 17.66 1.41 1.41"/><path d="M2 12h2"/><path d="M20 12h2"/><path d="m6.34 17.66-1.41 1.41"/><path d="m19.07 4.93-1.41 1.41"/></svg>;
        const IconUsers = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>;
        const IconMusic = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M9 18V5l12-2v13"/><circle cx="6" cy="18" r="3"/><circle cx="18" cy="16" r="3"/></svg>;
        const IconBookOpen = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></svg>;
        const IconShare = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="18" cy="5" r="3"/><circle cx="6" cy="12" r="3"/><circle cx="18" cy="19" r="3"/><line x1="8.59" x2="15.42" y1="13.51" y2="17.49"/><line x1="15.41" x2="8.59" y1="6.51" y2="10.49"/></svg>;
        const IconChevronDown = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="m6 9 6 6 6-6"/></svg>;
        const IconChevronRight = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="m9 18 6-6-6-6"/></svg>;
        const IconLink = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/></svg>;
        const IconPlayCircle = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="12" r="10"/><polygon points="10 8 16 12 10 16 10 8"/></svg>;
        const IconPrinter = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><polyline points="6 9 6 2 18 2 18 9"></polyline><path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"></path><rect x="6" y="14" width="12" height="8"></rect></svg>;


        // ==========================================
        // COMPONENTS
        // ==========================================

        // 1. Toast Notification Component
        const Toast = ({ message, show, onClose }) => {
            useEffect(() => {
                if (show) {
                    const timer = setTimeout(onClose, 3000);
                    return () => clearTimeout(timer);
                }
            }, [show, onClose]);

            if (!show) return null;

            return (
                <div className="fixed bottom-24 left-1/2 transform -translate-x-1/2 bg-stone-800 text-white px-6 py-3 rounded-full shadow-lg z-50 flex items-center gap-2 animate-bounce toast-notification">
                    <span className="text-green-400">&#10003;</span>
                    {message}
                </div>
            );
        };

        // 2. Interactive Toggle Answer Component
        const ToggleAnswer = ({ question, answer }) => {
            const [isOpen, setIsOpen] = useState(false);

            return (
                <div className="mb-6 border-l-4 border-amber-200 pl-4">
                    <button 
                        onClick={() => setIsOpen(!isOpen)}
                        className="text-left font-bold text-amber-900 w-full hover:text-amber-700 transition-colors flex items-start gap-2"
                    >
                        <span className="mt-1">{isOpen ? <IconChevronDown className="w-5 h-5" /> : <IconChevronRight className="w-5 h-5" />}</span>
                        <span>{question}</span>
                    </button>
                    
                    {isOpen && (
                        <div className="mt-3 p-4 bg-stone-100 rounded-lg text-stone-700 italic border border-stone-200 fade-in">
                            <span className="font-bold not-italic text-stone-500 text-xs uppercase tracking-wider block mb-1">Possible Answer</span>
                            <div className="whitespace-pre-line">{answer}</div>
                        </div>
                    )}
                </div>
            );
        };

        // 3. Main App Component
        const App = () => {
            const [activeTab, setActiveTab] = useState('devotional');
            const [activeDayId, setActiveDayId] = useState('');
            const [showToast, setShowToast] = useState(false);
            const [youthGroup, setYouthGroup] = useState('ym'); // 'ym' or 'yw'

            // Initialize Day based on current date
            useEffect(() => {
                const dayMap = ['sunday', 'monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday'];
                const todayIndex = new Date().getDay();
                setActiveDayId(dayMap[todayIndex]);
            }, []);

            const getActiveData = (dataArray) => {
                return dataArray.find(d => d.id === activeDayId) || dataArray[0];
            };

            const copyToClipboard = (dayData) => {
                const promptParts = dayData.prompt.split(':');
                const promptLabel = promptParts[0];
                const promptText = promptParts.slice(1).join(':').trim();
                const scriptureText = (dayData.scriptureRef && dayData.scriptureLink)
                    ? `Scripture: ${dayData.scriptureRef}\n${dayData.scriptureLink}\n\n`
                    : ""; 

                // Use dayData.date if available, otherwise fallback to empty string or generic
                const dateStr = dayData.date ? dayData.date : "";

                const textToCopy = `‚ú® Daily Devotional ‚ú®\n\n${dateStr}\n*${dayData.title}*\n\n${dayData.text}\n\n*${promptLabel}:* ${promptText}\n\n${scriptureText}Full Lesson:\n${dayData.lessonLink}`;

                // Modern clipboard API
                if (navigator.clipboard && navigator.clipboard.writeText) {
                      navigator.clipboard.writeText(textToCopy).then(() => {
                        setShowToast(true);
                    }).catch(err => {
                        fallbackCopy(textToCopy);
                    });
                } else {
                    fallbackCopy(textToCopy);
                }
            };

            const fallbackCopy = (text) => {
                 try {
                    const textArea = document.createElement("textarea");
                    textArea.value = text;
                    
                    // Avoid scrolling to bottom
                    textArea.style.top = "0";
                    textArea.style.left = "0";
                    textArea.style.position = "fixed";
        
                    document.body.appendChild(textArea);
                    textArea.focus();
                    textArea.select();
                    document.execCommand('copy');
                    document.body.removeChild(textArea);
                    setShowToast(true);
                 } catch (err) {
                     console.error("Fallback copy failed", err);
                 }
            };

            const renderDevotional = () => {
                const data = getActiveData(DEVOTIONAL_DATA);
                return (
                    <div className="space-y-6 fade-in max-w-2xl mx-auto">
                        <div className="bg-white p-6 rounded-2xl shadow-sm border border-stone-200">
                            <span className="text-amber-600 text-sm font-bold uppercase tracking-widest">{data.date}</span>
                            <h2 className="text-3xl font-serif font-bold text-stone-800 mt-2 mb-4">{data.title}</h2>
                            <p className="text-stone-600 leading-relaxed text-lg">{data.text}</p>
                            
                            <div className="mt-8 p-5 bg-amber-50 rounded-xl border border-amber-100">
                                <h3 className="font-bold text-amber-900 mb-2 flex items-center gap-2">
                                    <span className="w-2 h-2 bg-amber-500 rounded-full"></span>
                                    {data.prompt.split(':')[0]}
                                </h3>
                                <p className="text-stone-700 italic">{data.prompt.split(':').slice(1).join(':')}</p>
                            </div>

                            <div className="mt-6 grid grid-cols-1 sm:grid-cols-2 gap-3">
                                {data.scriptureLink && (
                                    <a href={data.scriptureLink} target="_blank" className="flex items-center justify-center gap-2 bg-amber-600 text-white py-3 rounded-lg font-medium hover:bg-amber-700 transition">
                                        <IconBookOpen className="w-4 h-4" /> Read Scripture: {data.scriptureRef}
                                    </a>
                                )}
                                <a href={data.lessonLink} target="_blank" className="flex items-center justify-center gap-2 bg-stone-200 text-stone-700 py-3 rounded-lg font-medium hover:bg-stone-300 transition">
                                    <IconLink className="w-4 h-4" /> Full Lesson
                                </a>
                            </div>

                            <button 
                                onClick={() => copyToClipboard(data)}
                                className="w-full mt-4 py-4 border-t border-stone-100 text-stone-500 hover:text-amber-600 font-medium flex items-center justify-center gap-2 transition-colors"
                            >
                                <IconShare className="w-4 h-4" /> Share Devotional
                            </button>
                        </div>
                    </div>
                );
            };

            const renderYouth = () => {
                const data = getActiveData(youthGroup === 'ym' ? YM_DATA : YW_DATA);
                return (
                    <div className="fade-in max-w-3xl mx-auto">
                        {/* Toggle Switch for YM/YW */}
                        <div className="flex justify-center mb-6 bg-stone-200 p-1 rounded-xl inline-flex w-full sm:w-auto mx-auto">
                            <button 
                                onClick={() => setYouthGroup('ym')}
                                className={`flex-1 sm:flex-none px-8 py-2 rounded-lg font-bold transition-all ${youthGroup === 'ym' ? 'bg-white shadow-sm text-amber-700' : 'text-stone-500 hover:text-stone-700'}`}
                            >
                                Young Men
                            </button>
                            <button 
                                onClick={() => setYouthGroup('yw')}
                                className={`flex-1 sm:flex-none px-8 py-2 rounded-lg font-bold transition-all ${youthGroup === 'yw' ? 'bg-white shadow-sm text-amber-700' : 'text-stone-500 hover:text-stone-700'}`}
                            >
                                Young Women
                            </button>
                        </div>

                        <div className="bg-white p-6 rounded-2xl shadow-sm border border-stone-200 relative overflow-hidden">
                            {/* Decorative Top Border */}
                            <div className={`absolute top-0 left-0 w-full h-2 ${youthGroup === 'ym' ? 'bg-blue-600' : 'bg-pink-500'}`}></div>

                            <h2 className="text-2xl font-serif font-bold text-stone-800 mt-4 mb-4">{data.title}</h2>
                            <p className="text-stone-600 leading-relaxed">{data.text}</p>
                            
                            <div className="mt-6 p-5 bg-stone-50 rounded-xl border border-stone-100">
                                <h3 className="font-bold text-stone-800 mb-2">{data.prompt.split(':')[0]}</h3>
                                <p className="text-stone-600">{data.prompt.split(':').slice(1).join(':')}</p>
                            </div>
                             <div className="mt-6 grid grid-cols-1 sm:grid-cols-2 gap-3">
                                {data.scriptureLink && (
                                    <a href={data.scriptureLink} target="_blank" className={`flex items-center justify-center gap-2 text-white py-3 rounded-lg font-medium transition ${youthGroup === 'ym' ? 'bg-blue-600 hover:bg-blue-700' : 'bg-pink-500 hover:bg-pink-600'}`}>
                                        <IconBookOpen className="w-4 h-4" /> Read Scripture: {data.scriptureRef}
                                    </a>
                                )}
                                <a href={data.lessonLink} target="_blank" className="flex items-center justify-center gap-2 bg-stone-200 text-stone-700 py-3 rounded-lg font-medium hover:bg-stone-300 transition">
                                    <IconLink className="w-4 h-4" /> Full Lesson
                                </a>
                            </div>
                             <button 
                                onClick={() => copyToClipboard(data)}
                                className="w-full mt-4 py-4 border-t border-stone-100 text-stone-500 hover:text-stone-800 font-medium flex items-center justify-center gap-2 transition-colors"
                            >
                                <IconShare className="w-4 h-4" /> Share Content
                            </button>
                        </div>
                    </div>
                );
            };

            const renderSongs = () => {
                const data = getActiveData(SONGS_DATA);
                return (
                    <div className="fade-in max-w-3xl mx-auto">
                         <div className="text-center bg-white p-6 rounded-2xl shadow-sm border border-stone-200 mb-6">
                            <div className="w-12 h-12 bg-amber-100 rounded-full flex items-center justify-center mx-auto mb-4">
                                <IconMusic className="w-6 h-6 text-amber-700" />
                            </div>
                            <h2 className="text-2xl font-serif font-bold text-stone-800">Songs of the Soul</h2>
                            <p className="mt-2 text-stone-500 text-sm">Music to invite the Spirit into your daily study.</p>
                        </div>

                        <div className="bg-white p-6 rounded-2xl shadow-sm border border-stone-200">
                            <h3 className="text-lg font-bold text-stone-400 uppercase tracking-wider mb-4">Daily Selection</h3>
                            <h2 className="text-xl font-bold text-stone-800 mb-2">{data.title}</h2>
                            <p className="text-stone-600 italic mb-8 text-sm border-l-2 border-amber-300 pl-4">{data.devotionalText}</p>
                            
                            <div className="space-y-8">
                                {/* Hymn Section */}
                                <div>
                                    <span className="text-xs font-bold text-amber-600 tracking-widest uppercase mb-2 block flex items-center gap-2">
                                        <IconMusic className="w-3 h-3" /> Hymn Selection
                                    </span>
                                    <div className="flex items-start justify-between gap-4">
                                        <h3 className="text-xl font-serif font-bold text-stone-800">{data.hymnTitle}</h3>
                                        <a href={data.hymnLink} target="_blank" rel="noopener noreferrer" className="text-amber-600 hover:text-amber-700 transition-colors" aria-label="Play Song">
                                            <IconPlayCircle className="w-8 h-8" />
                                        </a>
                                    </div>
                                    <p className="mt-2 text-stone-600 text-sm leading-relaxed">{data.hymnAnalysis}</p>
                                </div>

                                <hr className="border-stone-100" />

                                {/* Song Section */}
                                <div>
                                    <span className="text-xs font-bold text-sky-600 tracking-widest uppercase mb-2 block flex items-center gap-2">
                                        <IconMusic className="w-3 h-3" /> Contemporary Song
                                    </span>
                                    <div className="flex items-start justify-between gap-4">
                                        <div>
                                            <h3 className="text-xl font-serif font-bold text-stone-800">{data.songTitle}</h3>
                                            <p className="text-xs text-stone-400 mb-2">by {data.songArtist}</p>
                                        </div>
                                        <a href={data.songLink} target="_blank" rel="noopener noreferrer" className="text-sky-600 hover:text-sky-700 transition-colors" aria-label="Play Song">
                                            <IconPlayCircle className="w-8 h-8" />
                                        </a>
                                    </div>
                                    <p className="mt-2 text-stone-600 text-sm leading-relaxed">{data.songAnalysis}</p>
                                </div>
                            </div>
                        </div>
                    </div>
                );
            };

            const renderStudy = () => {
                return (
                    <div className="fade-in max-w-6xl mx-auto pb-12">
                         <div id="printable-study-section" className="bg-white p-8 rounded-2xl shadow-sm border border-stone-200 relative">
                            
                            <div className="flex justify-between items-start mb-2">
                                 <div className="w-full">
                                    <h1 className="text-3xl font-serif font-bold text-center text-amber-800">Discussion Guide</h1>
                                 </div>
                                 <button 
                                    onClick={() => window.print()} 
                                    className="no-print absolute top-6 right-6 text-stone-400 hover:text-stone-600 hover:bg-stone-100 p-2 rounded-full transition-all"
                                    aria-label="Print Discussion Guide"
                                    title="Print Discussion Guide"
                                >
                                    <IconPrinter className="w-6 h-6" />
                                </button>
                            </div>

                            <p className="text-center text-stone-500 mb-8 italic">"{WEEK_INFO.title}"</p>
                            
                            {/* --- ADDED IMAGE HERE --- */}
                            <div className="mb-8">
                                <img 
                                    src="Graphic.jpg" 
                                    alt="Infographic: Old Testament" 
                                    className="w-full h-auto rounded-lg shadow-md border border-stone-200"
                                    onError={(e) => {e.target.style.display = 'none'}} 
                                />
                            </div>
                            {/* ------------------------ */}
                            
                            {STUDY_GUIDE_DATA.map((section, idx) => (
                                <div key={idx} className="mb-10 last:mb-0">
                                    <h2 className="text-xl font-bold text-stone-800 mb-3 border-b border-amber-100 pb-2">{section.title}</h2>
                                    
                                    {section.content && section.content.map((p, i) => (
                                        <p key={i} className="text-stone-700 mb-3 leading-relaxed">{p}</p>
                                    ))}

                                    {section.discussionPoint && (
                                        <div className="mb-4">
                                            <h3 className="text-amber-700 font-semibold text-sm uppercase mb-1">Context</h3>
                                            <p className="text-stone-700">{section.discussionPoint}</p>
                                        </div>
                                    )}

                                    {section.quote && (
                                        <blockquote className="border-l-4 border-stone-300 pl-4 py-1 my-4 text-stone-600 italic bg-stone-50 p-3 rounded-r-lg">
                                            {section.quote}
                                        </blockquote>
                                    )}

                                    {section.question && (
                                        <ToggleAnswer question={section.question} answer={section.answer} />
                                    )}

                                    {section.questions && section.questions.map((qItem, qIdx) => (
                                        <ToggleAnswer key={qIdx} question={qItem.q} answer={qItem.a} />
                                    ))}
                                </div>
                            ))}
                        </div>
                    </div>
                );
            };

            // Dynamic Footer based on view
            const renderFooter = () => (
                <footer className="p-6 text-center text-stone-400 text-xs">
                    <p>{WEEK_INFO.valediction}</p>
                </footer>
            );

            return (
                <div className="flex flex-col h-full bg-stone-100">
                    {/* Header */}
                    <header className="bg-white border-b border-stone-200 pt-6 pb-2 px-4 shadow-sm z-10">
                        <div className="max-w-4xl mx-auto text-center">
                            <h1 className="text-xs font-bold tracking-[0.2em] text-stone-400 uppercase mb-1">Come, Follow Me</h1>
                            <h2 className="text-lg sm:text-xl font-serif font-bold text-stone-800 leading-tight">{WEEK_INFO.title}</h2>
                            <p className="text-stone-500 text-xs mt-1 mb-4">{WEEK_INFO.dateRange}</p>

                            {/* Main Nav Tabs */}
                            <div className="flex justify-center space-x-1 sm:space-x-4 mt-4 overflow-x-auto hide-scrollbar pb-2">
                                <button onClick={() => setActiveTab('devotional')} className={`flex flex-col sm:flex-row items-center gap-2 px-4 py-2 rounded-xl transition-all ${activeTab === 'devotional' ? 'bg-amber-50 text-amber-700 ring-1 ring-amber-200' : 'text-stone-400 hover:text-stone-600'}`}>
                                    <IconSun className="w-5 h-5" />
                                    <span className="text-xs sm:text-sm font-medium">Daily</span>
                                </button>
                                <button onClick={() => setActiveTab('youth')} className={`flex flex-col sm:flex-row items-center gap-2 px-4 py-2 rounded-xl transition-all ${activeTab === 'youth' ? 'bg-amber-50 text-amber-700 ring-1 ring-amber-200' : 'text-stone-400 hover:text-stone-600'}`}>
                                    <IconUsers className="w-5 h-5" />
                                    <span className="text-xs sm:text-sm font-medium">Youth</span>
                                </button>
                                <button onClick={() => setActiveTab('songs')} className={`flex flex-col sm:flex-row items-center gap-2 px-4 py-2 rounded-xl transition-all ${activeTab === 'songs' ? 'bg-amber-50 text-amber-700 ring-1 ring-amber-200' : 'text-stone-400 hover:text-stone-600'}`}>
                                    <IconMusic className="w-5 h-5" />
                                    <span className="text-xs sm:text-sm font-medium">Music</span>
                                </button>
                                <button onClick={() => setActiveTab('study')} className={`flex flex-col sm:flex-row items-center gap-2 px-4 py-2 rounded-xl transition-all ${activeTab === 'study' ? 'bg-amber-50 text-amber-700 ring-1 ring-amber-200' : 'text-stone-400 hover:text-stone-600'}`}>
                                    <IconBookOpen className="w-5 h-5" />
                                    <span className="text-xs sm:text-sm font-medium">Study</span>
                                </button>
                            </div>
                        </div>
                    </header>

                    {/* Secondary Day Navigation (Horizontal Scroll) - Only show for Daily, Youth, Songs */}
                    {activeTab !== 'study' && (
                        <div className="bg-white border-b border-stone-200 py-2 px-4 shadow-sm z-10">
                            <div className="max-w-4xl mx-auto">
                                <div className="flex space-x-3 overflow-x-auto hide-scrollbar pb-1 sm:justify-center">
                                    {DEVOTIONAL_DATA.map((d) => (
                                        <button
                                            key={d.id}
                                            onClick={() => setActiveDayId(d.id)}
                                            className={`flex-shrink-0 flex flex-col items-center justify-center w-12 h-14 rounded-lg transition-all border ${activeDayId === d.id ? 'bg-stone-800 text-white border-stone-800 shadow-md transform scale-105' : 'bg-white text-stone-500 border-stone-200 hover:border-stone-300'}`}
                                        >
                                            <span className="text-[10px] font-bold uppercase">{d.day}</span>
                                            <span className={`text-lg font-bold leading-none ${activeDayId === d.id ? 'text-amber-400' : 'text-stone-800'}`}>{d.date.split(' ')[1]}</span>
                                        </button>
                                    ))}
                                </div>
                            </div>
                        </div>
                    )}

                    {/* Content Area - Scrollable */}
                    <main className="flex-1 overflow-y-auto p-4 pb-20">
                        {activeTab === 'devotional' && renderDevotional()}
                        {activeTab === 'youth' && renderYouth()}
                        {activeTab === 'songs' && renderSongs()}
                        {activeTab === 'study' && renderStudy()}
                        {renderFooter()}
                    </main>

                    <Toast message="Copied to Clipboard!" show={showToast} onClose={() => setShowToast(false)} />
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
