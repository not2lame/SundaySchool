<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Come, Follow Me Companion</title>
    
    <!-- Tailwind CSS (Styling) -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Fonts: Inter (Body) and Merriweather (Headings) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Merriweather:ital,wght@0,300;0,400;0,700;1,400&display=swap" rel="stylesheet">
    
    <!-- React & ReactDOM (Switched to Cloudflare CDN for better firewall access) -->
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    
    <!-- Babel (to compile JSX in browser) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>

    <!-- Tailwind Configuration -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        serif: ['Merriweather', 'serif'],
                    },
                    colors: {
                        stone: { 50: '#fafaf9', 100: '#f5f5f4', 200: '#e7e5e4', 300: '#d6d3d1', 400: '#a8a29e', 500: '#78716c', 600: '#57534e', 700: '#44403c', 800: '#292524', 900: '#1c1917' },
                        amber: { 50: '#fffbeb', 100: '#fef3c7', 200: '#fde68a', 300: '#fcd34d', 400: '#fbbf24', 500: '#f59e0b', 600: '#d97706', 700: '#b45309', 800: '#92400e', 900: '#78350f' }
                    }
                }
            }
        }
    </script>

    <style>
        .hide-scrollbar::-webkit-scrollbar { display: none; }
        .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        .fade-in { animation: fadeIn 0.5s ease-in; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* Print Styles */
        @media print {
            body * {
                visibility: hidden;
            }
            #printable-study-section, #printable-study-section * {
                visibility: visible;
            }
            #printable-study-section {
                position: absolute;
                left: 0;
                top: 0;
                width: 100%;
                margin: 0;
                padding: 0;
                border: none;
                box-shadow: none;
            }
            .no-print {
                display: none !important;
            }
        }
    </style>
</head>
<body class="bg-stone-100 text-stone-800 h-screen flex flex-col overflow-hidden">

    <!-- Loading Fallback -->
    <div id="root" class="h-full flex flex-col">
        <div class="flex items-center justify-center h-full bg-stone-100 text-stone-500 p-4 text-center">
            <div>
                <h2 class="text-xl font-bold mb-2">Loading App...</h2>
                <p class="text-sm">If this takes longer than a few seconds, your network may be blocking the script libraries (React).</p>
            </div>
        </div>
    </div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // ==========================================
        // DATA CONSTANTS
        // ==========================================

        const WEEK_INFO = {
            title: "The Family Is Central to the Creator‚Äôs Plan",
            dateRange: "December 15 - December 21, 2025",
            valediction: "As we strive to build righteous families and gather our ancestors, we prepare for the day when we can inherit 'eternal life and a fulness of joy' all through our Lord and Savior Jesus Christ."
        };

        const DEVOTIONAL_DATA = [
            { id: 'monday', day: 'Mon', fullDay: 'Monday', date: 'Dec 15', title: 'Words from God üìú', text: 'In a world that is often confused about the definition and purpose of the family, we have been given a clear anchor. Elder Ronald A. Rasband reminds us that the Proclamation to the World has a divine origin and we "must treat it with the reverence deserving words from God." It wasn‚Äôt just a policy statement; it was a warning and a forewarning of things to come. Knowing that our view of the family comes from revelation allows us to stand firm, even when societal winds blow in the opposite direction.', prompt: 'Reflection: Read the first paragraph of the Proclamation today. How does feeling the "divine origin" of these words change how you prioritize your family relationships this week?', scriptureRef: 'D&C 1:38', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/dc-testament/dc/1?lang=eng#p38', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-doctrine-and-covenants-2025/51-family-a-proclamation-to-the-world?lang=eng' },
            { id: 'tuesday', day: 'Tue', fullDay: 'Tuesday', date: 'Dec 16', title: 'Exaltation is a Family Matter üîó', text: 'President Dallin H. Oaks taught a profound truth: "Salvation is an individual matter; [but] exaltation is a family matter." The family isn\'t just a cultural tradition; it is the order of heaven. We are all beloved spirit sons and daughters of heavenly parents, and our destiny is to become like them. While the world may view marriage and family as temporary social contracts, we view them as the laboratory for eternity‚Äîthe place where we prepare for the "same sociality which exists among us here" to be coupled with eternal glory.', prompt: 'Challenge: Identify one specific attribute of God (patience, mercy, creation, etc.) that you can practice within your family dynamic today.', scriptureRef: 'D&C 130:2', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/dc-testament/dc/130?lang=eng#p2', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-doctrine-and-covenants-2025/51-family-a-proclamation-to-the-world?lang=eng' },
            { id: 'wednesday', day: 'Wed', fullDay: 'Wednesday', date: 'Dec 17', title: 'The Foundation of Happiness üè†', text: 'The Proclamation states that "happiness in family life is most likely to be achieved when founded upon the teachings of the Lord Jesus Christ." Elder Ulisses Soares shared a beautiful tradition of keeping Nativity scenes up in his home to remind his family that Christ is central to their happiness. No matter the composition of our family, when the Savior is the foundation, we can weather storms. As President D. Todd Christofferson noted, we don\'t need to be picture-perfect immediately; through the Savior\'s grace, we get better "little by little."', prompt: 'Reflection: Is there a "teaching of Jesus Christ" (forgiveness, service, prayer) that has slipped in your home recently? Discuss with your spouse or a family member how to bring it back into focus.', scriptureRef: 'Mosiah 4:15', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/bofm/mosiah/4?lang=eng#p15', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-doctrine-and-covenants-2025/51-family-a-proclamation-to-the-world?lang=eng' },
            { id: 'thursday', day: 'Thu', fullDay: 'Thursday', date: 'Dec 18', title: 'Equal Partners ‚öñÔ∏è', text: 'The Lord‚Äôs pattern for marriage is one of equality. The Proclamation teaches that fathers and mothers are to help one another as "equal partners." Elder Rasband shared a personal story where he made a major decision without consulting his wife. Her firm but loving correction‚Äî"Ron, please, never do that to me again"‚Äîhelped them shape an equally yoked marriage. To preside does not mean to dominate; it means to love, serve, and lead together in righteousness.', prompt: 'Challenge: If you are married, consult your spouse on a decision you are currently weighing. If you are single, reach out to a parent or sibling to seek their counsel and validate their perspective.', scriptureRef: '1 Corinthians 11:11', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/nt/1-cor/11?lang=eng#p11', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-doctrine-and-covenants-2025/51-family-a-proclamation-to-the-world?lang=eng' },
            { id: 'friday', day: 'Fri', fullDay: 'Friday', date: 'Dec 19', title: 'Hope for Every Situation üïäÔ∏è', text: 'Not everyone‚Äôs life currently matches the ideal described in the Proclamation. President Christofferson speaks with great empathy to those who are single, divorced, or unable to have children, reminding us that "no one is predestined to receive less than all that the Father has for His children." The Atonement of Jesus Christ anticipates and compensates for all deprivation and loss for those who turn to Him. Your faithfulness today is building an eternal inheritance, regardless of your current marital or family status.', prompt: 'Reflection: Think of someone in your ward or circle of friends whose family situation is difficult. Send them a text today simply letting them know you admire their faith and resilience.', scriptureRef: 'Psalms 37:4-5', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/ot/ps/37?lang=eng#p4', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-doctrine-and-covenants-2025/51-family-a-proclamation-to-the-world?lang=eng' },
            { id: 'saturday', day: 'Sat', fullDay: 'Saturday', date: 'Dec 20', title: 'Defenders of the Home üõ°Ô∏è', text: 'Sister Bonnie L. Oscarson urged us to be "defenders of the Family Proclamation." She shared the story of young Marie Madeline Cardon, who boldly defended missionaries against a mob. While we may not face physical mobs, we face a world that trivializes the sanctity of the home. We can be defenders by making our own homes‚Äîwhether we live alone or with a large family‚Äîplaces of refuge, order, and holiness, second only to the temple.', prompt: 'Challenge: "Sanctify" your living space today. This might mean cleaning up a cluttered room, turning off distracting media, or dedicating a few minutes to quiet prayer in your home.', scriptureRef: 'D&C 88:119', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/dc-testament/dc/88?lang=eng#p119', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-doctrine-and-covenants-2025/51-family-a-proclamation-to-the-world?lang=eng' },
            { id: 'sunday', day: 'Sun', fullDay: 'Sunday', date: 'Dec 21', title: 'Gathering the Family of God üå≥', text: 'President Henry B. Eyring reminds us that God wants His children home again, "in families and in glory." This is the spirit of Elijah‚Äîturning the hearts of the fathers to the children and the children to the fathers. Whether it is through temple work, family history, or simply strengthening relationships with living relatives, we are all called to be "gatherers." By engaging in this work, we help heal our family lines and prepare for the eternal family of God.', prompt: 'Reflection: Take 10 minutes this Sunday to look at a family photo, read a journal entry from an ancestor, or visit FamilySearch.org to find a name for the temple.', scriptureRef: 'Malachi 4:6', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/ot/mal/4?lang=eng#p6', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-doctrine-and-covenants-2025/51-family-a-proclamation-to-the-world?lang=eng' }
        ];

        const YM_DATA = [
             { id: 'monday', day: 'Mon', date: 'Dec 15', title: 'The Playbook üìñ', text: 'In sports or video games, you can\'t win if you don\'t know the rules or the objective. The same is true for life. Elder Ronald A. Rasband teaches that "The Family: A Proclamation to the World" isn\'t just a nice document; it has a "divine origin" and contains "revelatory words" from God. It‚Äôs the playbook for becoming a successful husband and father. When the world tries to confuse you about gender or family, this Proclamation is your solid ground. Own it. As Elder Rasband was told, "Feel it and teach it like you own it."', prompt: 'Challenge: Read the first paragraph of the Proclamation. Highlight the phrase "ordained of God." Keep it in mind if you hear conflicting messages at school or online this week.', scriptureRef: 'D&C 1:38', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/dc-testament/dc/1?lang=eng#p38', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-doctrine-and-covenants-2025/51-family-a-proclamation-to-the-world?lang=eng' },
            { id: 'tuesday', day: 'Tue', date: 'Dec 16', title: 'Real Strength üí™', text: 'Society often confuses "manhood" with dominance or toughness. But the Lord‚Äôs standard for men is different. The Proclamation states that fathers are to "preside over their families in love and righteousness." This doesn\'t mean bossing people around. As Elder Rasband learned from his wife, being a leader means listening and respecting others. Real Priesthood power is found in "persuasion, by long-suffering, by gentleness and meekness."', prompt: 'Reflection: Think of a Priesthood leader or father figure you admire. What makes them strong? Is it their muscles, or their kindness?', scriptureRef: 'D&C 121:41-42', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/dc-testament/dc/121?lang=eng#p41', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-doctrine-and-covenants-2025/51-family-a-proclamation-to-the-world?lang=eng' },
            { id: 'wednesday', day: 'Wed', date: 'Dec 17', title: 'Holding the Line üõ°Ô∏è', text: 'Sister Bonnie L. Oscarson tells the story of Marie Madeline Cardon, a teenager like many of you, who faced down an angry mob to protect missionaries in Italy. She stood "fearless" with her Bible in hand. Today, you probably won\'t face a physical mob, but you will face pressure to lower your standards. You are called to be a "defender" of the family. It takes guts to stand up for marriage and the home when it\'s not popular, but the Lord needs "brave, steadfast, and immovable warriors."', prompt: 'Challenge: If a conversation comes up this week that disrespects family or marriage, have the courage to not participate or to change the subject.', scriptureRef: '1 Nephi 8:33', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/bofm/1-ne/8?lang=eng#p33', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-doctrine-and-covenants-2025/51-family-a-proclamation-to-the-world?lang=eng' },
            { id: 'thursday', day: 'Thu', date: 'Dec 18', title: 'Work Hard, Play Hard üéÆ', text: 'The Proclamation lists "work" and "wholesome recreational activities" as key principles for successful families. It‚Äôs a balance. You contribute to the spirit of your home by doing your chores without complaining (that‚Äôs the work part) and by bringing positive energy to family time (that‚Äôs the recreation part). Don‚Äôt be the guy who just sits in his room with headphones on. Engage with your family.', prompt: 'Reflection: Do one thing today to make your home better‚Äîtake out the trash without being asked, or suggest a game to play with a younger sibling.', scriptureRef: 'D&C 88:124', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/dc-testament/dc/88?lang=eng#p124', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-doctrine-and-covenants-2025/51-family-a-proclamation-to-the-world?lang=eng' },
            { id: 'friday', day: 'Fri', date: 'Dec 19', title: 'Special Ops: Gathering Israel üîé', text: 'President Henry B. Eyring talks about a computer salesman who was confused why Church members were "running around... searching through little cards." It was the Spirit of Elijah moving them to do family history! You are the generation that has the technology to do this faster than ever. When you do baptisms for the dead or find a name, you are gathering God‚Äôs family. It‚Äôs spiritual rescue work, and it prepares you for your mission.', prompt: 'Challenge: Log into FamilySearch.org or the Family Tree app for just 5 minutes today. See if you can find a photo of an ancestor or a name that needs temple ordinances.', scriptureRef: 'D&C 2:2-3', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/dc-testament/dc/2?lang=eng#p2', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-doctrine-and-covenants-2025/51-family-a-proclamation-to-the-world?lang=eng' },
            { id: 'saturday', day: 'Sat', date: 'Dec 20', title: 'Equal Partners ü§ù', text: 'The Proclamation teaches that fathers and mothers are "equal partners." How you treat your mom and sisters now is practice for how you will treat your wife someday. Elder Rasband shared a mistake he made early in his marriage by making a big decision without his wife. She told him, "Ron, please, never do that to me again." He learned that they had to work together. Respect the women in your life. Listen to them. Learn from them.', prompt: 'Reflection: Ask your mother or a female leader for advice on a goal you are working on. Listen carefully to her perspective.', scriptureRef: '1 Corinthians 11:11', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/nt/1-cor/11?lang=eng#p11', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-doctrine-and-covenants-2025/51-family-a-proclamation-to-the-world?lang=eng' },
            { id: 'sunday', day: 'Sun', date: 'Dec 21', title: 'The Foundation üß±', text: 'Elder Ulisses Soares reminds us that the whole plan of happiness fails without Jesus Christ. He is the "rock" we must build on. Even if your current family situation is tough or "less than ideal," as President Christofferson says, the Savior can heal it. He makes weak things strong. If you build your life on His teachings‚Äîfaith, prayer, repentance‚Äîyou will be unshakeable, no matter what storms hit your life.', prompt: 'Challenge: As you take the Sacrament today, commit to one specific change this week that will bring you closer to Christ (like better language, more honest prayers, or scripture study).', scriptureRef: 'Helaman 5:12', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/bofm/hel/5?lang=eng#p12', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-doctrine-and-covenants-2025/51-family-a-proclamation-to-the-world?lang=eng' }
        ];

        const YW_DATA = [
            { id: 'monday', day: 'Mon', date: 'Dec 15', title: 'Royal Identity üëë', text: 'The world tries to tell you who you are‚Äîbased on your grades, your likes, or your looks‚Äîbut the Proclamation sets the record straight. It declares that you are a "beloved spirit daughter of heavenly parents" with a "divine nature and destiny". This isn\'t just a nice saying; it\'s your eternal DNA. Knowing this changes everything. It means you have a home in heaven and a purpose on earth that no one else can fulfill. You are royalty!', prompt: 'Reflection: Look in the mirror today and say out loud, "I am a beloved daughter of Heavenly Parents." How does that truth change how you handle stress today?', scriptureRef: 'Romans 8:16', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/nt/rom/8?lang=eng#p16', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-doctrine-and-covenants-2025/51-family-a-proclamation-to-the-world?lang=eng' },
            { id: 'tuesday', day: 'Tue', date: 'Dec 16', title: 'Fearless Defender ü¶Å', text: 'Sister Bonnie L. Oscarson shared the incredible story of Marie Madeline Cardon, a teenage girl in Italy who faced down an angry mob to protect the missionaries. She stood between the men and the house, raising her Bible, and commanded them to leave. She said, "God was with me... That strong ferocious body of men stood helpless before a weak, trembling, yet fearless girl". You are called to be a defender of the family today. It might not be a mob, but it might be a conversation at school or a post online. You have the same power Marie had to stand for truth.', prompt: 'Challenge: If you hear someone mocking marriage or family values this week, be the "fearless girl" who doesn\'t laugh along or who gently shares a different perspective.', scriptureRef: '1 Timothy 4:12', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/nt/1-tim/4?lang=eng#p12', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-doctrine-and-covenants-2025/51-family-a-proclamation-to-the-world?lang=eng' },
            { id: 'wednesday', day: 'Wed', date: 'Dec 17', title: 'The Ultimate Career üíº', text: 'Sister Oscarson‚Äôs daughter, Abby, signed up for Career Day at her kids\' school to talk about... Motherhood! She taught the students that being a mom requires being an expert in "medicine, psychology, religion, teaching, music, literature... and so much more". The world might try to say that motherhood is a "secondary job" or an "inconvenience," but we know it is the highest, holiest role. Whether you are a mother someday or an aunt, leader, or friend now, you nurture others in a way that shapes eternity.', prompt: 'Reflection: Text your mom or a mother figure today and thank her for one specific "skill" she uses to bless your life (like her "chef" skills or "therapist" listening skills).', scriptureRef: 'Proverbs 31:25-26', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/ot/prov/31?lang=eng#p25', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-doctrine-and-covenants-2025/51-family-a-proclamation-to-the-world?lang=eng' },
            { id: 'thursday', day: 'Thu', date: 'Dec 18', title: 'Homemaker Power ‚ú®', text: 'Sometimes the word "homemaker" sounds old-fashioned, but Sister Oscarson challenges us to elevate it. She says we should "make our homes" places of "order, refuge, holiness, and safety". You don\'t have to own a house to be a homemaker. You can make your bedroom, your locker, or your presence a holy place where the Spirit can dwell. You have the power to create an atmosphere of peace wherever you go.', prompt: 'Challenge: "Make" your home a better place today by cleaning up one area that is messy or by playing uplifting music that invites the Spirit.', scriptureRef: 'D&C 88:119', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/dc-testament/dc/88?lang=eng#p119', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-doctrine-and-covenants-2025/51-family-a-proclamation-to-the-world?lang=eng' },
            { id: 'friday', day: 'Fri', date: 'Dec 19', title: 'It\'s Okay to Be Real üíñ', text: 'Sometimes looking at the "ideal" family in the Proclamation can make us feel like we don\'t measure up. President Christofferson joked that when we hear about perfect families, we all think, "My family is hopeless!". But he promised that God doesn\'t demand perfection instantly. He asks for progress. If your family situation is tough, or you feel inadequate, turn to Jesus Christ. He is the "strength of parents" and of youth. He makes weak things strong.', prompt: 'Reflection: Don\'t stress about being perfect. Just focus on being better "little by little" through the Savior\'s grace.', scriptureRef: 'Ether 12:27', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/bofm/ether/12?lang=eng#p27', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-doctrine-and-covenants-2025/51-family-a-proclamation-to-the-world?lang=eng' },
            { id: 'saturday', day: 'Sat', date: 'Dec 20', title: 'The Tennis Shoe Generation üëü', text: 'President Eyring told a funny story about a man who saw ladies "running around between filing cabinets" in tennis shoes doing genealogy, and he realized that\'s why computers were invented!. Now, you are the experts with the technology. You can do family history work on your phone in minutes. You are the "gatherers" the Lord has been waiting for. When you find a name for the temple, you are connecting your family forever.', prompt: 'Challenge: Download the Family Tree app if you haven\'t, and try the "Ordinances Ready" feature to see if there is a name you can take to the temple next time you go.', scriptureRef: 'D&C 128:24', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/dc-testament/dc/128?lang=eng#p24', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-doctrine-and-covenants-2025/51-family-a-proclamation-to-the-world?lang=eng' },
            { id: 'sunday', day: 'Sun', date: 'Dec 21', title: 'The Center of It All üåü', text: 'Elder Soares has a cool tradition of keeping his Nativity sets up all year round to remind his family that Christ is the center of their home. The Proclamation teaches that happiness is "most likely to be achieved when founded upon the teachings of the Lord Jesus Christ". No matter what your future holds‚Äîmarriage, career, trials, or triumphs‚Äîif you build your foundation on Jesus Christ, you will have joy. He is the secret to a happy "forever family."', prompt: 'Reflection: As you prepare for Christmas next week, think of one way you can keep Christ at the "center" of your celebrations, rather than just the gifts or parties.', scriptureRef: 'Helaman 5:12', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/bofm/hel/5?lang=eng#p12', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-doctrine-and-covenants-2025/51-family-a-proclamation-to-the-world?lang=eng' }
        ];

        const SONGS_DATA = [
            { id: 'monday', day: 'Mon', title: 'Words from God üìú', devotionalText: 'In a world that is often confused about the definition and purpose of the family, we have been given a clear anchor. Elder Ronald A. Rasband reminds us that the Proclamation to the World has a divine origin and we "must treat it with the reverence deserving words from God."', 
                hymnTitle: 'We Thank Thee, O God, for a Prophet', hymnLink: 'https://www.youtube.com/watch?v=OSOpwwIXz38', hymnAnalysis: 'This rousing hymn is an anthem of gratitude for modern revelation, which is the core theme of today\'s devotional. The devotional emphasizes that the Proclamation is not merely policy but "words from God" delivered through His prophets. The hymn\'s lyrics, "We thank thee, O God, for a prophet to guide us in these latter days," directly acknowledge the source of the Proclamation. Singing this reminds us that the counsel to prioritize family is not a cultural suggestion but a divine commandment.', 
                songTitle: 'The Family is of God', songArtist: 'Children\'s Songbook', songLink: 'https://www.youtube.com/watch?v=ix45QsvBQF8', songAnalysis: 'While simple enough for children, the lyrics of this song are a profound recitation of the very truths found in the Proclamation. It serves as a musical version of the document itself, stating clearly that "God gave us families to help us become what He wants us to be." Listening to this song reinforces the "divine origin" mentioned in the devotional. It breaks down the high theology of the Proclamation into pure, actionable statements of truth, helping us feel the "reverence deserving words from God" in a personal and tender way.' },
            { id: 'tuesday', day: 'Tue', title: 'Exaltation is a Family Matter üîó', devotionalText: 'President Dallin H. Oaks taught a profound truth: "Salvation is an individual matter; [but] exaltation is a family matter." The family isn\'t just a cultural tradition; it is the order of heaven. We are all beloved spirit sons and daughters of heavenly parents, and our destiny is to become like them.', 
                hymnTitle: 'I Am a Child of God', hymnLink: 'https://www.youtube.com/watch?v=xglz6kryORQ', hymnAnalysis: 'This hymn touches on the foundational doctrine mentioned in the devotional: "We are all beloved spirit sons and daughters of heavenly parents". While often sung by children, the Tabernacle Choir\'s arrangement elevates it to a plea for exaltation. The line "Lead me, guide me, walk beside me, help me find the way" speaks to the journey of becoming like our Heavenly Parents. It reminds us that our family relationships on earth are the training ground‚Äîthe "laboratory for eternity"‚Äîwhere we learn to live as God lives, preparing to return to His presence.', 
                songTitle: 'I Am a Child of God', songArtist: 'One Voice Children\'s Choir', songLink: 'https://www.youtube.com/watch?v=xKsdcTN6LQo', songAnalysis: 'This contemporary arrangement by the One Voice Children\'s Choir brings a powerful visual and auditory witness to the devotional\'s core truth: "We are all beloved spirit sons and daughters of heavenly parents". While the hymn version is reverent, this rendition by children emphasizes the innocence and potential inherent in every family member. It reminds us that the "laboratory for eternity" is built on the simple, profound truth of our divine heritage, encouraging us to treat our family members with the reverence due to a child of God.' },
            { id: 'wednesday', day: 'Wed', title: 'The Foundation of Happiness üè†', devotionalText: 'The Proclamation states that "happiness in family life is most likely to be achieved when founded upon the teachings of the Lord Jesus Christ." Elder Ulisses Soares shared a beautiful tradition of keeping Nativity scenes up in his home to remind his family that Christ is central to their happiness.', 
                hymnTitle: 'I Need Thee Every Hour', hymnLink: 'https://www.youtube.com/watch?v=ipN1qWXxLK0', hymnAnalysis: 'The devotional states that happiness is found when we are "founded upon the teachings of the Lord Jesus Christ" and that we get better "little by little" through His grace. This hymn is a humble acknowledgment of that dependence. The lyrics "I need thee every hour, in joy or pain" perfectly mirror the devotional\'s message about weathering storms and finding Christ as the center of our home life. It is a prayer for the Savior\'s constant presence to maintain the foundation of happiness.', 
                songTitle: 'Thy Will', songArtist: 'Hillary Scott', songLink: 'https://www.youtube.com/watch?v=wPlG6hjl2es', songAnalysis: 'This powerful song speaks to the reality that building a foundation on Christ often requires submitting to His will, even when life is hard. The devotional states that "happiness in family life is most likely to be achieved when founded upon the teachings of the Lord," and this song illustrates the trust required to maintain that foundation during storms. The lyrics "I know you hear me, I know you see me" resonate with the personal relationship we must have with Christ to bring His spirit into our homes. It is a song of surrender that invites the Savior\'s power into our family dynamic.' },
            { id: 'thursday', day: 'Thu', title: 'Equal Partners ‚öñÔ∏è', devotionalText: 'The Lord‚Äôs pattern for marriage is one of equality. The Proclamation teaches that fathers and mothers are to help one another as "equal partners." To preside does not mean to dominate; it means to love, serve, and lead together in righteousness.', 
                hymnTitle: 'More Holiness Give Me', hymnLink: 'https://www.youtube.com/watch?v=n51QQTvKzKc', hymnAnalysis: 'While not explicitly about marriage, this hymn is a masterclass in the attributes required to be an "equal partner". The devotional defines presiding as loving, serving, and leading in righteousness. The lyrics "More used would I be, More Savior-like," "More freedom from earth-stains," and "More strength to o\'ercome" are the exact spiritual qualities that eliminate unrighteous dominion and pride. Singing this is a prayer to become the kind of person who can truly partner with another in humility and love, fostering the equality the Lord requires.', 
                songTitle: 'Love Is Not a Fight', songArtist: 'Warren Barfield', songLink: 'https://www.youtube.com/watch?v=rwK73QbNPKo', songAnalysis: 'This song tackles the gritty reality of partnership. It aligns perfectly with the devotional\'s message about working through decisions and corrections together. The lyric "Love is not a place to come and go as we please, it\'s a house we enter in and then we lock the keys" speaks to the commitment of being equally yoked. It rejects the idea of domination ("Love is not a fight") and embraces the idea of mutual sacrifice and "shelter." It illustrates that true partnership is about fighting for each other, not against each other.' },
            { id: 'friday', day: 'Fri', title: 'Hope for Every Situation üïäÔ∏è', devotionalText: 'Not everyone‚Äôs life currently matches the ideal described in the Proclamation. President Christofferson speaks with great empathy to those who are single, divorced, or unable to have children, reminding us that "no one is predestined to receive less than all that the Father has for His children."', 
                hymnTitle: 'Master, the Tempest Is Raging', hymnLink: 'https://www.youtube.com/watch?v=Ef2xgL45qX4', hymnAnalysis: 'For a day focused on "Hope for Every Situation" and those whose lives do not match the ideal, this hymn offers a powerful narrative of Christ calming the storm. The devotional reminds us that the Atonement "anticipates and compensates for all deprivation". The dramatic shift in the hymn from the "torrents of sin and of anguish" to the Savior\'s command "Peace, be still" provides a visceral musical experience of the peace Christ brings to those feeling overwhelmed, marginalized, or "perishing" in their current family circumstances.', 
                songTitle: 'Blessings', songArtist: 'Laura Story', songLink: 'https://www.youtube.com/watch?v=0xRNrnh__SE', songAnalysis: 'Laura Story\'s "Blessings" is a profound meditation on finding God in the midst of unfulfilled expectations. The devotional reminds us that "faithfulness today is building an eternal inheritance," and this song asks the difficult question: "What if trials of this life... are your mercies in disguise?". It connects deeply with the theme of "Hope for Every Situation" by shifting our perspective from what we lack to how God is refining us. It validates the pain of the "raindrops" and "tears" while pointing us toward the Savior who is with us through it all.' },
            { id: 'saturday', day: 'Sat', title: 'Defenders of the Home üõ°Ô∏è', devotionalText: 'Sister Bonnie L. Oscarson urged us to be "defenders of the Family Proclamation." She shared the story of young Marie Madeline Cardon, who boldly defended missionaries against a mob. While we may not face physical mobs, we face a world that trivializes the sanctity of the home.', 
                hymnTitle: 'Love at Home', hymnLink: 'https://www.youtube.com/watch?v=tn5UeEFw4QQ', hymnAnalysis: 'To be a "defender of the home" and sanctify our living space, we must fill it with the Spirit of the Lord. This hymn serves as a simple yet profound instruction manual for that defense. The devotional asks us to make our homes places of "refuge, order, and holiness". The lyrics "There is beauty all around when there\'s love at home" remind us that the strongest defense against a world that trivializes the family is the active presence of kindness and peace within our walls. It is the audible version of a sanctified home.', 
                songTitle: 'Stand in Holy Places', songArtist: 'Jenny Frogley', songLink: 'https://www.youtube.com/watch?v=UHBYtt0idHQ', songAnalysis: 'This song is a rallying cry for the "defenders" Sister Oscarson calls us to be. The lyrics "I stand in holy places, protected from the storm" perfectly mirror the devotional\'s instruction to make our homes places of refuge second only to the temple. It acknowledges the "mob" or the "storm" of the world but offers a resolute determination to not move "until the Lord has come". It empowers us to sanctify our living spaces and our hearts, standing firm in the truth of the Proclamation regardless of external pressure.' },
            { id: 'sunday', day: 'Sun', title: 'Gathering the Family of God üå≥', devotionalText: 'President Henry B. Eyring reminds us that God wants His children home again, "in families and in glory." This is the spirit of Elijah‚Äîturning the hearts of the fathers to the children and the children to the fathers. Whether it is through temple work, family history, or simply strengthening relationships with living relatives, we are all called to be "gatherers."', 
                hymnTitle: 'High on the Mountain Top', hymnLink: 'https://www.youtube.com/watch?v=u03PlWRLOxU', hymnAnalysis: 'This anthem of the Restoration celebrates the gathering of nations to the "house of the Lord." It fits perfectly with the devotional\'s call to be "gatherers" through temple and family history work. The lyrics describe the standard being unfurled to the world, symbolizing the Proclamation and the temple ordinances that link generations. Listening to this rousing performance inspires us to take our part in the "healing of our family lines" and the preparation for the eternal family of God.', 
                songTitle: 'Ancestor‚Äôs Plea', songArtist: 'Bekah Sorensen', songLink: 'https://www.youtube.com/watch?v=8vQkF0-pYN0', songAnalysis: 'This beautiful song gives a voice to the very ancestors we are challenged to find. It is written from the perspective of those on the other side of the veil, pleading, "When you\'re searching... will you find us?" This perspective powerfully underscores the necessity of our work. The devotional states that "God wants His children home again," and this song makes that connection feel deeply personal and urgent. The tender melody and heartfelt lyrics inspire a greater sense of purpose as we engage in family history research, reminding us that we are connecting with real people who are eagerly awaiting the "healing of our family lines" that only we can help provide.' }
        ];

        const STUDY_GUIDE_DATA = [
            {
                title: "Background",
                content: [
                    "This week's lesson focuses on \"The Family: A Proclamation to the World.\" It is important to establish that this document is not merely policy, but revelatory doctrine. In 1994, the Quorum of the Twelve Apostles discussed how society was pulling away from God‚Äôs laws regarding the family. They could see the confusion of genders and the efforts to remove standards coming. They prayerfully prepared a document to summarize the Church's position, which President Gordon B. Hinckley read in September 1995 to warn and forewarn the Church and the world.",
                    <span>Full text of The Family Proclamation: <a href="https://www.churchofjesuschrist.org/study/scriptures/the-family-a-proclamation-to-the-world/the-family-a-proclamation-to-the-world?lang=eng" target="_blank" rel="noopener noreferrer" className="text-amber-600 hover:underline break-all">https://www.churchofjesuschrist.org/study/scriptures/the-family-a-proclamation-to-the-world/the-family-a-proclamation-to-the-world?lang=eng</a></span>,
                    <span>Full Lesson: <a href="https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-doctrine-and-covenants-2025/51-family-a-proclamation-to-the-world?lang=eng" target="_blank" rel="noopener noreferrer" className="text-amber-600 hover:underline break-all">https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-doctrine-and-covenants-2025/51-family-a-proclamation-to-the-world?lang=eng</a></span>
                ]
            },
            {
                title: "Paragraphs 1‚Äì3: Eternal Identity and Destiny",
                discussionPoint: "The Proclamation establishes that the family is not a human invention but is central to the Creator's plan. It teaches that every human being is a \"beloved spirit son or daughter of heavenly parents\" with a \"divine nature and destiny\". Gender is defined as an essential characteristic of our eternal identity and purpose, both before and after this mortal life.",
                quote: "\"We, the First Presidency and the Council of the Twelve Apostles of The Church of Jesus Christ of Latter-day Saints, solemnly proclaim that marriage between a man and a woman is ordained of God...\"",
                question: "President Dallin H. Oaks taught that while salvation is an individual matter, exaltation is a family matter. How does understanding our identity as \"beloved spirit sons and daughters of heavenly parents\" change the way we view our current family relationships and challenges?",
                answer: "‚Ä¢ It gives us an eternal perspective, reminding us that our family relationships are meant to continue beyond the grave.\n‚Ä¢ It helps us treat family members with more dignity, realizing they also have a divine nature and destiny.\n‚Ä¢ It provides hope that despite mortal imperfections, we are part of a perfect pattern established by God."
            },
            {
                title: "Paragraphs 4‚Äì5: The Sacred Powers of Life",
                discussionPoint: "The Proclamation reaffirms two critical doctrines often challenged in today's world: first, that God's commandment to \"multiply and replenish the earth\" remains in force; and second, that the \"sacred powers of procreation are to be employed only between man and woman, lawfully wedded as husband and wife\". President Dallin H. Oaks emphasized that we must \"balance the competing demands of following the gospel law in our personal lives... even as we seek to show love for all\".",
                quote: "\"The first commandment that God gave to Adam and Eve pertained to their potential for parenthood as husband and wife.\"",
                question: "Why is the law of chastity‚Äîlimiting the \"sacred powers of procreation\" to marriage‚Äîessential to God's plan for happiness?",
                answer: "‚Ä¢ It protects the spiritual and emotional unity of the couple, allowing complete fidelity.\n‚Ä¢ It ensures that children are born within the bonds of matrimony, providing them the stability of a father and a mother.\n‚Ä¢ It treats the power to create life as \"divinely appointed\" rather than casual or recreational."
            },
            {
                title: "Paragraphs 6‚Äì7: The Principles of Happiness",
                discussionPoint: "The Proclamation lists specific principles upon which successful marriages are established: faith, prayer, repentance, forgiveness, respect, love, compassion, work, and wholesome recreational activities. Elder Ulisses Soares shared how his parents, even before they were baptized, sought to raise their children in \"light and truth\" and found that these principles solidified their family unity.",
                quote: "\"Happiness in family life is most likely to be achieved when founded upon the teachings of the Lord Jesus Christ.\"",
                question: "Sister Bonnie L. Oscarson urged us to \"defend the home\" and make it a place of \"order, refuge, holiness, and safety\". Looking at the list of principles in paragraph 7 (faith, prayer, repentance, forgiveness, etc.), which one of these have you seen bring specific healing or strength to a family?",
                answer: "‚Ä¢ Forgiveness allows us to move past mistakes and not hold grudges, which is essential since no family is perfect.\n‚Ä¢ Work and wholesome recreational activities help us build bonds and unity.\n‚Ä¢ Prayer helps us align our will with God's and invites the Spirit into the home.\n‚Ä¢ Repentance allows us to course-correct and improve our relationships daily."
            },
            {
                title: "Addressing Imperfect Circumstances",
                discussionPoint: "It is vital to acknowledge that for many, the ideal family situation described in the Proclamation is not their present reality. President D. Todd Christofferson taught that declaring fundamental truths does not diminish the sacrifices of those for whom the ideal is not yet a reality. He noted that some are denied marriage due to lack of prospects, same-sex attraction, or other reasons, while others deal with divorce or infertility.",
                quote: "\"Disability, death, or other circumstances may necessitate individual adaptation.\"",
                question: "How can we support and encourage those who feel they \"don't fit\" the mold of the Proclamation, while still upholding the doctrine of the family?",
                answer: "‚Ä¢ We can remind them that everyone has gifts and talents to contribute to the unfolding of the divine plan, regardless of their marital status.\n‚Ä¢ We can testify that the Atonement of Jesus Christ will compensate for all deprivation and loss for those who turn to Him.\n‚Ä¢ We can remember that much that is essential can be achieved in \"less than ideal circumstances\".\n‚Ä¢ We can focus on the fact that we are all part of God's family and that He has a plan for each individual."
            },
            {
                title: "The Role of Parents and Partners",
                discussionPoint: "The Proclamation delineates roles but emphasizes that fathers and mothers are \"equal partners\". Elder Rasband shared a personal experience where his wife corrected him for making a decision without her, teaching him that \"preside does not mean dominate\" and \"nurture does not mean a secondary role\".",
                quote: "\"By divine design, fathers are to preside over their families in love and righteousness... Mothers are primarily responsible for the nurture of their children.\"",
                question: "In a world that often minimizes the importance of parenting, how can we better \"defend\" and elevate the roles of mothers and fathers as equal partners?",
                answer: "‚Ä¢ By teaching our children that there is \"no greater honor\" or elevated title than mother or father.\n‚Ä¢ By modeling \"equally yoked\" marriages where decisions are made together in counsel.\n‚Ä¢ By encouraging fathers to be involved in nurturing and mothers to be involved in presiding, helping one another in these sacred responsibilities.\n‚Ä¢ By speaking of \"homemaking\" not with derision, but as creating a place of holiness second only to the temple."
            },
            {
                title: "Paragraphs 8‚Äì9: Warnings and Our Duty to Defend",
                discussionPoint: "The Proclamation concludes with a solemn warning and a call to action. It warns that the disintegration of the family will bring calamities upon nations. However, it also issues a charge to \"responsible citizens\" to promote measures that strengthen the family. Sister Bonnie L. Oscarson issued a challenge for us to be \"defenders\" of the Proclamation, even when the world calls these principles outdated.",
                quote: "\"We warn that individuals who violate covenants of chastity, who abuse spouse or offspring, or who fail to fulfill family responsibilities will one day stand accountable before God.\"",
                question: "Elder Rasband explained that the Proclamation was given to \"warn and forewarn‚Äù. How can we fulfill the charge in paragraph 9 to \"maintain and strengthen the family\" in our own communities?",
                answer: "‚Ä¢ By maintaining our own homes as places of order and refuge, which serves as a witness to the world.\n‚Ä¢ By courageously defending the Lord's revealed doctrines on marriage and gender when they are criticized.\n‚Ä¢ By supporting government or community measures that protect the family unit.\n‚Ä¢ By teaching the upcoming generation the truths of the Lord's plan so they are not deceived."
            },
            {
                title: "The Temple Connection and Gathering",
                discussionPoint: "The doctrine of the family extends to our ancestors. President Henry B. Eyring taught that \"God the Father wants His children home again, in families\". He explained that our hearts turning to our fathers is a fulfillment of prophecy and that we are all \"gatherers\".",
                quote: "\"The divine plan of happiness enables family relationships to be perpetuated beyond the grave. Sacred ordinances and covenants available in holy temples make it possible...\"",
                question: "How does participating in temple and family history work strengthen our understanding of the Family Proclamation?",
                answer: "‚Ä¢ It deepens our testimony that family relationships are eternal and not just for this life.\n‚Ä¢ It allows us to feel an increase of love for our ancestors and sense their awareness of us.\n‚Ä¢ It helps us see that the sealing power restores the family of God, breaking down barriers between generations.\n‚Ä¢ It provides spiritual protection and decreases the influence of the adversary in our lives."
            }
        ];

        // ==========================================
        // ICONS (Inline SVG Components)
        // ==========================================
        const IconSun = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="12" r="4"/><path d="M12 2v2"/><path d="M12 20v2"/><path d="m4.93 4.93 1.41 1.41"/><path d="m17.66 17.66 1.41 1.41"/><path d="M2 12h2"/><path d="M20 12h2"/><path d="m6.34 17.66-1.41 1.41"/><path d="m19.07 4.93-1.41 1.41"/></svg>;
        const IconUsers = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>;
        const IconMusic = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M9 18V5l12-2v13"/><circle cx="6" cy="18" r="3"/><circle cx="18" cy="16" r="3"/></svg>;
        const IconBookOpen = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></svg>;
        const IconShare = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="18" cy="5" r="3"/><circle cx="6" cy="12" r="3"/><circle cx="18" cy="19" r="3"/><line x1="8.59" x2="15.42" y1="13.51" y2="17.49"/><line x1="15.41" x2="8.59" y1="6.51" y2="10.49"/></svg>;
        const IconChevronDown = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="m6 9 6 6 6-6"/></svg>;
        const IconChevronRight = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="m9 18 6-6-6-6"/></svg>;
        const IconLink = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/></svg>;
        const IconPlayCircle = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="12" r="10"/><polygon points="10 8 16 12 10 16 10 8"/></svg>;
        const IconPrinter = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><polyline points="6 9 6 2 18 2 18 9"></polyline><path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"></path><rect x="6" y="14" width="12" height="8"></rect></svg>;


        // ==========================================
        // COMPONENTS
        // ==========================================

        // 1. Toast Notification Component
        const Toast = ({ message, show, onClose }) => {
            useEffect(() => {
                if (show) {
                    const timer = setTimeout(onClose, 3000);
                    return () => clearTimeout(timer);
                }
            }, [show, onClose]);

            if (!show) return null;

            return (
                <div className="fixed bottom-24 left-1/2 transform -translate-x-1/2 bg-stone-800 text-white px-6 py-3 rounded-full shadow-lg z-50 flex items-center gap-2 animate-bounce toast-notification">
                    <span className="text-green-400">&#10003;</span>
                    {message}
                </div>
            );
        };

        // 2. Interactive Toggle Answer Component
        const ToggleAnswer = ({ question, answer }) => {
            const [isOpen, setIsOpen] = useState(false);

            return (
                <div className="mb-6 border-l-4 border-amber-200 pl-4">
                    <button 
                        onClick={() => setIsOpen(!isOpen)}
                        className="text-left font-bold text-amber-900 w-full hover:text-amber-700 transition-colors flex items-start gap-2"
                    >
                        <span className="mt-1">{isOpen ? <IconChevronDown className="w-5 h-5" /> : <IconChevronRight className="w-5 h-5" />}</span>
                        <span>{question}</span>
                    </button>
                    
                    {isOpen && (
                        <div className="mt-3 p-4 bg-stone-100 rounded-lg text-stone-700 italic border border-stone-200 fade-in">
                            <span className="font-bold not-italic text-stone-500 text-xs uppercase tracking-wider block mb-1">Possible Answer</span>
                            <div className="whitespace-pre-line">{answer}</div>
                        </div>
                    )}
                </div>
            );
        };

        // 3. Main App Component
        const App = () => {
            const [activeTab, setActiveTab] = useState('devotional');
            const [activeDayId, setActiveDayId] = useState('');
            const [showToast, setShowToast] = useState(false);
            const [youthGroup, setYouthGroup] = useState('ym'); // 'ym' or 'yw'

            // Initialize Day based on current date
            useEffect(() => {
                const dayMap = ['sunday', 'monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday'];
                const todayIndex = new Date().getDay();
                setActiveDayId(dayMap[todayIndex]);
            }, []);

            const getActiveData = (dataArray) => {
                return dataArray.find(d => d.id === activeDayId) || dataArray[0];
            };

            const copyToClipboard = (dayData) => {
                const promptParts = dayData.prompt.split(':');
                const promptLabel = promptParts[0];
                const promptText = promptParts.slice(1).join(':').trim();
                const scriptureText = (dayData.scriptureRef && dayData.scriptureLink)
                    ? `Scripture: ${dayData.scriptureRef}\n${dayData.scriptureLink}\n\n`
                    : ""; 

                // Use dayData.date if available, otherwise fallback to empty string or generic
                const dateStr = dayData.date ? dayData.date : "";

                const textToCopy = `‚ú® Daily Devotional ‚ú®\n\n${dateStr}\n*${dayData.title}*\n\n${dayData.text}\n\n*${promptLabel}:* ${promptText}\n\n${scriptureText}Full Lesson:\n${dayData.lessonLink}`;

                // Modern clipboard API
                if (navigator.clipboard && navigator.clipboard.writeText) {
                     navigator.clipboard.writeText(textToCopy).then(() => {
                        setShowToast(true);
                    }).catch(err => {
                        fallbackCopy(textToCopy);
                    });
                } else {
                    fallbackCopy(textToCopy);
                }
            };

            const fallbackCopy = (text) => {
                 try {
                    const textArea = document.createElement("textarea");
                    textArea.value = text;
                    
                    // Avoid scrolling to bottom
                    textArea.style.top = "0";
                    textArea.style.left = "0";
                    textArea.style.position = "fixed";
        
                    document.body.appendChild(textArea);
                    textArea.focus();
                    textArea.select();
                    document.execCommand('copy');
                    document.body.removeChild(textArea);
                    setShowToast(true);
                 } catch (err) {
                     console.error("Fallback copy failed", err);
                 }
            };

            const renderDevotional = () => {
                const data = getActiveData(DEVOTIONAL_DATA);
                return (
                    <div className="space-y-6 fade-in max-w-2xl mx-auto">
                        <div className="bg-white p-6 rounded-2xl shadow-sm border border-stone-200">
                            <span className="text-amber-600 text-sm font-bold uppercase tracking-widest">{data.date}</span>
                            <h2 className="text-3xl font-serif font-bold text-stone-800 mt-2 mb-4">{data.title}</h2>
                            <p className="text-stone-600 leading-relaxed text-lg">{data.text}</p>
                            
                            <div className="mt-8 p-5 bg-amber-50 rounded-xl border border-amber-100">
                                <h3 className="font-bold text-amber-900 mb-2 flex items-center gap-2">
                                    <span className="w-2 h-2 bg-amber-500 rounded-full"></span>
                                    {data.prompt.split(':')[0]}
                                </h3>
                                <p className="text-stone-700 italic">{data.prompt.split(':').slice(1).join(':')}</p>
                            </div>

                            <div className="mt-6 grid grid-cols-1 sm:grid-cols-2 gap-3">
                                {data.scriptureLink && (
                                    <a href={data.scriptureLink} target="_blank" className="flex items-center justify-center gap-2 bg-amber-600 text-white py-3 rounded-lg font-medium hover:bg-amber-700 transition">
                                        <IconBookOpen className="w-4 h-4" /> Read Scripture: {data.scriptureRef}
                                    </a>
                                )}
                                <a href={data.lessonLink} target="_blank" className="flex items-center justify-center gap-2 bg-stone-200 text-stone-700 py-3 rounded-lg font-medium hover:bg-stone-300 transition">
                                    <IconLink className="w-4 h-4" /> Full Lesson
                                </a>
                            </div>

                            <button 
                                onClick={() => copyToClipboard(data)}
                                className="w-full mt-4 py-4 border-t border-stone-100 text-stone-500 hover:text-amber-600 font-medium flex items-center justify-center gap-2 transition-colors"
                            >
                                <IconShare className="w-4 h-4" /> Share Devotional
                            </button>
                        </div>
                    </div>
                );
            };

            const renderYouth = () => {
                const data = getActiveData(youthGroup === 'ym' ? YM_DATA : YW_DATA);
                return (
                    <div className="fade-in max-w-3xl mx-auto">
                        {/* Toggle Switch for YM/YW */}
                        <div className="flex justify-center mb-6 bg-stone-200 p-1 rounded-xl inline-flex w-full sm:w-auto mx-auto">
                            <button 
                                onClick={() => setYouthGroup('ym')}
                                className={`flex-1 sm:flex-none px-8 py-2 rounded-lg font-bold transition-all ${youthGroup === 'ym' ? 'bg-white shadow-sm text-amber-700' : 'text-stone-500 hover:text-stone-700'}`}
                            >
                                Young Men
                            </button>
                            <button 
                                onClick={() => setYouthGroup('yw')}
                                className={`flex-1 sm:flex-none px-8 py-2 rounded-lg font-bold transition-all ${youthGroup === 'yw' ? 'bg-white shadow-sm text-amber-700' : 'text-stone-500 hover:text-stone-700'}`}
                            >
                                Young Women
                            </button>
                        </div>

                        <div className="bg-white p-6 rounded-2xl shadow-sm border border-stone-200 relative overflow-hidden">
                            {/* Decorative Top Border */}
                            <div className={`absolute top-0 left-0 w-full h-2 ${youthGroup === 'ym' ? 'bg-blue-600' : 'bg-pink-500'}`}></div>

                            <h2 className="text-2xl font-serif font-bold text-stone-800 mt-4 mb-4">{data.title}</h2>
                            <p className="text-stone-600 leading-relaxed">{data.text}</p>
                            
                            <div className="mt-6 p-5 bg-stone-50 rounded-xl border border-stone-100">
                                <h3 className="font-bold text-stone-800 mb-2">{data.prompt.split(':')[0]}</h3>
                                <p className="text-stone-600">{data.prompt.split(':').slice(1).join(':')}</p>
                            </div>
                             <div className="mt-6 grid grid-cols-1 sm:grid-cols-2 gap-3">
                                {data.scriptureLink && (
                                    <a href={data.scriptureLink} target="_blank" className={`flex items-center justify-center gap-2 text-white py-3 rounded-lg font-medium transition ${youthGroup === 'ym' ? 'bg-blue-600 hover:bg-blue-700' : 'bg-pink-500 hover:bg-pink-600'}`}>
                                        <IconBookOpen className="w-4 h-4" /> Read Scripture: {data.scriptureRef}
                                    </a>
                                )}
                                <a href={data.lessonLink} target="_blank" className="flex items-center justify-center gap-2 bg-stone-200 text-stone-700 py-3 rounded-lg font-medium hover:bg-stone-300 transition">
                                    <IconLink className="w-4 h-4" /> Full Lesson
                                </a>
                            </div>
                             <button 
                                onClick={() => copyToClipboard(data)}
                                className="w-full mt-4 py-4 border-t border-stone-100 text-stone-500 hover:text-stone-800 font-medium flex items-center justify-center gap-2 transition-colors"
                            >
                                <IconShare className="w-4 h-4" /> Share Content
                            </button>
                        </div>
                    </div>
                );
            };

            const renderSongs = () => {
                const data = getActiveData(SONGS_DATA);
                return (
                    <div className="fade-in max-w-3xl mx-auto">
                         <div className="text-center bg-white p-6 rounded-2xl shadow-sm border border-stone-200 mb-6">
                            <div className="w-12 h-12 bg-amber-100 rounded-full flex items-center justify-center mx-auto mb-4">
                                <IconMusic className="w-6 h-6 text-amber-700" />
                            </div>
                            <h2 className="text-2xl font-serif font-bold text-stone-800">Songs of the Soul</h2>
                            <p className="mt-2 text-stone-500 text-sm">Music to invite the Spirit into your daily study.</p>
                        </div>

                        <div className="bg-white p-6 rounded-2xl shadow-sm border border-stone-200">
                            <h3 className="text-lg font-bold text-stone-400 uppercase tracking-wider mb-4">Daily Selection</h3>
                            <h2 className="text-xl font-bold text-stone-800 mb-2">{data.title}</h2>
                            <p className="text-stone-600 italic mb-8 text-sm border-l-2 border-amber-300 pl-4">{data.devotionalText}</p>
                            
                            <div className="space-y-8">
                                {/* Hymn Section */}
                                <div>
                                    <span className="text-xs font-bold text-amber-600 tracking-widest uppercase mb-2 block flex items-center gap-2">
                                        <IconMusic className="w-3 h-3" /> Hymn Selection
                                    </span>
                                    <div className="flex items-start justify-between gap-4">
                                        <h3 className="text-xl font-serif font-bold text-stone-800">{data.hymnTitle}</h3>
                                        <a href={data.hymnLink} target="_blank" rel="noopener noreferrer" className="text-amber-600 hover:text-amber-700 transition-colors" aria-label="Play Song">
                                            <IconPlayCircle className="w-8 h-8" />
                                        </a>
                                    </div>
                                    <p className="mt-2 text-stone-600 text-sm leading-relaxed">{data.hymnAnalysis}</p>
                                </div>

                                <hr className="border-stone-100" />

                                {/* Song Section */}
                                <div>
                                    <span className="text-xs font-bold text-sky-600 tracking-widest uppercase mb-2 block flex items-center gap-2">
                                        <IconMusic className="w-3 h-3" /> Contemporary Song
                                    </span>
                                    <div className="flex items-start justify-between gap-4">
                                        <div>
                                            <h3 className="text-xl font-serif font-bold text-stone-800">{data.songTitle}</h3>
                                            <p className="text-xs text-stone-400 mb-2">by {data.songArtist}</p>
                                        </div>
                                        <a href={data.songLink} target="_blank" rel="noopener noreferrer" className="text-sky-600 hover:text-sky-700 transition-colors" aria-label="Play Song">
                                            <IconPlayCircle className="w-8 h-8" />
                                        </a>
                                    </div>
                                    <p className="mt-2 text-stone-600 text-sm leading-relaxed">{data.songAnalysis}</p>
                                </div>
                            </div>
                        </div>
                    </div>
                );
            };

            const renderStudy = () => {
                return (
                    <div className="fade-in max-w-6xl mx-auto pb-12">
                         <div id="printable-study-section" className="bg-white p-8 rounded-2xl shadow-sm border border-stone-200 relative">
                            
                            <div className="flex justify-between items-start mb-2">
                                 <div className="w-full">
                                    <h1 className="text-3xl font-serif font-bold text-center text-amber-800">Discussion Guide</h1>
                                 </div>
                                 <button 
                                    onClick={() => window.print()} 
                                    className="no-print absolute top-6 right-6 text-stone-400 hover:text-stone-600 hover:bg-stone-100 p-2 rounded-full transition-all"
                                    aria-label="Print Discussion Guide"
                                    title="Print Discussion Guide"
                                >
                                    <IconPrinter className="w-6 h-6" />
                                </button>
                            </div>

                            <p className="text-center text-stone-500 mb-8 italic">"{WEEK_INFO.title}"</p>
                            
                            {/* --- ADDED IMAGE HERE --- */}
                            <div className="mb-8">
                                <img 
                                    src="Graphic.jpg" 
                                    alt="Infographic: The Doctrine of the Family" 
                                    className="w-full h-auto rounded-lg shadow-md border border-stone-200"
                                    onError={(e) => {e.target.style.display = 'none'}} 
                                />
                            </div>
                            {/* ------------------------ */}
                            
                            {STUDY_GUIDE_DATA.map((section, idx) => (
                                <div key={idx} className="mb-10 last:mb-0">
                                    <h2 className="text-xl font-bold text-stone-800 mb-3 border-b border-amber-100 pb-2">{section.title}</h2>
                                    
                                    {section.content && section.content.map((p, i) => (
                                        <p key={i} className="text-stone-700 mb-3 leading-relaxed">{p}</p>
                                    ))}

                                    {section.discussionPoint && (
                                        <div className="mb-4">
                                            <h3 className="text-amber-700 font-semibold text-sm uppercase mb-1">Context</h3>
                                            <p className="text-stone-700">{section.discussionPoint}</p>
                                        </div>
                                    )}

                                    {section.quote && (
                                        <blockquote className="border-l-4 border-stone-300 pl-4 py-1 my-4 text-stone-600 italic bg-stone-50 p-3 rounded-r-lg">
                                            {section.quote}
                                        </blockquote>
                                    )}

                                    {section.question && (
                                        <ToggleAnswer question={section.question} answer={section.answer} />
                                    )}

                                    {section.questions && section.questions.map((qItem, qIdx) => (
                                        <ToggleAnswer key={qIdx} question={qItem.q} answer={qItem.a} />
                                    ))}
                                </div>
                            ))}

                            <div className="mt-12 pt-8 border-t border-stone-200 text-center">
                                <p className="text-stone-800 font-medium">Lesson Summary</p>
                                <p className="text-stone-600 mt-2 text-sm">Today we have discussed that "The Family: A Proclamation to the World" is a revelatory document that warns against the disintegration of the family and outlines the path to happiness. We learned that the power to create life is sacred, that happiness is founded on the teachings of Christ, and that we have a duty to defend the home. As we strive to build righteous families and gather our ancestors, we prepare for the day when we can inherit "eternal life and a fulness of joy‚Äù all through our Lord and Savior Jesus Christ.</p>
                            </div>
                        </div>
                    </div>
                );
            };

            // Dynamic Footer based on view
            const renderFooter = () => (
                <footer className="p-6 text-center text-stone-400 text-xs">
                    <p>{WEEK_INFO.valediction}</p>
                </footer>
            );

            return (
                <div className="flex flex-col h-full bg-stone-100">
                    {/* Header */}
                    <header className="bg-white border-b border-stone-200 pt-6 pb-2 px-4 shadow-sm z-10">
                        <div className="max-w-4xl mx-auto text-center">
                            <h1 className="text-xs font-bold tracking-[0.2em] text-stone-400 uppercase mb-1">Come, Follow Me</h1>
                            <h2 className="text-lg sm:text-xl font-serif font-bold text-stone-800 leading-tight">{WEEK_INFO.title}</h2>
                            <p className="text-stone-500 text-xs mt-1 mb-4">{WEEK_INFO.dateRange}</p>

                            {/* Main Nav Tabs */}
                            <div className="flex justify-center space-x-1 sm:space-x-4 mt-4 overflow-x-auto hide-scrollbar pb-2">
                                <button onClick={() => setActiveTab('devotional')} className={`flex flex-col sm:flex-row items-center gap-2 px-4 py-2 rounded-xl transition-all ${activeTab === 'devotional' ? 'bg-amber-50 text-amber-700 ring-1 ring-amber-200' : 'text-stone-400 hover:text-stone-600'}`}>
                                    <IconSun className="w-5 h-5" />
                                    <span className="text-xs sm:text-sm font-medium">Daily</span>
                                </button>
                                <button onClick={() => setActiveTab('youth')} className={`flex flex-col sm:flex-row items-center gap-2 px-4 py-2 rounded-xl transition-all ${activeTab === 'youth' ? 'bg-amber-50 text-amber-700 ring-1 ring-amber-200' : 'text-stone-400 hover:text-stone-600'}`}>
                                    <IconUsers className="w-5 h-5" />
                                    <span className="text-xs sm:text-sm font-medium">Youth</span>
                                </button>
                                <button onClick={() => setActiveTab('songs')} className={`flex flex-col sm:flex-row items-center gap-2 px-4 py-2 rounded-xl transition-all ${activeTab === 'songs' ? 'bg-amber-50 text-amber-700 ring-1 ring-amber-200' : 'text-stone-400 hover:text-stone-600'}`}>
                                    <IconMusic className="w-5 h-5" />
                                    <span className="text-xs sm:text-sm font-medium">Music</span>
                                </button>
                                <button onClick={() => setActiveTab('study')} className={`flex flex-col sm:flex-row items-center gap-2 px-4 py-2 rounded-xl transition-all ${activeTab === 'study' ? 'bg-amber-50 text-amber-700 ring-1 ring-amber-200' : 'text-stone-400 hover:text-stone-600'}`}>
                                    <IconBookOpen className="w-5 h-5" />
                                    <span className="text-xs sm:text-sm font-medium">Study</span>
                                </button>
                            </div>
                        </div>
                    </header>

                    {/* Secondary Day Navigation (Horizontal Scroll) - Only show for Daily, Youth, Songs */}
                    {activeTab !== 'study' && (
                        <div className="bg-white border-b border-stone-200 py-2 px-4 shadow-sm z-10">
                            <div className="max-w-4xl mx-auto">
                                <div className="flex space-x-3 overflow-x-auto hide-scrollbar pb-1 sm:justify-center">
                                    {DEVOTIONAL_DATA.map((d) => (
                                        <button
                                            key={d.id}
                                            onClick={() => setActiveDayId(d.id)}
                                            className={`flex-shrink-0 flex flex-col items-center justify-center w-12 h-14 rounded-lg transition-all border ${activeDayId === d.id ? 'bg-stone-800 text-white border-stone-800 shadow-md transform scale-105' : 'bg-white text-stone-500 border-stone-200 hover:border-stone-300'}`}
                                        >
                                            <span className="text-[10px] font-bold uppercase">{d.day}</span>
                                            <span className={`text-lg font-bold leading-none ${activeDayId === d.id ? 'text-amber-400' : 'text-stone-800'}`}>{d.date.split(' ')[1]}</span>
                                        </button>
                                    ))}
                                </div>
                            </div>
                        </div>
                    )}

                    {/* Content Area - Scrollable */}
                    <main className="flex-1 overflow-y-auto p-4 pb-20">
                        {activeTab === 'devotional' && renderDevotional()}
                        {activeTab === 'youth' && renderYouth()}
                        {activeTab === 'songs' && renderSongs()}
                        {activeTab === 'study' && renderStudy()}
                        {renderFooter()}
                    </main>

                    <Toast message="Copied to Clipboard!" show={showToast} onClose={() => setShowToast(false)} />
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
