<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Come, Follow Me Companion</title>
    
    <!-- Tailwind CSS (Styling) -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Fonts: Inter (Body) and Merriweather (Headings) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Merriweather:ital,wght@0,300;0,400;0,700;1,400&display=swap" rel="stylesheet">
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    
    <!-- Babel (to compile JSX in browser) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>

    <!-- Tailwind Configuration -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        serif: ['Merriweather', 'serif'],
                    },
                    colors: {
                        stone: { 50: '#fafaf9', 100: '#f5f5f4', 200: '#e7e5e4', 300: '#d6d3d1', 400: '#a8a29e', 500: '#78716c', 600: '#57534e', 700: '#44403c', 800: '#292524', 900: '#1c1917' },
                        amber: { 50: '#fffbeb', 100: '#fef3c7', 200: '#fde68a', 300: '#fcd34d', 400: '#fbbf24', 500: '#f59e0b', 600: '#d97706', 700: '#b45309', 800: '#92400e', 900: '#78350f' }
                    }
                }
            }
        }
    </script>

    <style>
        .hide-scrollbar::-webkit-scrollbar { display: none; }
        .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        .fade-in { animation: fadeIn 0.5s ease-in; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* Print Styles */
        @media print {
            body * {
                visibility: hidden;
            }
            #printable-study-section, #printable-study-section * {
                visibility: visible;
            }
            #printable-study-section {
                position: absolute;
                left: 0;
                top: 0;
                width: 100%;
                margin: 0;
                padding: 0;
                border: none;
                box-shadow: none;
            }
            .no-print {
                display: none !important;
            }
        }
    </style>
</head>
<body class="bg-stone-100 text-stone-800 h-screen flex flex-col overflow-hidden">

    <!-- Loading Fallback -->
    <div id="root" class="h-full flex flex-col">
        <div class="flex items-center justify-center h-full bg-stone-100 text-stone-500 p-4 text-center">
            <div>
                <h2 class="text-xl font-bold mb-2">Loading App...</h2>
                <p class="text-sm">If this takes longer than a few seconds, your network may be blocking the script libraries (React).</p>
            </div>
        </div>
    </div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // ==========================================
        // DATA CONSTANTS
        // ==========================================

        const WEEK_INFO = {
            title: "This Is My Work and My Glory",
            dateRange: "January 5 ‚Äì 11, 2026",
            valediction: "As we study the Old Testament this year, let these truths frame every story we read."
        };

        const DEVOTIONAL_DATA = [
            { id: 'monday', day: 'Mon', fullDay: 'Monday', date: 'Jan 5', title: 'The Anchor of Identity ‚öìÔ∏è', text: 'As we begin a new year of study in the Old Testament, God starts with the most fundamental truth: your identity. Before Moses saw the creation of the world, God told him, "Thou art my son." President Russell M. Nelson has taught that if the Lord were speaking to you directly, the first thing He would make sure you understand is your true identity. In a world of shifting labels‚Äîcareer, status, political affiliation‚Äîthe only label that never changes and matters most is "Child of God."', prompt: 'Challenge: Look in the mirror today and take a moment to look past your physical appearance. Verbally remind yourself, "I am a child of God with a divine destiny."', scriptureRef: 'Moses 1:4', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/pgp/moses/1?lang=eng#p4', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-old-testament-2026/02?lang=eng' },
            { id: 'tuesday', day: 'Tue', fullDay: 'Tuesday', date: 'Jan 6', title: 'Don\'t Buy the Counterfeit üôÖ‚Äç‚ôÇÔ∏è', text: 'Shortly after God called Moses "my son," Satan came tempting him, calling him a "son of man." Notice the subtle demotion? Satan always tries to get us to question our divine lineage and settle for a mortal, limited definition of ourselves. Moses was able to resist because he had just experienced the glory of God. He knew the difference between the Real Thing and the counterfeit. When we stay close to the Spirit, the adversary‚Äôs attempts to demean us become obvious and powerless.', prompt: 'Reflection: What "counterfeit" labels or discouraging thoughts does the adversary try to place on you? How can you replace them with God‚Äôs truth today?', scriptureRef: 'Moses 1:13', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/pgp/moses/1?lang=eng#p13', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-old-testament-2026/02?lang=eng' },
            { id: 'wednesday', day: 'Wed', fullDay: 'Wednesday', date: 'Jan 7', title: 'Spiritual Muscle Memory üí™', text: 'When Moses was under siege by the adversary, he didn\'t crumble. He stood his ground and commanded, "Depart from me, Satan." How? He drew strength from his previous spiritual encounter. He recalled the glory he had seen and the voice he had heard. When we face dark times or temptations, we must rely on our "spiritual muscle memory"‚Äîrecalling the times we have felt the Spirit and known the truth. Do not doubt in the dark what you knew in the light.', prompt: 'Challenge: Identify one spiritual experience from your past that is an "anchor" for your testimony. Write it down or share it with a loved one today.', scriptureRef: 'Moses 1:18', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/pgp/moses/1?lang=eng#p18', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-old-testament-2026/02?lang=eng' },
            { id: 'thursday', day: 'Thu', fullDay: 'Thursday', date: 'Jan 8', title: 'The Mission Statement üìú', text: 'God shared His mission in Moses 1:39: "To bring to pass the immortality and eternal life of man." Everything God does‚Äîevery creation, every commandment, every trial He allows‚Äîis calculated to help us grow and return to Him. He is not an absent clockmaker; He is an active Father solely dedicated to your exaltation. Trusting in His "work" makes it easier to trust Him during our own difficult "work" in mortality.', prompt: 'Reflection: How have you seen the Lord "working" to help you grow or find joy this week?', scriptureRef: 'Moses 1:39', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/pgp/moses/1?lang=eng#p39', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-old-testament-2026/02?lang=eng' },
            { id: 'friday', day: 'Fri', fullDay: 'Friday', date: 'Jan 9', title: 'You Are Ancient Stardust ‚ú®', text: 'In the Book of Abraham, the Lord teaches us about the "intelligences that were organized before the world was." He compares us to the stars‚Äîsome greater than others, but all eternal. You are not a temporary being having a spiritual experience; you are an eternal being having a human experience. You have existed for eons, and your life here is a crucial, planned segment of that existence. You have a history with God that predates this world.', prompt: 'Challenge: Tonight, look up at the stars (or a picture of them). Remember that the Creator of those galaxies knows you by name and has known you for eternity.', scriptureRef: 'Abraham 3:22-23', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/pgp/abr/3?lang=eng#p22', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-old-testament-2026/02?lang=eng' },
            { id: 'saturday', day: 'Sat', fullDay: 'Saturday', date: 'Jan 10', title: 'Chosen for This Moment üï∞Ô∏è', text: 'God told Abraham, "Thou art one of them; thou wast chosen before thou wast born." This applies to us as well. We were reserved for this specific time in human history‚Äîa time of commotion but also the "fullness of times." You have specific talents, relationships, and spheres of influence that only you can fill. You weren\'t placed here by accident; you were placed here on assignment.', prompt: 'Reflection: What is one specific role or responsibility you have right now that you feel "chosen" to fulfill?', scriptureRef: 'Abraham 3:23', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/pgp/abr/3?lang=eng#p23', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-old-testament-2026/02?lang=eng' },
            { id: 'sunday', day: 'Sun', fullDay: 'Sunday', date: 'Jan 11', title: 'The Great Test üìù', text: 'Abraham learned that the purpose of earth life is to "prove them herewith, to see if they will do all things whatsoever the Lord their God shall command them." Life is an open-book test of our obedience and alignment with God\'s will. It‚Äôs not about being perfect instantly, but about being willing to follow instructions. When we align our will with His, we find that His plan brings happiness that our own plans never could.', prompt: 'Challenge: As you take the Sacrament or worship today, ask Heavenly Father: "What is one thing I can do this week to better align my will with Yours?"', scriptureRef: 'Abraham 3:25', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/pgp/abr/3?lang=eng#p25', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-old-testament-2026/02?lang=eng' }
        ];

        const YM_DATA = [
             { id: 'monday', day: 'Mon', date: 'Jan 5', title: 'The Ultimate ID Card ü™™', text: 'If God were to hand you an ID card right now, what would it say? When God spoke to Moses face-to-face, the very first thing He established was Moses\'s identity. He didn\'t call him a shepherd or a leader; He called him "my son." President Nelson has taught that "Child of God" is your most important label. Before you are a basketball player, a gamer, a student, or even an American, you are a son of the Almighty. Don‚Äôt let the world stick a cheaper label on you.', prompt: 'Challenge: Look in the mirror today and say out loud, "I am a son of God." It might feel weird, but own it. It‚Äôs the truth.', scriptureRef: 'Moses 1:4', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/pgp/moses/1?lang=eng&id=p4', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-old-testament-2026/02?lang=eng' },
            { id: 'tuesday', day: 'Tue', date: 'Jan 6', title: 'You Are Legend (Literally) üåå', text: 'Did you know you have a history that goes back way before you were born? In the Pearl of Great Price, Abraham saw a vision of the spirits that existed before the world was made, and he saw that they were among the "noble and great." God wasn\'t just talking about prophets like Moses or Abraham; He was talking about you, too. You aren\'t on earth by accident. You were kept in reserve for this specific time because God knew you could handle the chaos of the latter days. You were legendary before you even took your first breath.', prompt: 'Reflection: What does it change about your day today knowing that you received your first lessons in the world of spirits alongside the "noble and great" before you were even born? (see D&C 138:55-57)', scriptureRef: 'Abraham 3:22-23', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/pgp/abr/3?lang=eng&id=p22-23', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-old-testament-2026/02?lang=eng' },
            { id: 'wednesday', day: 'Wed', date: 'Jan 7', title: 'Don\'t Get Played üéÆ', text: 'Right after Moses had a glorious vision of God, Satan showed up and tried to trick him. Satan threw a tantrum and demanded, "Worship me!" But Moses had just seen the real thing‚Äîhe had seen God‚Äôs glory. He looked at Satan and basically said, "Who are you? I am a son of God. Where is your glory?" Moses recognized that Satan was offering a cheap counterfeit. Temptation is the same way; it promises happiness but delivers misery. Don\'t trade your divine glory for a cheap fake.', prompt: 'Challenge: Name one specific "counterfeit" happiness (like bad media, anger, or breaking a rule) you will reject this week because you know it has "no glory."', scriptureRef: 'Moses 1:13-15', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/pgp/moses/1?lang=eng&id=p13-15', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-old-testament-2026/02?lang=eng' },
            { id: 'thursday', day: 'Thu', date: 'Jan 8', title: 'Divine DNA üß¨', text: 'In the scriptures, God tells Moses, "Thou art in the similitude of mine Only Begotten." "Similitude" just means you look like or resemble someone. You literally have spiritual DNA that links you to your Heavenly Father and Jesus Christ. Because you are made in Their image, you have the potential to become like Them. That means your weaknesses aren\'t the end of your story. You are built for greatness because you are built like Him.', prompt: 'Reflection: If you are created in the "similitude" of Christ, what is one action you can do today that Christ would do?', scriptureRef: 'Moses 1:6', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/pgp/moses/1?lang=eng&id=p6', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-old-testament-2026/02?lang=eng' },
            { id: 'friday', day: 'Fri', date: 'Jan 9', title: 'You Are His Job üî®', text: 'Imagine if the most powerful being in the universe had a job description. What would it be? Creating galaxies? Commanding oceans? While God does all that, He says His work and glory is "to bring to pass the immortality and eternal life of man." That means you. You are His work. His entire focus is on helping you get back home and become like Him. If you ever feel like you don\'t matter, remember that the Creator of the universe is working full-time on your eternal success.', prompt: 'Challenge: Since God is working to help you, take 5 minutes today to pray and ask Him, "What is one thing I can do to help You with Your work today?"', scriptureRef: 'Moses 1:39', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/pgp/moses/1?lang=eng&id=p39', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-old-testament-2026/02?lang=eng' },
            { id: 'saturday', day: 'Sat', date: 'Jan 10', title: 'Spotting the Fake üö´', text: 'Elder Stevenson told a story about two boys who thought a skunk was a "kitty cat with a white stripe." They didn\'t know the true identity of the animal, and they were in danger of getting sprayed! Satan is the great deceiver. He tries to tell you that sins are just "freedom" or that commandments are "restrictions." Like Moses, we have to call him out. When a thought comes into your head that makes you doubt your worth or question God, tell it to leave. As a Priesthood holder, you have the right to command the adversary to depart.', prompt: 'Reflection: Think of a time you realized something wasn\'t as good as it looked. How can the Holy Ghost help you spot spiritual "skunks" before you get hurt?', scriptureRef: 'Moses 1:16-18', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/pgp/moses/1?lang=eng&id=p16-18', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-old-testament-2026/02?lang=eng' },
            { id: 'sunday', day: 'Sun', date: 'Jan 11', title: 'Chosen to Lead üèîÔ∏è', text: 'Abraham learned that God chose His leaders "before the world was." As you sit in your quorum meeting today, look around. The guys next to you were chosen, and so were you. You hold the Priesthood of God‚Äîauthority delegated to you to help gather Israel. You aren\'t just a spectator in the Church; you are a participant in the greatest cause on earth. Stand tall today. You were chosen for this.', prompt: 'Challenge: In your quorum meeting or Sunday School class today, make a comment or share a testimony. Let your voice be heard.', scriptureRef: 'Abraham 3:23', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/pgp/abr/3?lang=eng&id=p23', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-old-testament-2026/02?lang=eng' }
        ];

        const YW_DATA = [
            { id: 'monday', day: 'Mon', date: 'Jan 5', title: 'More Than Just a Label üè∑Ô∏è', text: 'President Nelson taught that while labels like "student," "friend," or "artist" are fun, they shouldn\'t replace your true ID. He said that if any label replaces "Child of God," it can be spiritually suffocating. You are a daughter of Heavenly Parents with a divine nature and eternal destiny. That is your primary identity. Everything else is just a temporary accessory. Don‚Äôt let the world tell you who you are when God has already told you.', prompt: 'Challenge: Many of us have a social media bio. Write down in your journal what your "eternal bio" would say.', scriptureRef: 'Moses 1:4', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/pgp/moses/1?lang=eng&id=p4', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-old-testament-2026/02?lang=eng' },
            { id: 'tuesday', day: 'Tue', date: 'Jan 6', title: 'Noble and Great üëë', text: 'Ever feel like you don\'t fit in? Maybe that\'s because you were designed for something higher. In Abraham‚Äôs vision, he saw the spirits in the premortal world‚Äîincluding you‚Äîand God called them "noble and great." You weren\'t just a face in the crowd before you came to earth; you were one of His strongest spirits, reserved for these specific latter days. When you feel average, remember that your spirit is actually legendary. (see D&C 138:55-56)', prompt: 'Reflection: How does knowing you were considered "noble and great" before you were born change how you handle peer pressure today?', scriptureRef: 'Abraham 3:22-23', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/pgp/abr/3?lang=eng&id=p22-23', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-old-testament-2026/02?lang=eng' },
            { id: 'wednesday', day: 'Wed', date: 'Jan 7', title: 'The "Whatever" to Temptation ‚úã', text: 'When Satan tried to tempt Moses and make him feel small, Moses didn\'t crumble. He essentially asked, "Where is your glory? I‚Äôve seen God‚Äôs glory, and you don\'t have it." Moses knew the difference between the real thing and a cheap counterfeit. Temptation often tries to sell us a "fun" time that leaves us feeling empty. Like Moses, you can look at those temptations and say, "I am a daughter of God. You have nothing to offer me."', prompt: 'Challenge: Identify one "counterfeit" thing (a song, a show, or a habit) that doesn\'t bring you glory or light, and take a break from it today.', scriptureRef: 'Moses 1:13-15', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/pgp/moses/1?lang=eng&id=p13-15', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-old-testament-2026/02?lang=eng' },
            { id: 'thursday', day: 'Thu', date: 'Jan 8', title: 'The Swan Reflection ü¶¢', text: 'Elder Uchtdorf once shared the story of the ugly duckling. It felt out of place and bullied until it saw its reflection and realized it was actually a majestic swan. Sometimes we look in the mirror and only see flaws or "ugly ducklings." But if we could see our spirits the way God sees them, we would see glory and majesty. You are in the "similitude" of the Only Begotten. That means you have divine potential embedded in your spiritual DNA.', prompt: 'Reflection: Look in a mirror today. Instead of fixing your hair or makeup, try to look into your own eyes and see the daughter of God residing there.', scriptureRef: 'Moses 1:6', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/pgp/moses/1?lang=eng&id=p6', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-old-testament-2026/02?lang=eng' },
            { id: 'friday', day: 'Fri', date: 'Jan 9', title: 'You Are His Priority üíñ', text: 'Does God have a job? Yes, and it\'s you. He says, "This is my work and my glory‚Äîto bring to pass the immortality and eternal life of man." Everything He does‚Äîcreating worlds, sending prophets, answering prayers‚Äîis to help you become happy and return to Him. You are not a burden to Him; you are His glory. When you feel forgotten, remember that the Creator of the universe is working on your behalf right now.', prompt: 'Challenge: Say a prayer of gratitude today, thanking Heavenly Father for working so hard to help you grow.', scriptureRef: 'Moses 1:39', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/pgp/moses/1?lang=eng&id=p39', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-old-testament-2026/02?lang=eng' },
            { id: 'saturday', day: 'Sat', date: 'Jan 10', title: 'Don\'t Let Him Deceive You üôÖ‚Äç‚ôÄÔ∏è', text: 'Elder Stevenson taught that Satan tries to convince us that a skunk is just a kitten with a stripe. He tries to rebrand bad things to look harmless or cool. But just like Moses said, "Deceive me not," you have the power to see things as they really are. When the world tries to tell you that standards don\'t matter or that kindness is weak, trust your spiritual instincts. You know the truth.', prompt: 'Reflection: Has there been a time recently where you felt a "warning" in your spirit about a movie, situation, or person? That was the Holy Ghost helping you avoid deception.', scriptureRef: 'Moses 1:16', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/pgp/moses/1?lang=eng&id=p16', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-old-testament-2026/02?lang=eng' },
            { id: 'sunday', day: 'Sun', date: 'Jan 11', title: 'You Have a Work To Do üåç', text: 'God told Moses, "I have a work for thee." He says the same to you. You aren\'t just here to survive high school; you are here to gather Israel and lift those around you. Your smile, your kindness to a lonely student, and your testimony have a massive impact. You are a disciple of Jesus Christ, and He trusts you with His work.', prompt: 'Challenge: Send an encouraging text to someone in your Young Women class today who might need a reminder that she is loved.', scriptureRef: 'Moses 1:6', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/pgp/moses/1?lang=eng&id=p6', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-old-testament-2026/02?lang=eng' }
        ];

        const SONGS_DATA = [
            { id: 'monday', day: 'Mon', title: 'The Anchor of Identity ‚öìÔ∏è', devotionalText: 'As we begin a new year of study in the Old Testament, God starts with the most fundamental truth: your identity. Before Moses saw the creation of the world, God told him, "Thou art my son." President Russell M. Nelson taught that if the Lord were speaking to you directly, the first thing He would make sure you understand is your true identity. In a world of shifting labels‚Äîcareer, status, political affiliation‚Äîthe only label that never changes and matters most is "Child of God."', 
                hymnTitle: 'I Am a Child of God', hymnLink: 'https://www.youtube.com/watch?v=xglz6kryORQ', hymnAnalysis: 'This hymn is the definitive anthem of the day\'s theme. Just as the devotional reminds us that "the only label that never changes and matters most is \'Child of God\'", this hymn reinforces that truth with simplicity and power. The plea "Lead me, guide me, walk beside me" reflects the desire to understand our "divine destiny" mentioned in the challenge. Listening to the Tabernacle Choir perform this arrangement elevates the simple primary song into a majestic declaration of our eternal heritage.', 
                songTitle: 'A Child\'s Prayer', songArtist: 'One Voice Children\'s Choir', songLink: 'https://www.youtube.com/watch?v=Pw-dv-UQTj4#:~:text=A%20Child\'s%20Prayer%20%2D%20YouTube,05%20Auto%2Dgenerated%20by%20YouTube.', songAnalysis: 'While the devotional challenges us to look in the mirror and remind ourselves of our identity, this song captures the intimate conversation between a child and their Heavenly Father that confirms that identity. The lyrics "Pray, he is there; speak, he is list\'ning" reassure us that the God who called Moses "my son" is equally attentive to us. It validates the teaching that if the Lord spoke to us, He would emphasize our identity as His children.' },
            { id: 'tuesday', day: 'Tue', title: 'Don\'t Buy the Counterfeit üôÖ‚Äç‚ôÇÔ∏è', devotionalText: 'Shortly after God called Moses "my son," Satan came tempting him, calling him a "son of man." Notice the subtle demotion? Satan always tries to get us to question our divine lineage and settle for a mortal, limited definition of ourselves. Moses was able to resist because he had just experienced the glory of God. He knew the difference between the Real Thing and the counterfeit. When we stay close to the Spirit, the adversary‚Äôs attempts to demean us become obvious and powerless.', 
                hymnTitle: 'Guide Us, O Thou Great Jehovah', hymnLink: 'https://www.youtube.com/watch?v=twP_cR1ymiQ', hymnAnalysis: 'This hymn fits perfectly with the imagery of Moses resisting the adversary. Just as Moses had to distinguish between the "Real Thing and the counterfeit", this hymn is a prayer for deliverance from the "barren land" of the world. The lyrics "Let the fire and cloudy pillar lead me all my journey through" speak to relying on God\'s glory‚Äîthe very glory Moses experienced that helped him resist Satan‚Äîrather than the counterfeit lights of the world.', 
                songTitle: 'Voice of Truth', songArtist: 'Casting Crowns', songLink: 'https://www.youtube.com/watch?v=9cKm_mYVPQE', songAnalysis: 'This song directly addresses the devotional\'s theme of "counterfeit labels". The lyrics describe the "giants" and "waves" that call out discouraging names, paralleling how Satan called Moses a "son of man" to demote him. The chorus, "But the voice of truth tells me a different story," empowers us to replace those discouraging thoughts with God\'s truth, just as the reflection question asks us to do.' },
            { id: 'wednesday', day: 'Wed', title: 'Spiritual Muscle Memory üí™', devotionalText: 'When Moses was under siege by the adversary, he didn\'t crumble. He stood his ground and commanded, "Depart from me, Satan." How? He drew strength from his previous spiritual encounter. He recalled the glory he had seen and the voice he had heard. When we face dark times or temptations, we must rely on our "spiritual muscle memory"‚Äîrecalling the times we have felt the Spirit and known the truth. Do not doubt in the dark what you knew in the light.', 
                hymnTitle: 'The Lord Is My Light', hymnLink: 'https://www.youtube.com/watch?v=bWfrPLK_SJY', hymnAnalysis: 'This hymn serves as a musical manifestation of Moses\'s command, "Depart from me, Satan". The bold declaration in the lyrics, "The Lord is my light; then why should I fear? By day and by night his presence is near," perfectly captures the confidence Moses felt when he "recalled the glory he had seen". It reinforces the principle that when we rely on the Lord as our light, we do not need to doubt in the dark.', 
                songTitle: 'I Will Not Be Still', songArtist: 'Kenneth Cope', songLink: 'https://www.youtube.com/watch?v=aq4JculFfkI', songAnalysis: 'The devotional highlights that Moses "stood his ground" and did not crumble under siege. Kenneth Cope\'s song echoes this determination with the lyrics, "I will not be still, His power is real." It serves as a modern anthem of "spiritual muscle memory," encouraging us to be a witness of the miracles and mercy we have previously experienced, thus acting as an "anchor" for our testimony.' },
            { id: 'thursday', day: 'Thu', title: 'The Mission Statement üìú', devotionalText: 'God shared His mission in Moses 1:39: "To bring to pass the immortality and eternal life of man." Everything God does‚Äîevery creation, every commandment, every trial He allows‚Äîis calculated to help us grow and return to Him. He is not an absent clockmaker; He is an active Father solely dedicated to your exaltation. Trusting in His "work" makes it easier to trust Him during our own difficult "work" in mortality.', 
                hymnTitle: 'How Great Thou Art', hymnLink: 'https://www.youtube.com/watch?v=e4BthL6pcLM', hymnAnalysis: 'This hymn connects the majesty of God\'s "work"‚ÄîHis creations and His universe‚Äîwith His specific love for us. Moses 1:39 outlines God\'s work to bring to pass our immortality. The hymn transitions from "considering all the works Thy hands have made" to the personal realization of the Atonement ("God, his Son not sparing"). It reminds us that the Creator of the universe is indeed an "active Father solely dedicated to your exaltation".', 
                songTitle: 'Masterpiece', songArtist: 'Danny Gokey', songLink: 'https://www.youtube.com/watch?v=culDfUqiKDE#:~:text=Danny%20Gokey%20%2D%20Give%20Me%20Jesus,Gokey%E2%80%A21.9M%20views', songAnalysis: 'The devotional teaches that God is an "active Father" whose work is to help us grow and achieve eternal life. Danny Gokey\'s "Masterpiece" uses the metaphor of an artist creating a work of art to describe this divine process. The lyrics acknowledge the pain and confusion of the "process" (the trials mentioned in the devotional) but affirm that God is using those very things to shape us into something beautiful. It perfectly illustrates the concept of trusting in His creative "work" on our souls.' },
            { id: 'friday', day: 'Fri', title: 'You Are Ancient Stardust ‚ú®', devotionalText: 'In the Book of Abraham, the Lord teaches us about the "intelligences that were organized before the world was." He compares us to the stars‚Äîsome greater than others, but all eternal. You are not a temporary being having a spiritual experience; you are an eternal being having a human experience. You have existed for eons, and your life here is a crucial, planned segment of that existence. You have a history with God that predates this world.', 
                hymnTitle: 'If You Could Hie to Kolob', hymnLink: 'https://www.youtube.com/watch?v=OCkcIkyzR9Y&list=RDOCkcIkyzR9Y&start_radio=1', hymnAnalysis: 'There is perhaps no other hymn that so perfectly encapsulates the doctrines of Abraham 3. The lyrics explore the eternal nature of matter, spirit, and priesthood, directly mirroring the teaching that "you have existed for eons". As you listen, the haunting melody invites you to ponder the "intelligences that were organized before the world was" and the "eternal round" of God\'s plan.', 
                songTitle: 'Known', songArtist: 'Tauren Wells', songLink: 'https://www.youtube.com/watch?v=0aXTlWcZ-bk', songAnalysis: 'The challenge for the day is to remember that the Creator of galaxies "knows you by name and has known you for eternity". Tauren Wells\' song "Known" speaks to the profound comfort of being fully seen and loved by God. The message that we are "fully known and loved by You" resonates with the truth that we have a "history with God that predates this world", reinforcing our eternal value.' },
            { id: 'saturday', day: 'Sat', title: 'Chosen for This Moment üï∞Ô∏è', devotionalText: 'God told Abraham, "Thou art one of them; thou wast chosen before thou wast born." This applies to us as well. We were reserved for this specific time in human history‚Äîa time of commotion but also the "fullness of times." You have specific talents, relationships, and spheres of influence that only you can fill. You weren\'t placed here by accident; you were placed here on assignment.', 
                hymnTitle: 'Hope of Israel', hymnLink: 'https://www.youtube.com/watch?v=fBQUaLkp0ks#:~:text=Hope%20of%20Israel%20%2D%20YouTube,sings%20%22Hope%20of%20Israel%22.', hymnAnalysis: 'This rousing hymn serves as a rallying cry for those "chosen for now." The lyrics "Hope of Israel, Zion\'s army, children of the promised day" speak directly to the generation reserved for this "specific time in human history". It reinforces the devotional\'s message that we are not here by accident, but are on "assignment" to conquer our foes and stand for truth.', 
                songTitle: 'For Such a Time as This', songArtist: 'Amanda Nolan', songLink: 'https://www.youtube.com/watch?v=HHr1C2fDCus', songAnalysis: 'The title of this song alone captures the essence of the day\'s theme. Just as the devotional teaches that we were "chosen before thou wast born", this song reminds us that we were made for this exact moment. The lyrics encourage us to rise to the occasion and use our specific influence, helping us reflect on the roles we feel "chosen" to fulfill right now.' },
            { id: 'sunday', day: 'Sun', title: 'The Great Test üìù', devotionalText: 'Abraham learned that the purpose of earth life is to "prove them herewith, to see if they will do all things whatsoever the Lord their God shall command them." Life is an open-book test of our obedience and alignment with God\'s will. It‚Äôs not about being perfect instantly, but about being willing to follow instructions. When we align our will with His, we find that His plan brings happiness that our own plans never could.', 
                hymnTitle: 'I\'ll Go Where You Want Me to Go', hymnLink: 'https://www.youtube.com/watch?v=wYMIlP6xXGU', hymnAnalysis: 'This hymn perfectly articulates the "open-book test" of obedience mentioned in the devotional. The chorus, "I\'ll say what you want me to say... I\'ll be what you want me to be," is a musical commitment to "align our will with His". It emphasizes that the test is about a willingness to follow instructions, regardless of the location or the task.', 
                songTitle: 'Thy Will Be Done', songArtist: 'Nik Day and Kyle Vorkink', songLink: 'https://www.youtube.com/watch?v=ZAILdNoF5hM', songAnalysis: 'This tender ballad addresses the heart of the challenge: asking God how to better align our will with His. The lyrics acknowledge that submission to God\'s will isn\'t always easy, but it is the path to peace. It reinforces the devotional\'s promise that His plan brings a happiness our own plans never could, making it a perfect song for Sabbath reflection.' }
        ];

        const STUDY_GUIDE_DATA = [
            {
                title: "Background",
                content: [
                    "We are beginning a new year of study in the Old Testament. However, we are starting not with Genesis, but with the Pearl of Great Price. The Book of Moses is the Joseph Smith Translation of the early chapters of Genesis. It serves as a restoration of precious truths that were lost from the Bible over centuries. Specifically, Moses 1 acts as a \"prequel\" to the Creation story, providing the context for why God created the earth and who we are in relation to Him.",
                    "Similarly, the Book of Abraham provides insight into our life before we came to earth. Together, these scriptures frame our study of the Old Testament by answering humanity's most fundamental questions: Who is God? Who are we? And what is the purpose of life?",
                    <span>Full Lesson: <a href="https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-old-testament-2026/02?lang=eng" target="_blank" rel="noopener noreferrer" className="text-amber-600 hover:underline break-all">https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-old-testament-2026/02?lang=eng</a></span>
                ]
            },
            {
                title: "Introduction: A Preface to the Old Testament",
                discussionPoint: "Before Moses could lead the children of Israel or write the history of creation, he needed to understand his relationship with God. In this chapter, Moses is caught up to a high mountain where God introduces Himself. This interaction sets the stage for everything Moses would later accomplish. It teaches us that all true understanding of the universe begins with a true understanding of God.",
                quote: "Moses 1:3‚Äì4: \"And God spake unto Moses, saying: Behold, I am the Lord God Almighty, and Endless is my name; for I am without beginning of days or end of years; and is not this endless? And, behold, thou art my son; wherefore look, and I will show thee the workmanship of mine hands; but not all, for my works are without end, and also my words, for they never cease.\"",
                questions: [
                    {
                        q: "Why do we sometimes feel intimidated by the Old Testament, and how does viewing it through the lens of \"real families with real struggles\" change that perspective?",
                        a: "This question was not in the source text, but the discussion question provided is: Why do you think the Lord started His instruction to Moses by declaring His own power (\"Endless is my name\") and immediately following it with Moses‚Äôs relationship to Him (\"thou art my son\")?"
                    },
                    {
                         q: "Why do you think the Lord started His instruction to Moses by declaring His own power (\"Endless is my name\") and immediately following it with Moses‚Äôs relationship to Him (\"thou art my son\")?",
                         a: "[It establishes a relationship of trust. It helps Moses understand that while God is infinite and powerful, He is also a personal Father. It gives Moses confidence and perspective before showing him the vastness of creation. It establishes authority.]"
                    }
                ]
            },
            {
                title: "Moses 1:4‚Äì6: I Am a Child of God",
                discussionPoint: "In the provided source \"Choices for Eternity,\" President Russell M. Nelson teaches that if the Lord were speaking to us directly, the first thing He would ensure we understand is our true identity. In Moses 1:4 and 1:6, God repeatedly tells Moses, \"Thou art my son.\" This foundational truth is the armor Moses needs for the trials ahead. President Nelson warns against letting worldly labels replace this primary identity.",
                quote: "Moses 1:6: \"And I have a work for thee, Moses, my son; and thou art in the similitude of mine Only Begotten; and mine Only Begotten is and shall be the Savior, for he is full of grace and truth; but there is no God beside me, and all things are present with me, for I know them all.\"",
                questions: [
                    {
                        q: "President Nelson listed various labels (occupation, nationality, political affiliation) that often compete for our identity. How does keeping \"Child of God\" as our primary identity change the way we make decisions or handle stress?",
                        a: "[It gives us a sense of eternal worth that doesn't fluctuate based on worldly success or failure. It reminds us that our potential is divine. It helps us treat others with more respect because we see them as children of God too. It provides stability when other roles in life change or end.]"
                    }
                ]
            },
            {
                title: "Moses 1:12‚Äì22: Resisting the Adversary",
                discussionPoint: "Immediately after Moses has a glorious spiritual experience, Satan arrives to tempt him. In the talk \"Deceive Me Not,\" Elder Gary E. Stevenson points out that Satan tries to deceive us about our identity. While God called Moses \"my son,\" Satan deliberately addresses him as \"Moses, son of man.\" Satan wants to downgrade our pedigree. He wants us to believe we are merely mortal, biological accidents, rather than divine offspring.",
                quote: "Moses 1:12‚Äì13: \"And it came to pass that when Moses had said these words, behold, Satan came tempting him, saying: Moses, son of man, worship me. And it came to pass that Moses looked upon Satan and said: Who art thou? For behold, I am a son of God, in the similitude of his Only Begotten; and where is thy glory, that I should worship thee?\"",
                questions: [
                    {
                        q: "Elder Stevenson shared stories of a dog painted to look like a Dalmatian and a skunk mistaken for a kitten to illustrate that Satan tries to disguise reality. What are some \"counterfeits\" or disguises Satan uses today to make us question our identity or question truth?",
                        a: "[He disguises sin as \"freedom\" or \"fun.\" He frames commandments as \"restrictions\" rather than protections. He uses social media to create false realities that make us feel inadequate. He suggests that our worth is tied to likes, money, or appearance rather than our spiritual lineage.]"
                    },
                    {
                        q: "Moses actively resisted Satan. He didn't just ignore him; he commanded him to leave. Looking at verses 18, 20, and 21, what specific tools did Moses use to banish the adversary?",
                        a: "[He called upon God for strength (prayer). He used his testimony/identity (\"I am a son of God\"). He mentioned the name of the Only Begotten (Jesus Christ). He was persistent (he had to command Satan multiple times).]"
                    }
                ]
            },
            {
                title: "Moses 1:39: God‚Äôs Work and Glory",
                discussionPoint: "After the confrontation with Satan, the heavens open again to Moses. He asks God why He created all these things. The Lord‚Äôs answer in verse 39 is one of the most significant scriptures in the restoration. It summarizes the entire Plan of Salvation in two lines, distinguishing between immortality (living forever) and eternal life (living forever with God, like God).",
                quote: "Moses 1:39: \"For behold, this is my work and my glory‚Äîto bring to pass the immortality and eternal life of man.\"",
                questions: [
                    {
                        q: "Why is it comforting to know that our exaltation is not just God‚Äôs \"hobby,\" but His \"work\" and His \"glory\"?",
                        a: "[It means He is fully invested in our success. He is not indifferent to us. Our success contributes to His glory. We can trust that He will do everything possible (short of violating agency) to help us return to Him.]"
                    }
                ]
            },
            {
                title: "Abraham 3:22‚Äì26: The Noble and Great Ones",
                discussionPoint: "In the Book of Abraham, we get a glimpse of what happened before the world was created. Abraham sees the \"intelligences\" (spirits) that were organized before the world was. Elder Dieter F. Uchtdorf, in his talk \"Our True Identity,\" uses the story of the Ugly Duckling to illustrate that we often forget our true origins. Just as the duckling was actually a swan, we are actually \"noble and great\" spirits sent here with a purpose.",
                quote: "Abraham 3:22‚Äì23: \"Now the Lord had shown unto me, Abraham, the intelligences that were organized before the world was; and among all these there were many of the noble and great ones; And God saw these souls that they were good, and he stood in the midst of them, and he said: These I will make my rulers; for he stood among those that were spirits, and he saw that they were good; and he said unto me: Abraham, thou art one of them; thou wast chosen before thou wast born.\"",
                questions: [
                    {
                        q: "How does the knowledge that we lived with God before this life, and that we were \"chosen\" and prepared, help us when we feel discouraged or \"ugly\" in this life?",
                        a: "[It reminds us that our current trials are temporary. It confirms that we have the capacity to overcome hard things because we have done it before. It helps us realize that God knows us individually and has a specific mission for us. We are not here by accident.]"
                    }
                ]
            },
            {
                title: "Lesson Summary",
                content: [
                    "This week, we stepped back to the very beginning. We learned from Moses that our primary identity is that of a \"son\" or \"daughter\" of God. We saw how Satan tries to strip us of that title by calling us \"sons of men\" and offering counterfeit glory. We learned from Moses‚Äôs example that we can defeat Satan by calling upon God and remembering who we are. Finally, through Abraham, we were reminded that we are ancient, noble spirits, sent here as part of God's great work to bring to pass our immortality and eternal life. As we study the Old Testament this year, let these truths frame every story we read."
                ]
            }
        ];

        // ==========================================
        // ICONS (Inline SVG Components)
        // ==========================================
        const IconSun = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="12" r="4"/><path d="M12 2v2"/><path d="M12 20v2"/><path d="m4.93 4.93 1.41 1.41"/><path d="m17.66 17.66 1.41 1.41"/><path d="M2 12h2"/><path d="M20 12h2"/><path d="m6.34 17.66-1.41 1.41"/><path d="m19.07 4.93-1.41 1.41"/></svg>;
        const IconUsers = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>;
        const IconMusic = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M9 18V5l12-2v13"/><circle cx="6" cy="18" r="3"/><circle cx="18" cy="16" r="3"/></svg>;
        const IconBookOpen = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></svg>;
        const IconShare = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="18" cy="5" r="3"/><circle cx="6" cy="12" r="3"/><circle cx="18" cy="19" r="3"/><line x1="8.59" x2="15.42" y1="13.51" y2="17.49"/><line x1="15.41" x2="8.59" y1="6.51" y2="10.49"/></svg>;
        const IconChevronDown = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="m6 9 6 6 6-6"/></svg>;
        const IconChevronRight = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="m9 18 6-6-6-6"/></svg>;
        const IconLink = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/></svg>;
        const IconPlayCircle = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="12" r="10"/><polygon points="10 8 16 12 10 16 10 8"/></svg>;
        const IconPrinter = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><polyline points="6 9 6 2 18 2 18 9"></polyline><path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"></path><rect x="6" y="14" width="12" height="8"></rect></svg>;


        // ==========================================
        // COMPONENTS
        // ==========================================

        // 1. Toast Notification Component
        const Toast = ({ message, show, onClose }) => {
            useEffect(() => {
                if (show) {
                    const timer = setTimeout(onClose, 3000);
                    return () => clearTimeout(timer);
                }
            }, [show, onClose]);

            if (!show) return null;

            return (
                <div className="fixed bottom-24 left-1/2 transform -translate-x-1/2 bg-stone-800 text-white px-6 py-3 rounded-full shadow-lg z-50 flex items-center gap-2 animate-bounce toast-notification">
                    <span className="text-green-400">&#10003;</span>
                    {message}
                </div>
            );
        };

        // 2. Interactive Toggle Answer Component
        const ToggleAnswer = ({ question, answer }) => {
            const [isOpen, setIsOpen] = useState(false);

            return (
                <div className="mb-6 border-l-4 border-amber-200 pl-4">
                    <button 
                        onClick={() => setIsOpen(!isOpen)}
                        className="text-left font-bold text-amber-900 w-full hover:text-amber-700 transition-colors flex items-start gap-2"
                    >
                        <span className="mt-1">{isOpen ? <IconChevronDown className="w-5 h-5" /> : <IconChevronRight className="w-5 h-5" />}</span>
                        <span>{question}</span>
                    </button>
                    
                    {isOpen && (
                        <div className="mt-3 p-4 bg-stone-100 rounded-lg text-stone-700 italic border border-stone-200 fade-in">
                            <span className="font-bold not-italic text-stone-500 text-xs uppercase tracking-wider block mb-1">Possible Answer</span>
                            <div className="whitespace-pre-line">{answer}</div>
                        </div>
                    )}
                </div>
            );
        };

        // 3. Main App Component
        const App = () => {
            const [activeTab, setActiveTab] = useState('devotional');
            const [activeDayId, setActiveDayId] = useState('');
            const [showToast, setShowToast] = useState(false);
            const [youthGroup, setYouthGroup] = useState('ym'); // 'ym' or 'yw'

            // Initialize Day based on current date
            useEffect(() => {
                const dayMap = ['sunday', 'monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday'];
                const todayIndex = new Date().getDay();
                setActiveDayId(dayMap[todayIndex]);
            }, []);

            const getActiveData = (dataArray) => {
                return dataArray.find(d => d.id === activeDayId) || dataArray[0];
            };

            const copyToClipboard = (dayData) => {
                const promptParts = dayData.prompt.split(':');
                const promptLabel = promptParts[0];
                const promptText = promptParts.slice(1).join(':').trim();
                const scriptureText = (dayData.scriptureRef && dayData.scriptureLink)
                    ? `Scripture: ${dayData.scriptureRef}\n${dayData.scriptureLink}\n\n`
                    : ""; 

                // Use dayData.date if available, otherwise fallback to empty string or generic
                const dateStr = dayData.date ? dayData.date : "";

                const textToCopy = `‚ú® Daily Devotional ‚ú®\n\n${dateStr}\n*${dayData.title}*\n\n${dayData.text}\n\n*${promptLabel}:* ${promptText}\n\n${scriptureText}Full Lesson:\n${dayData.lessonLink}`;

                // Modern clipboard API
                if (navigator.clipboard && navigator.clipboard.writeText) {
                      navigator.clipboard.writeText(textToCopy).then(() => {
                        setShowToast(true);
                    }).catch(err => {
                        fallbackCopy(textToCopy);
                    });
                } else {
                    fallbackCopy(textToCopy);
                }
            };

            const fallbackCopy = (text) => {
                 try {
                    const textArea = document.createElement("textarea");
                    textArea.value = text;
                    
                    // Avoid scrolling to bottom
                    textArea.style.top = "0";
                    textArea.style.left = "0";
                    textArea.style.position = "fixed";
        
                    document.body.appendChild(textArea);
                    textArea.focus();
                    textArea.select();
                    document.execCommand('copy');
                    document.body.removeChild(textArea);
                    setShowToast(true);
                 } catch (err) {
                     console.error("Fallback copy failed", err);
                 }
            };

            const renderDevotional = () => {
                const data = getActiveData(DEVOTIONAL_DATA);
                return (
                    <div className="space-y-6 fade-in max-w-2xl mx-auto">
                        <div className="bg-white p-6 rounded-2xl shadow-sm border border-stone-200">
                            <span className="text-amber-600 text-sm font-bold uppercase tracking-widest">{data.date}</span>
                            <h2 className="text-3xl font-serif font-bold text-stone-800 mt-2 mb-4">{data.title}</h2>
                            <p className="text-stone-600 leading-relaxed text-lg">{data.text}</p>
                            
                            <div className="mt-8 p-5 bg-amber-50 rounded-xl border border-amber-100">
                                <h3 className="font-bold text-amber-900 mb-2 flex items-center gap-2">
                                    <span className="w-2 h-2 bg-amber-500 rounded-full"></span>
                                    {data.prompt.split(':')[0]}
                                </h3>
                                <p className="text-stone-700 italic">{data.prompt.split(':').slice(1).join(':')}</p>
                            </div>

                            <div className="mt-6 grid grid-cols-1 sm:grid-cols-2 gap-3">
                                {data.scriptureLink && (
                                    <a href={data.scriptureLink} target="_blank" className="flex items-center justify-center gap-2 bg-amber-600 text-white py-3 rounded-lg font-medium hover:bg-amber-700 transition">
                                        <IconBookOpen className="w-4 h-4" /> Read Scripture: {data.scriptureRef}
                                    </a>
                                )}
                                <a href={data.lessonLink} target="_blank" className="flex items-center justify-center gap-2 bg-stone-200 text-stone-700 py-3 rounded-lg font-medium hover:bg-stone-300 transition">
                                    <IconLink className="w-4 h-4" /> Full Lesson
                                </a>
                            </div>

                            <button 
                                onClick={() => copyToClipboard(data)}
                                className="w-full mt-4 py-4 border-t border-stone-100 text-stone-500 hover:text-amber-600 font-medium flex items-center justify-center gap-2 transition-colors"
                            >
                                <IconShare className="w-4 h-4" /> Share Devotional
                            </button>
                        </div>
                    </div>
                );
            };

            const renderYouth = () => {
                const data = getActiveData(youthGroup === 'ym' ? YM_DATA : YW_DATA);
                return (
                    <div className="fade-in max-w-3xl mx-auto">
                        {/* Toggle Switch for YM/YW */}
                        <div className="flex justify-center mb-6 bg-stone-200 p-1 rounded-xl inline-flex w-full sm:w-auto mx-auto">
                            <button 
                                onClick={() => setYouthGroup('ym')}
                                className={`flex-1 sm:flex-none px-8 py-2 rounded-lg font-bold transition-all ${youthGroup === 'ym' ? 'bg-white shadow-sm text-amber-700' : 'text-stone-500 hover:text-stone-700'}`}
                            >
                                Young Men
                            </button>
                            <button 
                                onClick={() => setYouthGroup('yw')}
                                className={`flex-1 sm:flex-none px-8 py-2 rounded-lg font-bold transition-all ${youthGroup === 'yw' ? 'bg-white shadow-sm text-amber-700' : 'text-stone-500 hover:text-stone-700'}`}
                            >
                                Young Women
                            </button>
                        </div>

                        <div className="bg-white p-6 rounded-2xl shadow-sm border border-stone-200 relative overflow-hidden">
                            {/* Decorative Top Border */}
                            <div className={`absolute top-0 left-0 w-full h-2 ${youthGroup === 'ym' ? 'bg-blue-600' : 'bg-pink-500'}`}></div>

                            <h2 className="text-2xl font-serif font-bold text-stone-800 mt-4 mb-4">{data.title}</h2>
                            <p className="text-stone-600 leading-relaxed">{data.text}</p>
                            
                            <div className="mt-6 p-5 bg-stone-50 rounded-xl border border-stone-100">
                                <h3 className="font-bold text-stone-800 mb-2">{data.prompt.split(':')[0]}</h3>
                                <p className="text-stone-600">{data.prompt.split(':').slice(1).join(':')}</p>
                            </div>
                             <div className="mt-6 grid grid-cols-1 sm:grid-cols-2 gap-3">
                                {data.scriptureLink && (
                                    <a href={data.scriptureLink} target="_blank" className={`flex items-center justify-center gap-2 text-white py-3 rounded-lg font-medium transition ${youthGroup === 'ym' ? 'bg-blue-600 hover:bg-blue-700' : 'bg-pink-500 hover:bg-pink-600'}`}>
                                        <IconBookOpen className="w-4 h-4" /> Read Scripture: {data.scriptureRef}
                                    </a>
                                )}
                                <a href={data.lessonLink} target="_blank" className="flex items-center justify-center gap-2 bg-stone-200 text-stone-700 py-3 rounded-lg font-medium hover:bg-stone-300 transition">
                                    <IconLink className="w-4 h-4" /> Full Lesson
                                </a>
                            </div>
                             <button 
                                onClick={() => copyToClipboard(data)}
                                className="w-full mt-4 py-4 border-t border-stone-100 text-stone-500 hover:text-stone-800 font-medium flex items-center justify-center gap-2 transition-colors"
                            >
                                <IconShare className="w-4 h-4" /> Share Content
                            </button>
                        </div>
                    </div>
                );
            };

            const renderSongs = () => {
                const data = getActiveData(SONGS_DATA);
                return (
                    <div className="fade-in max-w-3xl mx-auto">
                         <div className="text-center bg-white p-6 rounded-2xl shadow-sm border border-stone-200 mb-6">
                            <div className="w-12 h-12 bg-amber-100 rounded-full flex items-center justify-center mx-auto mb-4">
                                <IconMusic className="w-6 h-6 text-amber-700" />
                            </div>
                            <h2 className="text-2xl font-serif font-bold text-stone-800">Songs of the Soul</h2>
                            <p className="mt-2 text-stone-500 text-sm">Music to invite the Spirit into your daily study.</p>
                        </div>

                        <div className="bg-white p-6 rounded-2xl shadow-sm border border-stone-200">
                            <h3 className="text-lg font-bold text-stone-400 uppercase tracking-wider mb-4">Daily Selection</h3>
                            <h2 className="text-xl font-bold text-stone-800 mb-2">{data.title}</h2>
                            <p className="text-stone-600 italic mb-8 text-sm border-l-2 border-amber-300 pl-4">{data.devotionalText}</p>
                            
                            <div className="space-y-8">
                                {/* Hymn Section */}
                                <div>
                                    <span className="text-xs font-bold text-amber-600 tracking-widest uppercase mb-2 block flex items-center gap-2">
                                        <IconMusic className="w-3 h-3" /> Hymn Selection
                                    </span>
                                    <div className="flex items-start justify-between gap-4">
                                        <h3 className="text-xl font-serif font-bold text-stone-800">{data.hymnTitle}</h3>
                                        <a href={data.hymnLink} target="_blank" rel="noopener noreferrer" className="text-amber-600 hover:text-amber-700 transition-colors" aria-label="Play Song">
                                            <IconPlayCircle className="w-8 h-8" />
                                        </a>
                                    </div>
                                    <p className="mt-2 text-stone-600 text-sm leading-relaxed">{data.hymnAnalysis}</p>
                                </div>

                                <hr className="border-stone-100" />

                                {/* Song Section */}
                                <div>
                                    <span className="text-xs font-bold text-sky-600 tracking-widest uppercase mb-2 block flex items-center gap-2">
                                        <IconMusic className="w-3 h-3" /> Contemporary Song
                                    </span>
                                    <div className="flex items-start justify-between gap-4">
                                        <div>
                                            <h3 className="text-xl font-serif font-bold text-stone-800">{data.songTitle}</h3>
                                            <p className="text-xs text-stone-400 mb-2">by {data.songArtist}</p>
                                        </div>
                                        <a href={data.songLink} target="_blank" rel="noopener noreferrer" className="text-sky-600 hover:text-sky-700 transition-colors" aria-label="Play Song">
                                            <IconPlayCircle className="w-8 h-8" />
                                        </a>
                                    </div>
                                    <p className="mt-2 text-stone-600 text-sm leading-relaxed">{data.songAnalysis}</p>
                                </div>
                            </div>
                        </div>
                    </div>
                );
            };

            const renderStudy = () => {
                return (
                    <div className="fade-in max-w-6xl mx-auto pb-12">
                         <div id="printable-study-section" className="bg-white p-8 rounded-2xl shadow-sm border border-stone-200 relative">
                            
                            <div className="flex justify-between items-start mb-2">
                                 <div className="w-full">
                                    <h1 className="text-3xl font-serif font-bold text-center text-amber-800">Discussion Guide</h1>
                                 </div>
                                 <button 
                                    onClick={() => window.print()} 
                                    className="no-print absolute top-6 right-6 text-stone-400 hover:text-stone-600 hover:bg-stone-100 p-2 rounded-full transition-all"
                                    aria-label="Print Discussion Guide"
                                    title="Print Discussion Guide"
                                >
                                    <IconPrinter className="w-6 h-6" />
                                </button>
                            </div>

                            <p className="text-center text-stone-500 mb-8 italic">"{WEEK_INFO.title}"</p>
                            
                            {/* --- ADDED IMAGE HERE --- */}
                            <div className="mb-8">
                                <img 
                                    src="Graphic.jpg" 
                                    alt="Infographic: Old Testament" 
                                    className="w-full h-auto rounded-lg shadow-md border border-stone-200"
                                    onError={(e) => {e.target.style.display = 'none'}} 
                                />
                            </div>
                            {/* ------------------------ */}
                            
                            {STUDY_GUIDE_DATA.map((section, idx) => (
                                <div key={idx} className="mb-10 last:mb-0">
                                    <h2 className="text-xl font-bold text-stone-800 mb-3 border-b border-amber-100 pb-2">{section.title}</h2>
                                    
                                    {section.content && section.content.map((p, i) => (
                                        <p key={i} className="text-stone-700 mb-3 leading-relaxed">{p}</p>
                                    ))}

                                    {section.discussionPoint && (
                                        <div className="mb-4">
                                            <h3 className="text-amber-700 font-semibold text-sm uppercase mb-1">Context</h3>
                                            <p className="text-stone-700">{section.discussionPoint}</p>
                                        </div>
                                    )}

                                    {section.quote && (
                                        <blockquote className="border-l-4 border-stone-300 pl-4 py-1 my-4 text-stone-600 italic bg-stone-50 p-3 rounded-r-lg">
                                            {section.quote}
                                        </blockquote>
                                    )}

                                    {section.question && (
                                        <ToggleAnswer question={section.question} answer={section.answer} />
                                    )}

                                    {section.questions && section.questions.map((qItem, qIdx) => (
                                        <ToggleAnswer key={qIdx} question={qItem.q} answer={qItem.a} />
                                    ))}
                                </div>
                            ))}
                        </div>
                    </div>
                );
            };

            // Dynamic Footer based on view
            const renderFooter = () => (
                <footer className="p-6 text-center text-stone-400 text-xs">
                    <p>{WEEK_INFO.valediction}</p>
                </footer>
            );

            return (
                <div className="flex flex-col h-full bg-stone-100">
                    {/* Header */}
                    <header className="bg-white border-b border-stone-200 pt-6 pb-2 px-4 shadow-sm z-10">
                        <div className="max-w-4xl mx-auto text-center">
                            <h1 className="text-xs font-bold tracking-[0.2em] text-stone-400 uppercase mb-1">Come, Follow Me</h1>
                            <h2 className="text-lg sm:text-xl font-serif font-bold text-stone-800 leading-tight">{WEEK_INFO.title}</h2>
                            <p className="text-stone-500 text-xs mt-1 mb-4">{WEEK_INFO.dateRange}</p>

                            {/* Main Nav Tabs */}
                            <div className="flex justify-center space-x-1 sm:space-x-4 mt-4 overflow-x-auto hide-scrollbar pb-2">
                                <button onClick={() => setActiveTab('devotional')} className={`flex flex-col sm:flex-row items-center gap-2 px-4 py-2 rounded-xl transition-all ${activeTab === 'devotional' ? 'bg-amber-50 text-amber-700 ring-1 ring-amber-200' : 'text-stone-400 hover:text-stone-600'}`}>
                                    <IconSun className="w-5 h-5" />
                                    <span className="text-xs sm:text-sm font-medium">Daily</span>
                                </button>
                                <button onClick={() => setActiveTab('youth')} className={`flex flex-col sm:flex-row items-center gap-2 px-4 py-2 rounded-xl transition-all ${activeTab === 'youth' ? 'bg-amber-50 text-amber-700 ring-1 ring-amber-200' : 'text-stone-400 hover:text-stone-600'}`}>
                                    <IconUsers className="w-5 h-5" />
                                    <span className="text-xs sm:text-sm font-medium">Youth</span>
                                </button>
                                <button onClick={() => setActiveTab('songs')} className={`flex flex-col sm:flex-row items-center gap-2 px-4 py-2 rounded-xl transition-all ${activeTab === 'songs' ? 'bg-amber-50 text-amber-700 ring-1 ring-amber-200' : 'text-stone-400 hover:text-stone-600'}`}>
                                    <IconMusic className="w-5 h-5" />
                                    <span className="text-xs sm:text-sm font-medium">Music</span>
                                </button>
                                <button onClick={() => setActiveTab('study')} className={`flex flex-col sm:flex-row items-center gap-2 px-4 py-2 rounded-xl transition-all ${activeTab === 'study' ? 'bg-amber-50 text-amber-700 ring-1 ring-amber-200' : 'text-stone-400 hover:text-stone-600'}`}>
                                    <IconBookOpen className="w-5 h-5" />
                                    <span className="text-xs sm:text-sm font-medium">Study</span>
                                </button>
                            </div>
                        </div>
                    </header>

                    {/* Secondary Day Navigation (Horizontal Scroll) - Only show for Daily, Youth, Songs */}
                    {activeTab !== 'study' && (
                        <div className="bg-white border-b border-stone-200 py-2 px-4 shadow-sm z-10">
                            <div className="max-w-4xl mx-auto">
                                <div className="flex space-x-3 overflow-x-auto hide-scrollbar pb-1 sm:justify-center">
                                    {DEVOTIONAL_DATA.map((d) => (
                                        <button
                                            key={d.id}
                                            onClick={() => setActiveDayId(d.id)}
                                            className={`flex-shrink-0 flex flex-col items-center justify-center w-12 h-14 rounded-lg transition-all border ${activeDayId === d.id ? 'bg-stone-800 text-white border-stone-800 shadow-md transform scale-105' : 'bg-white text-stone-500 border-stone-200 hover:border-stone-300'}`}
                                        >
                                            <span className="text-[10px] font-bold uppercase">{d.day}</span>
                                            <span className={`text-lg font-bold leading-none ${activeDayId === d.id ? 'text-amber-400' : 'text-stone-800'}`}>{d.date.split(' ')[1]}</span>
                                        </button>
                                    ))}
                                </div>
                            </div>
                        </div>
                    )}

                    {/* Content Area - Scrollable */}
                    <main className="flex-1 overflow-y-auto p-4 pb-20">
                        {activeTab === 'devotional' && renderDevotional()}
                        {activeTab === 'youth' && renderYouth()}
                        {activeTab === 'songs' && renderSongs()}
                        {activeTab === 'study' && renderStudy()}
                        {renderFooter()}
                    </main>

                    <Toast message="Copied to Clipboard!" show={showToast} onClose={() => setShowToast(false)} />
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
