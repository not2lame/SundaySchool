<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Come, Follow Me Companion</title>
    
    <!-- Tailwind CSS (Styling) -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Fonts: Inter (Body) and Merriweather (Headings) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Merriweather:ital,wght@0,300;0,400;0,700;1,400&display=swap" rel="stylesheet">
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    
    <!-- Babel (to compile JSX in browser) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>

    <!-- Tailwind Configuration -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        serif: ['Merriweather', 'serif'],
                    },
                    colors: {
                        stone: { 50: '#fafaf9', 100: '#f5f5f4', 200: '#e7e5e4', 300: '#d6d3d1', 400: '#a8a29e', 500: '#78716c', 600: '#57534e', 700: '#44403c', 800: '#292524', 900: '#1c1917' },
                        amber: { 50: '#fffbeb', 100: '#fef3c7', 200: '#fde68a', 300: '#fcd34d', 400: '#fbbf24', 500: '#f59e0b', 600: '#d97706', 700: '#b45309', 800: '#92400e', 900: '#78350f' }
                    }
                }
            }
        }
    </script>

    <style>
        .hide-scrollbar::-webkit-scrollbar { display: none; }
        .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        .fade-in { animation: fadeIn 0.5s ease-in; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* Print Styles */
        @media print {
            body * {
                visibility: hidden;
            }
            #printable-study-section, #printable-study-section * {
                visibility: visible;
            }
            #printable-study-section {
                position: absolute;
                left: 0;
                top: 0;
                width: 100%;
                margin: 0;
                padding: 0;
                border: none;
                box-shadow: none;
            }
            .no-print {
                display: none !important;
            }
        }
    </style>
</head>
<body class="bg-stone-100 text-stone-800 h-screen flex flex-col overflow-hidden">

    <!-- Loading Fallback -->
    <div id="root" class="h-full flex flex-col">
        <div class="flex items-center justify-center h-full bg-stone-100 text-stone-500 p-4 text-center">
            <div>
                <h2 class="text-xl font-bold mb-2">Loading App...</h2>
                <p class="text-sm">If this takes longer than a few seconds, your network may be blocking the script libraries (React).</p>
            </div>
        </div>
    </div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // ==========================================
        // DATA CONSTANTS
        // ==========================================

        const WEEK_INFO = {
            title: "Noah Found Grace in the Eyes of the Lord",
            dateRange: "February 9‚Äì15, 2026",
            valediction: "May we, like Noah, find grace in the eyes of the Lord by remaining faithful and just in our generation."
        };

        const DEVOTIONAL_DATA = [
            { id: 'monday', day: 'Mon', fullDay: 'Monday', date: 'Feb 9', title: 'Grace in the Midst of the Storm üåä', text: 'In a world that can feel increasingly "filled with violence" and "corrupt," we can find peace just as Noah did. The scriptures tell us that Noah "found grace in the eyes of the Lord." This wasn\'t because the world around him was easy; it was because he walked with God. Even when things feel chaotic, the Lord\'s grace is available to help us stand firm.', prompt: 'Reflection: Think of a time recently when you felt "corrupt" influences around you. How can seeking the Lord\'s grace change your perspective on those challenges?', scriptureRef: 'Moses 8:27', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/pgp/moses/8?lang=eng&id=p27', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-old-testament-2026/07?lang=eng' },
            { id: 'tuesday', day: 'Tue', fullDay: 'Tuesday', date: 'Feb 10', title: 'The Prophet is Our Watchman on the Tower üèóÔ∏è', text: 'God‚Äôs pattern for safety hasn\'t changed. Just as He called Noah to prepare an ark, He calls living prophets today to guide us through spiritual floods. Following the prophet isn\'t about blind obedience; it‚Äôs about recognizing a loving Heavenly Father‚Äôs "spiritual blueprint" to keep our families safe from the "spiritual contagion" of the world.', prompt: 'Challenge: Look up one specific invitation or warning from the most recent General Conference. What is one small adjustment you can make in your life this week to follow that counsel?', scriptureRef: 'Moses 8:16-20', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/pgp/moses/8?lang=eng&id=p16-20', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-old-testament-2026/07?lang=eng' },
            { id: 'wednesday', day: 'Wed', fullDay: 'Wednesday', date: 'Feb 11', title: 'Mercy in the Reset üïäÔ∏è', text: 'While the Flood is often viewed through the lens of justice, it was also a profound act of mercy. Elder Neal A. Maxwell taught that wickedness had reached a point where "spirits could not, in justice, be sent here." The Flood allowed for a new beginning, ensuring that God\'s children could be born into an environment where they could exercise their agency and learn the gospel in the spirit world.', prompt: 'Reflection: How does viewing the Flood as an act of mercy change your understanding of God\'s love for all His children, both the living and the dead?', scriptureRef: 'Genesis 6:11-13', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/ot/gen/6?lang=eng&id=p11-13', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-old-testament-2026/07?lang=eng' },
            { id: 'thursday', day: 'Thu', fullDay: 'Thursday', date: 'Feb 12', title: 'Covered by the Atonement üõ°Ô∏è', text: 'The Lord told Noah to "pitch" the ark to make it waterproof. Interestingly, the Hebrew word for "pitch" shares the same root as the word for "atone." Just as the pitch sealed the ark against the rising waters, the Atonement of Jesus Christ provides us with a covering that covers our sins and shields us from the adversary\'s power.', prompt: 'Reflection: What are the "waters" currently threatening your peace, and how can you more fully apply the "covering" of the Savior‚Äôs Atonement today?', scriptureRef: 'Genesis 6:14', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/ot/gen/6?lang=eng&id=p14', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-old-testament-2026/07?lang=eng' },
            { id: 'friday', day: 'Fri', fullDay: 'Friday', date: 'Feb 13', title: 'Rainbows and Covenants üåà', text: 'The rainbow is more than just a beautiful natural phenomenon; it is a "token" of God\'s covenant. Every time we see it, we are reminded that God keeps His promises. We have tokens in our lives today‚Äîlike the sacrament‚Äîthat serve as constant reminders of our personal covenants to always remember Him.', prompt: 'Challenge: Identify a "token" or symbol in your home (a picture, a ring, a scripture) that reminds you of your covenants. Place it somewhere you will see it often today.', scriptureRef: 'Genesis 9:12-17', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/ot/gen/9?lang=eng&id=p12-17', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-old-testament-2026/07?lang=eng' },
            { id: 'saturday', day: 'Sat', fullDay: 'Saturday', date: 'Feb 14', title: 'Avoiding "Counterfeit" Heavens üß±', text: 'The people of Babel tried to reach heaven by building a tower, but they tried to do it "their way" rather than God\'s way. Elder D. Todd Christofferson taught that there is no "my way" if we follow Christ. True "towers" (like temples) are built through covenants and obedience, not through our own pride or technology.', prompt: 'Reflection: Are there areas in your life where you are trying to find happiness or "reach heaven" through your own strength rather than through the Savior?', scriptureRef: 'Genesis 11:1-9', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/ot/gen/11?lang=eng&id=p1-9', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-old-testament-2026/07?lang=eng' },
            { id: 'sunday', day: 'Sun', fullDay: 'Sunday', date: 'Feb 15', title: 'Taking Upon Us His Name üè∑Ô∏è', text: 'While the people of Babel sought to "make a name" for themselves. We reach heaven not by making our own name great, but by taking upon ourselves the name of Jesus Christ through sacred ordinances.', prompt: 'Challenge: As you partake of the sacrament today, focus specifically on the promise to "take upon [you] the name of thy Son." What does that mean for you this coming week?', scriptureRef: 'Helaman 3:28', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/bofm/hel/3?lang=eng&id=p28', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-old-testament-2026/07?lang=eng' }
        ];

        const YM_DATA = [
             { id: 'monday', day: 'Mon', date: 'Feb 9', title: 'Walking with God üë£', text: 'The world in Noah‚Äôs day was a mess‚Äîfilled with "violence" and "corruption". It sounds a lot like the world today, right? But while everyone else was doing their own thing, Noah "found grace in the eyes of the Lord" because he "walked with God". Even if you‚Äôre the only guy in your friend group trying to keep the standards, you aren\'t walking alone.', prompt: 'Challenge: Set a "walking with God" goal today. Try to pray or check your scriptures before you check your phone for the first time.', scriptureRef: 'Moses 8:27', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/pgp/moses/8?lang=eng&id=p27', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-old-testament-2026/07?lang=eng' },
            { id: 'tuesday', day: 'Tue', date: 'Feb 10', title: 'The Prophet‚Äôs "Blueprint" üìê', text: 'God didn\'t just tell the people of Noah\'s day "good luck with the flood." He gave them Noah, a Prophet following his pattern throughout history. Today, our "watchman on the tower" is the living prophet. He sees the spiritual storms coming long before we do. Following his counsel isn\'t a chore; it‚Äôs literally building your own ark of safety.', prompt: 'Challenge: Check the latest For the Strength of Youth magazine or a recent prophet\'s talk. What is one specific "warning" he‚Äôs given that applies to you right now?', scriptureRef: 'Moses 8:16-20', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/pgp/moses/8?lang=eng&id=p16-20', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-old-testament-2026/07?lang=eng' },
            { id: 'wednesday', day: 'Wed', date: 'Feb 11', title: 'Priesthood "Perfect" üõ°', text: 'The scriptures say Noah was "perfect in his generation". That doesn\'t mean he never made a mistake or didn\'t need to repent. "Mortal perfection" just means doing your best to perform your duty and keep the laws. As an Aaronic Priesthood holder, you don\'t have to be a robot; you just have to have integrity and keep trying.', prompt: 'Reflection: President Nelson said if we do our best, the Lord will bless us. How does that take the pressure off of trying to be "flawless"?', scriptureRef: 'Genesis 6:9', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/ot/gen/6?lang=eng&id=p9', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-old-testament-2026/07?lang=eng' },
            { id: 'thursday', day: 'Thu', date: 'Feb 12', title: 'Spiritual Immunization üíâ', text: 'Think of the "pitch" Noah used to seal the ark‚Äîit was a tar-like substance that made it waterproof. The Hebrew word for "pitch" is the same root as "atone". The Atonement of Jesus Christ is your "waterproofing". It‚Äôs like a spiritual vaccine that helps you detect and reject darkness before it gets inside your heart.', prompt: 'Challenge: Take 5 minutes of silence today to just listen for the Spirit. That‚Äôs your "immune system" getting a boost.', scriptureRef: 'Genesis 6:14', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/ot/gen/6?lang=eng&id=p14', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-old-testament-2026/07?lang=eng' },
            { id: 'friday', day: 'Fri', date: 'Feb 13', title: 'Real Tokens vs. Fake Flexes üåà', text: 'The rainbow was a "token" or a reminder of a covenant. In the world, guys often try to "flex" or show off their own name. But as priesthood holders, we have better tokens‚Äîlike the bread and water of the sacrament‚Äîthat remind us of our covenant to take His name upon us.', prompt: 'Reflection: What are some "reminders" you use (like a CTR ring or a scripture on your lock screen) to help you stay on track?', scriptureRef: 'Genesis 9:12-16', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/ot/gen/9?lang=eng&id=p12-16', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-old-testament-2026/07?lang=eng' },
            { id: 'saturday', day: 'Sat', date: 'Feb 14', title: 'Don\'t Build a Counterfeit üß±', text: 'The guys at the Tower of Babel were smart‚Äîthey used the best "technology" and "skill" of their time to try and get to heaven their own way. They failed because there is no "my way" to heaven, we can only get there through Jesus Christ. Building your life on "counterfeit" things like popularity or gaming stats won\'t get you to where God wants you to be.', prompt: 'Challenge: Write down one thing that sometimes takes you away from God. Then, write down one thing that brings you closer to Him (like the temple). Focus on the second one today.', scriptureRef: 'Genesis 11:1-9', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/ot/gen/11?lang=eng&id=p1-9', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-old-testament-2026/07?lang=eng' },
            { id: 'sunday', day: 'Sun', date: 'Feb 15', title: 'The Power of the Name üõ°Ô∏è', text: 'The people of Babel wanted to "make a name" for themselves. But, it is only through the name of Christ that we can be saved. When you pass or bless the sacrament today, remember that you are helping others take His name upon them. That‚Äôs the most important "name" you‚Äôll ever represent.', prompt: 'Reflection: How does holding the Aaronic Priesthood help you feel like you belong to Christ‚Äôs "lineage"?', scriptureRef: 'Helaman 3:28', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/bofm/hel/3?lang=eng&id=p28', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-old-testament-2026/07?lang=eng' }
        ];

        const YW_DATA = [
            { id: 'monday', day: 'Mon', date: 'Feb 9', title: 'Finding Your "Grace" Era ‚ú®', text: 'The world in Noah‚Äôs day was described as "corrupt" and "filled with violence"‚Äîwhich can feel a lot like the drama we see online or at school today. But right in the middle of it, Noah "found grace in the eyes of the Lord". Finding grace isn\'t about being perfect; it\'s about walking with God so you can feel His love even when things around you are messy.', prompt: 'Reflection: What is one way you can "walk with God" today to feel His grace in your daily routine?', scriptureRef: 'Moses 8:27', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/pgp/moses/8?lang=eng&id=p27', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-old-testament-2026/07?lang=eng' },
            { id: 'tuesday', day: 'Tue', date: 'Feb 10', title: 'Your Personal Fortress üè∞', text: 'The Lord doesn\'t leave us defenseless against the world\'s "spiritual contagion". Elder Ronald A. Rasband taught that our homes can be "fortresses against the evils of the world" when we filter what enters through our phones and invite the Spirit in. You have the power to create a "holy place" right in your own room.', prompt: 'Challenge: Cleanse your "digital environment" today. Unfollow or mute one account that doesn\'t make you feel the Spirit.', scriptureRef: 'Doctrine and Covenants 45:32', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/dc-testament/dc/45?lang=eng&id=p32', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-old-testament-2026/07?lang=eng' },
            { id: 'wednesday', day: 'Wed', date: 'Feb 11', title: 'The "Pitch" of Protection üõ°Ô∏è', text: 'When Noah built the ark, God told him to "pitch it within and without," which meant sealing it with a waterproof coating. The Hebrew word for "pitch" is actually the root word for "atone". Just like the pitch kept the scary floodwaters out, the Atonement of Jesus Christ provides a "protective covering" that shields your heart from the adversary.', prompt: 'Reflection: How has the Savior‚Äôs Atonement acted as a "waterproof" seal for you during a difficult or "stormy" time?', scriptureRef: 'Genesis 6:14', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/ot/gen/6?lang=eng&id=p14', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-old-testament-2026/07?lang=eng' },
            { id: 'thursday', day: 'Thu', date: 'Feb 12', title: 'Heeding the Watchman üïäÔ∏è', text: 'Prophets are like watchmen on a tower who see danger while it is still far off. In Noah\'s day, God gave the people 120 years to repent because He is "longsuffering" and merciful. Our prophet today gives us "invitations and promised blessings" that act as our modern-day ark. Following him isn\'t about rules; it\'s about staying safe.', prompt: 'Challenge: Find one quote from a female leader in the last General Conference. How does her advice help you feel safe?', scriptureRef: 'Moses 8:16-20', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/pgp/moses/8?lang=eng&id=p16-20', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-old-testament-2026/07?lang=eng' },
            { id: 'friday', day: 'Fri', date: 'Feb 13', title: 'Real Worth vs. "Making a Name" üß±', text: 'The people at the Tower of Babel were obsessed with "making a name" for themselves through their own technology and skill. It was basically a counterfeit way to get to heaven. We don\'t need to build "towers" of popularity or social status to be seen. We find our true identity by taking upon us the name of Jesus Christ.', prompt: 'Reflection: Do you ever feel like you\'re trying to build a "tower" to impress others? How does focusing on Christ change that?', scriptureRef: 'Genesis 11:1-4', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/ot/gen/11?lang=eng&id=p1-4', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-old-testament-2026/07?lang=eng' },
            { id: 'saturday', day: 'Sat', date: 'Feb 14', title: 'Tokens of Love üåà', text: 'God gave the rainbow as a "token" or a symbol to help Noah\'s family remember His covenants. We have symbols today, like the sacrament, that help us remember our baptismal covenant to follow Jesus. These tokens aren\'t just for show; they are reminders that God will always keep His promises to you.', prompt: 'Challenge: Draw or find a picture of a rainbow today. Write one promise God has made to you in the scriptures on it.', scriptureRef: 'Genesis 9:12-16', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/ot/gen/9?lang=eng&id=p12-16', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-old-testament-2026/07?lang=eng' },
            { id: 'sunday', day: 'Sun', date: 'Feb 15', title: 'Staying Near the Temple ‚õ©Ô∏è', text: 'While the Tower of Babel took people away from God, temples bring us nearer to Him. True temples gather people to God‚Äôs presence through covenants. As a Young Woman, you are preparing to make those sacred temple covenants that will seal your family together forever.', prompt: 'Reflection: As you take the sacrament today, think about how it prepares you to eventually "reach unto heaven" through the temple.', scriptureRef: 'Helaman 3:28', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/bofm/hel/3?lang=eng&id=p28', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-old-testament-2026/07?lang=eng' }
        ];

        const SONGS_DATA = [
            { id: 'monday', day: 'Mon', title: 'Grace in the Midst of the Storm', devotionalText: 'In a world that can feel increasingly "filled with violence" and "corrupt," we can find peace just as Noah did. The scriptures tell us that Noah "found grace in the eyes of the Lord." This wasn\'t because the world around him was easy; it was because he walked with God. Even when things feel chaotic, the Lord\'s grace is available to help us stand firm.', 
                hymnTitle: 'Master, the Tempest Is Raging', hymnLink: 'https://www.youtube.com/watch?v=Ef2xgL45qX4', hymnAnalysis: 'This hymn vividly captures the contrast between the "chaotic" world and the "peace" found through the Savior. Just as Noah faced a world filled with violence, the lyrics describe a sea that is "billow-tossed" and a sky "overshadowed with blackness." The plea "Master, the tempest is raging!" mirrors our own cries for help when we feel surrounded by corrupting influences. The power of the hymn lies in the Savior\'s command: "Peace, be still." It reinforces the devotional\'s message that the Lord\'s grace is what allows us to stand firm. As the music shifts from the turbulent verses to the calm, resolute chorus, we are reminded that no matter how loud the "storm" of the world becomes, the Savior\'s voice has the authority to bring stillness to our souls.', 
                songTitle: 'Peace in Christ', songArtist: 'Claire Ryann Crosby and Dave Crosby', songLink: 'https://www.youtube.com/watch?v=Waitmz6C100', songAnalysis: '"Peace in Christ" serves as a gentle modern witness to the grace Noah found. The lyrics, "When there‚Äôs no peace on earth, there is peace in Christ," directly address the feeling of living in a world that feels increasingly corrupt. It suggests that peace is not found by changing our surroundings, but by changing our focus. Listening to this song helps internalize the reflection question about perspective. The simple, pure melody encourages a "childlike" trust in the Lord‚Äôs grace. It teaches that even when the "waters" of life are high, the Savior provides a source of buoyancy that is independent of world conditions, much like the ark provided safety for Noah.' },
            { id: 'tuesday', day: 'Tue', title: 'The Prophet is Our Watchman on the Tower', devotionalText: 'God‚Äôs pattern for safety hasn\'t changed. Just as He called Noah to prepare an ark, He calls living prophets today to guide us through spiritual floods. Following the prophet isn\'t about blind obedience; it‚Äôs about recognizing a loving Heavenly Father‚Äôs "spiritual blueprint" to keep our families safe from the "spiritual contagion" of the world.', 
                hymnTitle: 'The Iron Rod', hymnLink: 'https://www.youtube.com/watch?v=l57vI6Z-SdQ', hymnAnalysis: '"The Iron Rod" is a perfect musical representation of following the "spiritual blueprint" provided by prophets. The "rod of iron" represents the word of God, which is delivered to us through the watchmen on the tower. The lyrics, "To the council of the Seer, Just and holy Christians, give a willing ear," emphasize that following the prophet is an act of faith and recognition of God‚Äôs love. The steady, marching rhythm of the song instills a sense of purpose and safety. It reminds us that while the "mists of darkness" (or the "spiritual contagion" mentioned in the devotional) may try to obscure our path, staying close to the prophet‚Äôs words keeps us on the direct course to the tree of life.', 
                songTitle: 'Follow the Prophet', songArtist: 'Primary Song', songLink: 'https://www.churchofjesuschrist.org/media/video/2023-07-0140-follow-the-prophet?lang=eng', songAnalysis: 'While often a children\'s song, the message of "Follow the Prophet" is the core principle of the day\'s devotional. The specific verse about Noah reminds us that "the people began to sin" and "the Lord was sad," yet He provided a way of escape through a prophet. It highlights the role of the prophet as a "watchman" who sees the flood before it arrives. The repetitive, catchy nature of the song reinforces the "pattern for safety" that God has established. It simplifies the complex challenges of the world into a single, actionable solution: listening to the Lord\'s chosen messenger. This song encourages us to take the challenge of following recent Conference counsel seriously, viewing it as our modern-day "ark."' },
            { id: 'wednesday', day: 'Wed', title: 'Mercy in the Reset', devotionalText: 'While the Flood is often viewed through the lens of justice, it was also a profound act of mercy. Elder Neal A. Maxwell taught that wickedness had reached a point where "spirits could not, in justice, be sent here." The Flood allowed for a new beginning, ensuring that God\'s children could be born into an environment where they could exercise their agency and learn the gospel in the spirit world.', 
                hymnTitle: 'How Gentle God‚Äôs Commands', hymnLink: 'https://www.youtube.com/watch?v=-JIHdBqWTr0&list=RD-JIHdBqWTr0&start_radio=1', hymnAnalysis: 'This hymn reframes the idea of God\'s "justice" into the context of His "mercy." The lyrics, "How gentle God\'s commands! How kind his precepts are!" suggest that even the Lord‚Äôs most difficult interventions are motivated by a desire for our "sweet refreshment." It aligns with the idea that the Flood was a "reset" meant to protect the agency of future spirits. The soft, comforting melody of the hymn helps us feel the "gentleness" behind the "reset." It encourages us to drop our "burden at his feet," trusting that God‚Äôs long-term plan is always focused on the salvation and progress of His children, even when the methods seem overwhelming in the moment.', 
                songTitle: 'Consider the Lilies', songArtist: 'The Tabernacle Choir', songLink: 'https://www.youtube.com/watch?v=OevE4olt6_I', songAnalysis: '"Consider the Lilies" is a beautiful meditation on God\'s individual care for His children. The song reminds us that He "really cares when your head is bowed" and that His "eyes are full of mercy." This connects deeply to the devotional\'s point about the spirits who were waiting to be born‚ÄîGod\'s mercy extended even to them by ensuring they were born into a better environment. The sweeping orchestration and emotional depth of the song invite us to see God as a loving Parent rather than a distant judge. It helps answer the reflection question by illustrating that God‚Äôs love is all-encompassing, seeking the best possible outcome for every soul, whether they are on this side of the veil or the other.' },
            { id: 'thursday', day: 'Thu', title: 'Covered by the Atonement', devotionalText: 'The Lord told Noah to "pitch" the ark to make it waterproof. Interestingly, the Hebrew word for "pitch" shares the same root as the word for "atone." Just as the pitch sealed the ark against the rising waters, the Atonement of Jesus Christ provides us with a covering that covers our sins and shields us from the adversary\'s power.', 
                hymnTitle: 'Savior, Redeemer of My Soul', hymnLink: 'https://www.youtube.com/watch?v=jQTWl7O1cdo&list=RDjQTWl7O1cdo&start_radio=1', hymnAnalysis: 'This hymn is a personal plea for the "covering" of the Atonement. The lyrics, "Savior, redeemer of my soul, whose mighty hand hath made me whole," speak directly to the healing and shielding power described in the devotional. The mention of being "made whole" mirrors the way the pitch made the ark "waterproof"‚Äîcomplete and protected. The humble, reverent tone of the hymn invites the Spirit of repentance and peace. As we listen to the words "I own thy pow‚Äôr, I own thy hand," we are prompted to reflect on our own "waters" and acknowledge that only the Savior has the power to seal our lives against the rising tides of sin and despair.', 
                songTitle: 'Gethsemane', songArtist: 'Melanie Hoffman', songLink: 'https://www.youtube.com/watch?v=j-C3_2MdbpQ', songAnalysis: '"Gethsemane" focuses on the specific location and act where the "pitch" or "covering" was prepared for us. The song describes the Savior taking on our "pain" and "sorrow," creating the shield that protects us today. The line "The biggest battle that ever was won... this was done by Jesus" emphasizes that our safety is entirely dependent on His victory over sin and death. The song‚Äôs simple narrative style makes the profound doctrine of the Atonement accessible and personal. It reinforces the idea that we are not meant to face the "rising waters" alone; we are meant to enter the "ark" of His Atonement, which has already been "pitched" and prepared with His love.' },
            { id: 'friday', day: 'Fri', title: 'Rainbows and Covenants', devotionalText: 'The rainbow is more than just a beautiful natural phenomenon; it is a "token" of God\'s covenant. Every time we see it, we are reminded that God keeps His promises. We have tokens in our lives today‚Äîlike the sacrament‚Äîthat serve as constant reminders of our personal covenants to always remember Him.', 
                hymnTitle: 'I Feel My Savior‚Äôs Love', hymnLink: 'https://www.youtube.com/watch?v=z9j1oWh421M', hymnAnalysis: 'The "rainbow" is a visual token, and this hymn describes the "feeling" that often accompanies those tokens‚Äîthe feeling of the Savior‚Äôs love. The lyrics mention that His love is "felt in the sun" and "in the rain," echoing the natural elements of the rainbow while pointing to the deeper spiritual reality of God\'s promises. The light, melodic quality of the hymn evokes a sense of hope and renewal. It reminds us that covenants aren\'t just legal agreements; they are "tokens" of a living relationship. As the children\'s choir joins in, the song reinforces the purity and constancy of God‚Äôs love, encouraging us to look for our own "tokens" with a grateful heart.', 
                songTitle: 'Glorious', songArtist: 'Stephanie Mabey', songLink: 'https://www.youtube.com/watch?v=0ShP9JaK0nw', songAnalysis: '"Glorious" is a song about recognizing our divine nature and the "symphony" of God‚Äôs plan. This connects to the idea of covenants being "tokens" of our identity and our promise to Him. The lyrics "It‚Äôs like a symphony, just keep listening" encourage us to look for the small, beautiful reminders of God\'s presence in our lives. This song helps us see our "tokens" in a new light‚Äînot just as static objects, but as part of a "glorious" larger picture. It inspires us to complete the challenge of placing a symbol in our home, viewing it as a way to "stay in tune" with our covenants throughout a busy day.' },
            { id: 'saturday', day: 'Sat', title: 'Avoiding "Counterfeit" Heavens', devotionalText: 'The people of Babel tried to reach heaven by building a tower, but they tried to do it "their way" rather than God\'s way. Elder D. Todd Christofferson taught that there is no "my way" if we follow Christ. True "towers" (like temples) are built through covenants and obedience, not through our own pride or technology.', 
                hymnTitle: 'High on the Mountain Top', hymnLink: 'https://www.youtube.com/watch?v=9UDCZ1LlwnM', hymnAnalysis: 'This hymn presents the true alternative to the Tower of Babel: the "Mountain of the Lord" or the temple. While the people of Babel built a tower out of pride to "make a name," the Lord‚Äôs house is established for "all the nations" to "hear his voice." The lyrics "His house shall be established... Above the mountains high" emphasize that true elevation comes from God‚Äôs power, not human brick-making. The triumphant, brass-heavy arrangement of the hymn creates a stark contrast to the confusion of Babel. it reminds us that there is a clear, "standard" or "banner" to follow. The music inspires a desire to build our lives on the "firm foundation" of temple covenants rather than the "counterfeit" towers of personal pride or worldly success.', 
                songTitle: 'The Lord Is My Light', songArtist: 'BYU Singers', songLink: 'https://www.youtube.com/watch?v=pjs2amLBZQo', songAnalysis: 'This song addresses the reflection question about relying on our own strength. The lyrics "The Lord is my light, then why should I fear? By day and by night His presence is near" remind us that our guidance must come from Him. If we try to light our own way (like building our own tower), we will eventually find ourselves in darkness and confusion. The soaring harmonies and clear message provide a spiritual "compass." It reinforces the idea that we reach "heaven" by following the Light of the World, not by constructing our own paths. It encourages a humble reliance on the Savior, acknowledging that "of myself I can do nothing."' },
            { id: 'sunday', day: 'Sun', title: 'Taking Upon Us His Name', devotionalText: 'While the people of Babel sought to "make a name" for themselves. We reach heaven not by making our own name great, but by taking upon ourselves the name of Jesus Christ through sacred ordinances.', 
                hymnTitle: 'Be Still, My Soul', hymnLink: 'https://www.youtube.com/watch?v=qPsG8ffrzr0', hymnAnalysis: 'Taking upon us the name of Christ requires a "stillness" of soul and a surrender of our own ego‚Äîthe opposite of the Babel mindset. The lyrics "Be still, my soul: The Lord is on thy side" remind us that our greatness is found in our association with Him. As we "take His name," we are choosing His side and His path. The hauntingly beautiful melody of "Finlandia" invites deep introspection, which is perfect for the challenge of partaking of the sacrament. It helps us focus on the "promise" of the covenant, realizing that by taking His name, we are also taking upon us His peace, His strength, and His perspective for the coming week.', 
                songTitle: 'His Hands', songArtist: 'Kenneth Cope', songLink: 'https://www.youtube.com/watch?v=HcIpuTzFiO4', songAnalysis: '"His Hands" is a powerful contemporary witness of what it means to follow the Savior and "take upon us His name." The lyrics describe the Savior‚Äôs hands‚Äîhands that healed, served, and were ultimately pierced for us. To take His name is to strive to make our hands like His. This song provides a concrete way to think about the sacrament challenge. It asks us to consider how our actions (our "hands") will reflect His name in the coming week. The emotional climax of the song reinforces the "sacred ordinance" of the Atonement, leaving us with a renewed desire to be true to the name we have taken upon ourselves.' }
        ];

        const STUDY_GUIDE_DATA = [
            {
                title: "Background",
                content: [
                    "This week‚Äôs lesson focuses on two major events in early biblical history: the Flood and the Tower of Babel. In the days of Noah, the earth had become corrupt and filled with violence. For 120 years, Noah preached repentance, warning the people of the impending destruction if they did not turn back to God. Sadly, the people rejected these warnings, leading to the Flood, which cleansed the earth.",
                    "Later, the people of Babel attempted to build a great tower to reach heaven and \"make a name\" for themselves. This was a counterfeit attempt to reach God without following His established pattern of covenants.",
                    <span>Full Lesson: <a href="https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-old-testament-2026/07?lang=eng" target="_blank" rel="noopener noreferrer" className="text-amber-600 hover:underline break-all">https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-old-testament-2026/07?lang=eng</a></span>
                ]
            },
            {
                title: "Introduction: Living in the Latter Days",
                discussionPoint: "The conditions of Noah‚Äôs day‚Äîcorruption, violence, and wickedness‚Äîmirror the conditions of our own time. Jesus Christ Himself compared the days of His Second Coming to the days of Noah. However, the story is not just a warning; it is a guide on how to find safety through grace and obedience.",
                quote: "Joseph Smith‚ÄîMatthew 1:41: \"For as it was in the days of Noah, so it shall be also at the coming of the Son of Man;\"",
                questions: [
                    {
                        q: "In what ways do you see the description of Noah‚Äôs day‚Äî\"corrupt\" and \"filled with violence\"‚Äîreflected in our world today?",
                        a: "[We see violence in wars, crime, and media. Corruption is evident in the breakdown of moral values and the family.]"
                    },
                    {
                        q: "The text mentions that these accounts teach us \"what to do about it.\" What did Noah and the brother of Jared do that ensured their safety?",
                        a: "[Noah \"found grace in the eyes of the Lord\" (Moses 8:27) by remaining just and perfect in his generation. The brother of Jared cried unto the Lord and was guided. They both turned to the Lord for protection rather than relying on the world.]"
                    }
                ]
            },
            {
                title: "Spiritual Safety in Following the Prophet",
                discussionPoint: "Just as Noah was a watchman for his people, living prophets today act as watchmen on the tower. They see dangers from afar and provide us with warnings and invitations that, if followed, bring spiritual safety. The supplemental material emphasizes that \"obedience is safety\" and that prophets provide a \"spiritual blueprint\" to keep our families safe.",
                quote: "Moses 8:23‚Äì24: \"And it came to pass that Noah continued his preaching unto the people, saying: Hearken, and give heed unto my words...\"",
                questions: [
                    {
                        q: "Reviewing Moses 8:23‚Äì24, what was the core message Noah taught? How is this similar to what our prophet teaches today?",
                        a: "[Noah taught faith in Jesus Christ, repentance, baptism, and receiving the Holy Ghost. This is the same Doctrine of Christ taught by modern prophets.]"
                    },
                    {
                        q: "In the supplemental reading \"Finding Safety in Wicked Times,\" prophets are described as \"watchmen.\" Why is this imagery significant for us?",
                        a: "[Watchmen are elevated and can see dangers before those on the ground can. Prophets can see spiritual dangers coming and warn us before they arrive.]"
                    }
                ]
            },
            {
                title: "The Flood as an Act of Mercy",
                discussionPoint: "It can be difficult to reconcile a loving God with the destruction of the Flood. However, modern revelation clarifies that the corruption of the people had reached a point where children growing up in that society had no chance to choose righteousness. Ending their mortal lives was an act of mercy to prevent further generations from being spiritually damned by their parents' wickedness.",
                quote: "Genesis 6:5‚Äì7: \"And God saw that the wickedness of man was great in the earth... And the Lord said, I will destroy man whom I have created...\"",
                questions: [
                    {
                        q: "How does the perspective taught by Elder Neal A. Maxwell change your understanding of the Flood?",
                        a: "[Elder Maxwell explained that corruption had reached an \"agency-destroying point.\" Spirits could not be sent there in justice. Stopping the corruption allowed future generations to come to earth in a better environment and allowed the wicked spirits to enter the spirit world where they could eventually be taught.]"
                    },
                    {
                        q: "How does the \"pitch\" used on the ark relate to the Atonement of Jesus Christ?",
                        a: "[The Hebrew word for \"pitch\" (used to seal the ark) is the same root word for \"atone\" (kaphar), which means \"to cover.\" Just as the pitch covered the ark and kept the deadly waters out, the Atonement of Jesus Christ covers us and protects us from spiritual death.]"
                    }
                ]
            },
            {
                title: "Tokens and Covenants",
                discussionPoint: "God uses physical symbols to help us remember spiritual covenants. The rainbow was given to Noah as a token of the covenant that God would spare the earth from another flood. In our day, we have symbols like the sacrament bread and water, or the temple garment, to remind us of our covenants.",
                quote: "Genesis 9:12‚Äì13: \"And God said, This is the token of the covenant which I make between me and you... I do set my bow in the cloud...\"",
                questions: [
                    {
                        q: "Why do you think the Lord uses visual or physical \"tokens\" to help us remember covenants?",
                        a: "[We are forgetful people. Physical reminders like the rainbow, the sacrament, or the temple help anchor our minds to spiritual promises.]"
                    },
                    {
                        q: "How does creating a \"Holy Place\" in our home act as a token or reminder of our covenants?",
                        a: "[Our homes can be \"fortresses\" or arks. By filtering media and inviting the Spirit, our physical home becomes a symbol of our separation from the wickedness of the world, reminding us of who we are.]"
                    }
                ]
            },
            {
                title: "The Tower of Babel vs. The Temple",
                discussionPoint: "The people of Babel tried to build a tower to \"reach unto heaven\" and \"make a name\" for themselves (Genesis 11:4). This was essentially a counterfeit temple‚Äîan attempt to reach God through technology and human effort rather than through divine authority and covenants. In contrast, we reach heaven by taking upon us the \"name\" of Jesus Christ.",
                quote: "Genesis 11:4: \"And they said, Go to, let us build us a city and a tower, whose top may reach unto heaven; and let us make us a name...\"",
                questions: [
                    {
                        q: "What was the fundamental difference between the people of Enoch (Zion) and the people of Babel in how they tried to reach heaven?",
                        a: "[The people of Zion reached heaven through unity, righteousness, and following God (Moses 7:18). The people of Babel tried to reach heaven through physical construction and pride, ignoring God's method.]"
                    },
                    {
                        q: "The supplemental material mentions that the Tower of Babel was a \"counterfeit temple.\" In what ways do people today try to build \"towers\" to find happiness or salvation without God?",
                        a: "[People may seek salvation or \"heaven\" through career success, accumulation of wealth, political power, or social status. These are \"towers\" that eventually fail.]"
                    }
                ]
            },
            {
                title: "Lesson Summary",
                content: [
                    "The accounts of Noah and the Tower of Babel are powerful reminders for our day. We live in a time comparable to Noah's, yet we can find \"grace in the eyes of the Lord\" by following the living prophet and establishing our homes as arks of safety. While the world may try to build its own \"towers\" to find happiness, we know that the only true path to heaven is through the covenants and name of Jesus Christ."
                ]
            }
        ];

        // ==========================================
        // ICONS (Inline SVG Components)
        // ==========================================
        const IconSun = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="12" r="4"/><path d="M12 2v2"/><path d="M12 20v2"/><path d="m4.93 4.93 1.41 1.41"/><path d="m17.66 17.66 1.41 1.41"/><path d="M2 12h2"/><path d="M20 12h2"/><path d="m6.34 17.66-1.41 1.41"/><path d="m19.07 4.93-1.41 1.41"/></svg>;
        const IconUsers = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>;
        const IconMusic = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M9 18V5l12-2v13"/><circle cx="6" cy="18" r="3"/><circle cx="18" cy="16" r="3"/></svg>;
        const IconBookOpen = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></svg>;
        const IconShare = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="18" cy="5" r="3"/><circle cx="6" cy="12" r="3"/><circle cx="18" cy="19" r="3"/><line x1="8.59" x2="15.42" y1="13.51" y2="17.49"/><line x1="15.41" x2="8.59" y1="6.51" y2="10.49"/></svg>;
        const IconChevronDown = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="m6 9 6 6 6-6"/></svg>;
        const IconChevronRight = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="m9 18 6-6-6-6"/></svg>;
        const IconLink = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/></svg>;
        const IconPlayCircle = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="12" r="10"/><polygon points="10 8 16 12 10 16 10 8"/></svg>;
        const IconPrinter = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><polyline points="6 9 6 2 18 2 18 9"></polyline><path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"></path><rect x="6" y="14" width="12" height="8"></rect></svg>;


        // ==========================================
        // COMPONENTS
        // ==========================================

        // 1. Toast Notification Component
        const Toast = ({ message, show, onClose }) => {
            useEffect(() => {
                if (show) {
                    const timer = setTimeout(onClose, 3000);
                    return () => clearTimeout(timer);
                }
            }, [show, onClose]);

            if (!show) return null;

            return (
                <div className="fixed bottom-24 left-1/2 transform -translate-x-1/2 bg-stone-800 text-white px-6 py-3 rounded-full shadow-lg z-50 flex items-center gap-2 animate-bounce toast-notification">
                    <span className="text-green-400">&#10003;</span>
                    {message}
                </div>
            );
        };

        // 2. Interactive Toggle Answer Component
        const ToggleAnswer = ({ question, answer }) => {
            const [isOpen, setIsOpen] = useState(false);

            return (
                <div className="mb-6 border-l-4 border-amber-200 pl-4">
                    <button 
                        onClick={() => setIsOpen(!isOpen)}
                        className="text-left font-bold text-amber-900 w-full hover:text-amber-700 transition-colors flex items-start gap-2"
                    >
                        <span className="mt-1">{isOpen ? <IconChevronDown className="w-5 h-5" /> : <IconChevronRight className="w-5 h-5" />}</span>
                        <span>{question}</span>
                    </button>
                    
                    {isOpen && (
                        <div className="mt-3 p-4 bg-stone-100 rounded-lg text-stone-700 italic border border-stone-200 fade-in">
                            <span className="font-bold not-italic text-stone-500 text-xs uppercase tracking-wider block mb-1">Possible Answer</span>
                            <div className="whitespace-pre-line">{answer}</div>
                        </div>
                    )}
                </div>
            );
        };

        // 3. Main App Component
        const App = () => {
            const [activeTab, setActiveTab] = useState('devotional');
            const [activeDayId, setActiveDayId] = useState('');
            const [showToast, setShowToast] = useState(false);
            const [youthGroup, setYouthGroup] = useState('ym'); // 'ym' or 'yw'

            // Initialize Day based on current date
            useEffect(() => {
                const dayMap = ['sunday', 'monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday'];
                const todayIndex = new Date().getDay();
                setActiveDayId(dayMap[todayIndex]);
            }, []);

            const getActiveData = (dataArray) => {
                return dataArray.find(d => d.id === activeDayId) || dataArray[0];
            };

            const copyToClipboard = (dayData) => {
                const promptParts = dayData.prompt.split(':');
                const promptLabel = promptParts[0];
                const promptText = promptParts.slice(1).join(':').trim();
                const scriptureText = (dayData.scriptureRef && dayData.scriptureLink)
                    ? `Scripture: ${dayData.scriptureRef}\n${dayData.scriptureLink}\n\n`
                    : ""; 

                // Use dayData.date if available, otherwise fallback to empty string or generic
                const dateStr = dayData.date ? dayData.date : "";

                const textToCopy = `‚ú® Daily Devotional ‚ú®\n\n${dateStr}\n*${dayData.title}*\n\n${dayData.text}\n\n*${promptLabel}:* ${promptText}\n\n${scriptureText}Full Lesson:\n${dayData.lessonLink}`;

                // Modern clipboard API
                if (navigator.clipboard && navigator.clipboard.writeText) {
                      navigator.clipboard.writeText(textToCopy).then(() => {
                        setShowToast(true);
                    }).catch(err => {
                        fallbackCopy(textToCopy);
                    });
                } else {
                    fallbackCopy(textToCopy);
                }
            };

            const fallbackCopy = (text) => {
                 try {
                    const textArea = document.createElement("textarea");
                    textArea.value = text;
                    
                    // Avoid scrolling to bottom
                    textArea.style.top = "0";
                    textArea.style.left = "0";
                    textArea.style.position = "fixed";
        
                    document.body.appendChild(textArea);
                    textArea.focus();
                    textArea.select();
                    document.execCommand('copy');
                    document.body.removeChild(textArea);
                    setShowToast(true);
                 } catch (err) {
                     console.error("Fallback copy failed", err);
                 }
            };

            const renderDevotional = () => {
                const data = getActiveData(DEVOTIONAL_DATA);
                return (
                    <div className="space-y-6 fade-in max-w-2xl mx-auto">
                        <div className="bg-white p-6 rounded-2xl shadow-sm border border-stone-200">
                            <span className="text-amber-600 text-sm font-bold uppercase tracking-widest">{data.date}</span>
                            <h2 className="text-3xl font-serif font-bold text-stone-800 mt-2 mb-4">{data.title}</h2>
                            <p className="text-stone-600 leading-relaxed text-lg">{data.text}</p>
                            
                            <div className="mt-8 p-5 bg-amber-50 rounded-xl border border-amber-100">
                                <h3 className="font-bold text-amber-900 mb-2 flex items-center gap-2">
                                    <span className="w-2 h-2 bg-amber-500 rounded-full"></span>
                                    {data.prompt.split(':')[0]}
                                </h3>
                                <p className="text-stone-700 italic">{data.prompt.split(':').slice(1).join(':')}</p>
                            </div>

                            <div className="mt-6 grid grid-cols-1 sm:grid-cols-2 gap-3">
                                {data.scriptureLink && (
                                    <a href={data.scriptureLink} target="_blank" className="flex items-center justify-center gap-2 bg-amber-600 text-white py-3 rounded-lg font-medium hover:bg-amber-700 transition">
                                        <IconBookOpen className="w-4 h-4" /> Read Scripture: {data.scriptureRef}
                                    </a>
                                )}
                                <a href={data.lessonLink} target="_blank" className="flex items-center justify-center gap-2 bg-stone-200 text-stone-700 py-3 rounded-lg font-medium hover:bg-stone-300 transition">
                                    <IconLink className="w-4 h-4" /> Full Lesson
                                </a>
                            </div>

                            <button 
                                onClick={() => copyToClipboard(data)}
                                className="w-full mt-4 py-4 border-t border-stone-100 text-stone-500 hover:text-amber-600 font-medium flex items-center justify-center gap-2 transition-colors"
                            >
                                <IconShare className="w-4 h-4" /> Share Devotional
                            </button>
                        </div>
                    </div>
                );
            };

            const renderYouth = () => {
                const data = getActiveData(youthGroup === 'ym' ? YM_DATA : YW_DATA);
                return (
                    <div className="fade-in max-w-3xl mx-auto">
                        {/* Toggle Switch for YM/YW */}
                        <div className="flex justify-center mb-6 bg-stone-200 p-1 rounded-xl inline-flex w-full sm:w-auto mx-auto">
                            <button 
                                onClick={() => setYouthGroup('ym')}
                                className={`flex-1 sm:flex-none px-8 py-2 rounded-lg font-bold transition-all ${youthGroup === 'ym' ? 'bg-white shadow-sm text-amber-700' : 'text-stone-500 hover:text-stone-700'}`}
                            >
                                Young Men
                            </button>
                            <button 
                                onClick={() => setYouthGroup('yw')}
                                className={`flex-1 sm:flex-none px-8 py-2 rounded-lg font-bold transition-all ${youthGroup === 'yw' ? 'bg-white shadow-sm text-amber-700' : 'text-stone-500 hover:text-stone-700'}`}
                            >
                                Young Women
                            </button>
                        </div>

                        <div className="bg-white p-6 rounded-2xl shadow-sm border border-stone-200 relative overflow-hidden">
                            {/* Decorative Top Border */}
                            <div className={`absolute top-0 left-0 w-full h-2 ${youthGroup === 'ym' ? 'bg-blue-600' : 'bg-pink-500'}`}></div>

                            <h2 className="text-2xl font-serif font-bold text-stone-800 mt-4 mb-4">{data.title}</h2>
                            <p className="text-stone-600 leading-relaxed">{data.text}</p>
                            
                            <div className="mt-6 p-5 bg-stone-50 rounded-xl border border-stone-100">
                                <h3 className="font-bold text-stone-800 mb-2">{data.prompt.split(':')[0]}</h3>
                                <p className="text-stone-600">{data.prompt.split(':').slice(1).join(':')}</p>
                            </div>
                             <div className="mt-6 grid grid-cols-1 sm:grid-cols-2 gap-3">
                                {data.scriptureLink && (
                                    <a href={data.scriptureLink} target="_blank" className={`flex items-center justify-center gap-2 text-white py-3 rounded-lg font-medium transition ${youthGroup === 'ym' ? 'bg-blue-600 hover:bg-blue-700' : 'bg-pink-500 hover:bg-pink-600'}`}>
                                        <IconBookOpen className="w-4 h-4" /> Read Scripture: {data.scriptureRef}
                                    </a>
                                )}
                                <a href={data.lessonLink} target="_blank" className="flex items-center justify-center gap-2 bg-stone-200 text-stone-700 py-3 rounded-lg font-medium hover:bg-stone-300 transition">
                                    <IconLink className="w-4 h-4" /> Full Lesson
                                </a>
                            </div>
                             <button 
                                onClick={() => copyToClipboard(data)}
                                className="w-full mt-4 py-4 border-t border-stone-100 text-stone-500 hover:text-stone-800 font-medium flex items-center justify-center gap-2 transition-colors"
                            >
                                <IconShare className="w-4 h-4" /> Share Content
                            </button>
                        </div>
                    </div>
                );
            };

            const renderSongs = () => {
                const data = getActiveData(SONGS_DATA);
                return (
                    <div className="fade-in max-w-3xl mx-auto">
                         <div className="text-center bg-white p-6 rounded-2xl shadow-sm border border-stone-200 mb-6">
                            <div className="w-12 h-12 bg-amber-100 rounded-full flex items-center justify-center mx-auto mb-4">
                                <IconMusic className="w-6 h-6 text-amber-700" />
                            </div>
                            <h2 className="text-2xl font-serif font-bold text-stone-800">Songs of the Soul</h2>
                            <p className="mt-2 text-stone-500 text-sm">Music to invite the Spirit into your daily study.</p>
                        </div>

                        <div className="bg-white p-6 rounded-2xl shadow-sm border border-stone-200">
                            <h3 className="text-lg font-bold text-stone-400 uppercase tracking-wider mb-4">Daily Selection</h3>
                            <h2 className="text-xl font-bold text-stone-800 mb-2">{data.title}</h2>
                            <p className="text-stone-600 italic mb-8 text-sm border-l-2 border-amber-300 pl-4">{data.devotionalText}</p>
                            
                            <div className="space-y-8">
                                {/* Hymn Section */}
                                <div>
                                    <span className="text-xs font-bold text-amber-600 tracking-widest uppercase mb-2 block flex items-center gap-2">
                                        <IconMusic className="w-3 h-3" /> Hymn Selection
                                    </span>
                                    <div className="flex items-start justify-between gap-4">
                                        <h3 className="text-xl font-serif font-bold text-stone-800">{data.hymnTitle}</h3>
                                        <a href={data.hymnLink} target="_blank" rel="noopener noreferrer" className="text-amber-600 hover:text-amber-700 transition-colors" aria-label="Play Song">
                                            <IconPlayCircle className="w-8 h-8" />
                                        </a>
                                    </div>
                                    <p className="mt-2 text-stone-600 text-sm leading-relaxed">{data.hymnAnalysis}</p>
                                </div>

                                <hr className="border-stone-100" />

                                {/* Song Section */}
                                <div>
                                    <span className="text-xs font-bold text-sky-600 tracking-widest uppercase mb-2 block flex items-center gap-2">
                                        <IconMusic className="w-3 h-3" /> Contemporary Song
                                    </span>
                                    <div className="flex items-start justify-between gap-4">
                                        <div>
                                            <h3 className="text-xl font-serif font-bold text-stone-800">{data.songTitle}</h3>
                                            <p className="text-xs text-stone-400 mb-2">by {data.songArtist}</p>
                                        </div>
                                        <a href={data.songLink} target="_blank" rel="noopener noreferrer" className="text-sky-600 hover:text-sky-700 transition-colors" aria-label="Play Song">
                                            <IconPlayCircle className="w-8 h-8" />
                                        </a>
                                    </div>
                                    <p className="mt-2 text-stone-600 text-sm leading-relaxed">{data.songAnalysis}</p>
                                </div>
                            </div>
                        </div>
                    </div>
                );
            };

            const renderStudy = () => {
                return (
                    <div className="fade-in max-w-6xl mx-auto pb-12">
                         <div id="printable-study-section" className="bg-white p-8 rounded-2xl shadow-sm border border-stone-200 relative">
                            
                            <div className="flex justify-between items-start mb-2">
                                 <div className="w-full">
                                    <h1 className="text-3xl font-serif font-bold text-center text-amber-800">Discussion Guide</h1>
                                 </div>
                                 <button 
                                    onClick={() => window.print()} 
                                    className="no-print absolute top-6 right-6 text-stone-400 hover:text-stone-600 hover:bg-stone-100 p-2 rounded-full transition-all"
                                    aria-label="Print Discussion Guide"
                                    title="Print Discussion Guide"
                                >
                                    <IconPrinter className="w-6 h-6" />
                                </button>
                            </div>

                            <p className="text-center text-stone-500 mb-8 italic">"{WEEK_INFO.title}"</p>
                            
                            {/* --- ADDED IMAGE HERE --- */}
                            <div className="mb-8">
                                <img 
                                    src="Graphic.jpg" 
                                    alt="Infographic: Old Testament" 
                                    className="w-full h-auto rounded-lg shadow-md border border-stone-200"
                                    onError={(e) => {e.target.style.display = 'none'}} 
                                />
                            </div>
                            {/* ------------------------ */}
                            
                            {STUDY_GUIDE_DATA.map((section, idx) => (
                                <div key={idx} className="mb-10 last:mb-0">
                                    <h2 className="text-xl font-bold text-stone-800 mb-3 border-b border-amber-100 pb-2">{section.title}</h2>
                                    
                                    {section.content && section.content.map((p, i) => (
                                        <p key={i} className="text-stone-700 mb-3 leading-relaxed">{p}</p>
                                    ))}

                                    {section.discussionPoint && (
                                        <div className="mb-4">
                                            <h3 className="text-amber-700 font-semibold text-sm uppercase mb-1">Context</h3>
                                            <p className="text-stone-700">{section.discussionPoint}</p>
                                        </div>
                                    )}

                                    {section.quote && (
                                        <blockquote className="border-l-4 border-stone-300 pl-4 py-1 my-4 text-stone-600 italic bg-stone-50 p-3 rounded-r-lg">
                                            {section.quote}
                                        </blockquote>
                                    )}

                                    {section.question && (
                                        <ToggleAnswer question={section.question} answer={section.answer} />
                                    )}

                                    {section.questions && section.questions.map((qItem, qIdx) => (
                                        <ToggleAnswer key={qIdx} question={qItem.q} answer={qItem.a} />
                                    ))}
                                </div>
                            ))}
                        </div>
                    </div>
                );
            };

            // Dynamic Footer based on view
            const renderFooter = () => (
                <footer className="p-6 text-center text-stone-400 text-xs">
                    <p>{WEEK_INFO.valediction}</p>
                </footer>
            );

            return (
                <div className="flex flex-col h-full bg-stone-100">
                    {/* Header */}
                    <header className="bg-white border-b border-stone-200 pt-6 pb-2 px-4 shadow-sm z-10">
                        <div className="max-w-4xl mx-auto text-center">
                            <h1 className="text-xs font-bold tracking-[0.2em] text-stone-400 uppercase mb-1">Come, Follow Me</h1>
                            <h2 className="text-lg sm:text-xl font-serif font-bold text-stone-800 leading-tight">{WEEK_INFO.title}</h2>
                            <p className="text-stone-500 text-xs mt-1 mb-4">{WEEK_INFO.dateRange}</p>

                            {/* Main Nav Tabs */}
                            <div className="flex justify-center space-x-1 sm:space-x-4 mt-4 overflow-x-auto hide-scrollbar pb-2">
                                <button onClick={() => setActiveTab('devotional')} className={`flex flex-col sm:flex-row items-center gap-2 px-4 py-2 rounded-xl transition-all ${activeTab === 'devotional' ? 'bg-amber-50 text-amber-700 ring-1 ring-amber-200' : 'text-stone-400 hover:text-stone-600'}`}>
                                    <IconSun className="w-5 h-5" />
                                    <span className="text-xs sm:text-sm font-medium">Daily</span>
                                </button>
                                <button onClick={() => setActiveTab('youth')} className={`flex flex-col sm:flex-row items-center gap-2 px-4 py-2 rounded-xl transition-all ${activeTab === 'youth' ? 'bg-amber-50 text-amber-700 ring-1 ring-amber-200' : 'text-stone-400 hover:text-stone-600'}`}>
                                    <IconUsers className="w-5 h-5" />
                                    <span className="text-xs sm:text-sm font-medium">Youth</span>
                                </button>
                                <button onClick={() => setActiveTab('songs')} className={`flex flex-col sm:flex-row items-center gap-2 px-4 py-2 rounded-xl transition-all ${activeTab === 'songs' ? 'bg-amber-50 text-amber-700 ring-1 ring-amber-200' : 'text-stone-400 hover:text-stone-600'}`}>
                                    <IconMusic className="w-5 h-5" />
                                    <span className="text-xs sm:text-sm font-medium">Music</span>
                                </button>
                                <button onClick={() => setActiveTab('study')} className={`flex flex-col sm:flex-row items-center gap-2 px-4 py-2 rounded-xl transition-all ${activeTab === 'study' ? 'bg-amber-50 text-amber-700 ring-1 ring-amber-200' : 'text-stone-400 hover:text-stone-600'}`}>
                                    <IconBookOpen className="w-5 h-5" />
                                    <span className="text-xs sm:text-sm font-medium">Study</span>
                                </button>
                            </div>
                        </div>
                    </header>

                    {/* Secondary Day Navigation (Horizontal Scroll) - Only show for Daily, Youth, Songs */}
                    {activeTab !== 'study' && (
                        <div className="bg-white border-b border-stone-200 py-2 px-4 shadow-sm z-10">
                            <div className="max-w-4xl mx-auto">
                                <div className="flex space-x-3 overflow-x-auto hide-scrollbar pb-1 sm:justify-center">
                                    {DEVOTIONAL_DATA.map((d) => (
                                        <button
                                            key={d.id}
                                            onClick={() => setActiveDayId(d.id)}
                                            className={`flex-shrink-0 flex flex-col items-center justify-center w-12 h-14 rounded-lg transition-all border ${activeDayId === d.id ? 'bg-stone-800 text-white border-stone-800 shadow-md transform scale-105' : 'bg-white text-stone-500 border-stone-200 hover:border-stone-300'}`}
                                        >
                                            <span className="text-[10px] font-bold uppercase">{d.day}</span>
                                            <span className={`text-lg font-bold leading-none ${activeDayId === d.id ? 'text-amber-400' : 'text-stone-800'}`}>{d.date.split(' ')[1]}</span>
                                        </button>
                                    ))}
                                </div>
                            </div>
                        </div>
                    )}

                    {/* Content Area - Scrollable */}
                    <main className="flex-1 overflow-y-auto p-4 pb-20">
                        {activeTab === 'devotional' && renderDevotional()}
                        {activeTab === 'youth' && renderYouth()}
                        {activeTab === 'songs' && renderSongs()}
                        {activeTab === 'study' && renderStudy()}
                        {renderFooter()}
                    </main>

                    <Toast message="Copied to Clipboard!" show={showToast} onClose={() => setShowToast(false)} />
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
