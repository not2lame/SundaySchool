<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Come, Follow Me Companion</title>
    
    <!-- Tailwind CSS (Styling) -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Fonts: Inter (Body) and Merriweather (Headings) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Merriweather:ital,wght@0,300;0,400;0,700;1,400&display=swap" rel="stylesheet">
    
    <!-- React & ReactDOM (Switched to Cloudflare CDN for better firewall access) -->
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    
    <!-- Babel (to compile JSX in browser) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>

    <!-- Tailwind Configuration -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        serif: ['Merriweather', 'serif'],
                    },
                    colors: {
                        stone: { 50: '#fafaf9', 100: '#f5f5f4', 200: '#e7e5e4', 300: '#d6d3d1', 400: '#a8a29e', 500: '#78716c', 600: '#57534e', 700: '#44403c', 800: '#292524', 900: '#1c1917' },
                        amber: { 50: '#fffbeb', 100: '#fef3c7', 200: '#fde68a', 300: '#fcd34d', 400: '#fbbf24', 500: '#f59e0b', 600: '#d97706', 700: '#b45309', 800: '#92400e', 900: '#78350f' }
                    }
                }
            }
        }
    </script>

    <style>
        .hide-scrollbar::-webkit-scrollbar { display: none; }
        .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        .fade-in { animation: fadeIn 0.5s ease-in; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* Print Styles */
        @media print {
            body * {
                visibility: hidden;
            }
            #printable-study-section, #printable-study-section * {
                visibility: visible;
            }
            #printable-study-section {
                position: absolute;
                left: 0;
                top: 0;
                width: 100%;
                margin: 0;
                padding: 0;
                border: none;
                box-shadow: none;
            }
            .no-print {
                display: none !important;
            }
        }
    </style>
</head>
<body class="bg-stone-100 text-stone-800 h-screen flex flex-col overflow-hidden">

    <!-- Loading Fallback -->
    <div id="root" class="h-full flex flex-col">
        <div class="flex items-center justify-center h-full bg-stone-100 text-stone-500 p-4 text-center">
            <div>
                <h2 class="text-xl font-bold mb-2">Loading App...</h2>
                <p class="text-sm">If this takes longer than a few seconds, your network may be blocking the script libraries (React).</p>
            </div>
        </div>
    </div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // ==========================================
        // DATA CONSTANTS
        // ==========================================

        const WEEK_INFO = {
            title: "The Matchless Gift of God‚Äôs Divine Son",
            dateRange: "December 22 - December 28, 2025",
            valediction: "May the melodies and messages from this week help you more fully remember and rely on the gifts of Jesus Christ, the true Light of the World."
        };

        const DEVOTIONAL_DATA = [
            { id: 'monday', day: 'Mon', fullDay: 'Monday', date: 'Dec 22', title: 'The Matchless Life üåü', text: 'As we celebrate the Savior‚Äôs birth, we reflect on a life that began long before Bethlehem and has influenced every person who has ever lived. Jesus Christ was the Great Jehovah of the Old Testament and the Messiah of the New. He is the Creator of the earth, yet He walked the dusty roads of Palestine to heal the sick and teach the truths of eternity. His life is the central act of human history, and His influence is truly matchless.', prompt: 'Reflection: Which aspect of the Savior\'s mortal ministry‚ÄîHis healing, His teaching, or His example of "doing good"‚Äîresonates most deeply with you today?', scriptureRef: 'Acts 10:38', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/nt/acts/10?lang=eng#p38', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-doctrine-and-covenants-2025/52-christmas?lang=eng' },
            { id: 'tuesday', day: 'Tue', fullDay: 'Tuesday', date: 'Dec 23', title: 'The Gift of an Unlimited Capacity to Love ‚ù§Ô∏è', text: 'One of the most profound gifts the Savior offers is an unlimited capacity to love. This isn\'t just for those who love us back; with His help, we can learn to love the "unlovable" and even those who may currently persecute us. This may require a softening of our hearts as we are tutored by the Savior on how to truly care for one another.', prompt: 'Challenge: Identify one person in your life for whom it is difficult to feel affection. Pray specifically for the Lord to grant you a portion of His love for them today.', scriptureRef: 'Matthew 5:44', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/nt/matt/5?lang=eng#p44', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-doctrine-and-covenants-2025/52-christmas?lang=eng' },
            { id: 'wednesday', day: 'Wed', fullDay: 'Wednesday', date: 'Dec 24', title: 'The Gift of Forgiveness üïäÔ∏è', text: 'Through His infinite Atonement, Jesus Christ grants us the ability to forgive others, even those who never accept responsibility for their actions. While it may be easy to forgive the humble, the Savior provides the strength to forgive anyone who has mistreated us. By accepting this gift, we ensure that the hurtful acts of others no longer canker our souls, allowing us to find true peace.', prompt: 'Reflection: Is there a past hurt you are still carrying? How might inviting the Savior\'s power to help you forgive release that burden from your soul?', scriptureRef: 'Doctrine and Covenants 64:10', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/dc-testament/dc/64?lang=eng#p10', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-doctrine-and-covenants-2025/52-christmas?lang=eng' },
            { id: 'thursday', day: 'Thu', fullDay: 'Thursday', date: 'Dec 25', title: 'The Resplendent Gift of Repentance üéÅ', text: 'Repentance is often misunderstood, but at its core, it is a resplendent gift meant to be received with joy. The Greek word metanoeo implies a total change of mind, knowledge, and spirit. It is not a one-time event but a never-ending privilege that allows us to progress and find peace. As we repent, we literally breathe with gratitude to God for the breath He lends us. On this Christmas day, remember that He came so you could always have the chance to start fresh.', prompt: 'Challenge: On this Christmas day, offer the Savior the gift of a specific "change of mind" or a habit you have been working on.', scriptureRef: 'Luke 13:3', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/nt/luke/13?lang=eng#p3', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-doctrine-and-covenants-2025/52-christmas?lang=eng' },
            { id: 'friday', day: 'Fri', fullDay: 'Friday', date: 'Dec 26', title: 'The Promise of Life Everlasting üß¨', text: 'The fourth gift is the promise of eternal life, which is more than just living forever‚Äîit is the kind and quality of life that Heavenly Father and Jesus Christ live. While everyone will be resurrected and experience immortality, eternal life is reserved for those who choose to follow the Son and desire to become like Him. This gift allows us the eventual possibility of living as He lives.', prompt: 'Reflection: How does focusing on the quality of eternal life change your perspective on the daily choices you make?', scriptureRef: 'John 3:16', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/nt/john/3?lang=eng#p16', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-doctrine-and-covenants-2025/52-christmas?lang=eng' },
            { id: 'saturday', day: 'Sat', fullDay: 'Saturday', date: 'Dec 27', title: 'Drawing Power through Covenants üîó', text: 'To receive these gifts, the key is to make and keep sacred covenants. These covenants bind us to the Savior and give us access to godly power sufficient to deal with the burdens and temptations of our day. As we stay on the covenant path, we find true joy and the strength to keep ourselves "unspotted from the world."', prompt: 'Challenge: Reflect on a covenant you have made. What is one small, precise thing you can do this week to keep that covenant more faithfully?', scriptureRef: 'Doctrine and Covenants 84:88', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/dc-testament/dc/84?lang=eng#p88', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-doctrine-and-covenants-2025/52-christmas?lang=eng' },
            { id: 'sunday', day: 'Sun', fullDay: 'Sunday', date: 'Dec 28', title: 'The Light, the Life, and the Hope üïØÔ∏è', text: 'Jesus Christ is the light, the life, and the hope of the world. His light dispels the darkness of despair and allows us to see our path clearly. Because of Him, no adversity is permanent; every broken heart can be mended and every tear dried. We bear testimony that He lives today, lighting the world and guiding His Church.', prompt: 'Reflection: As you look toward the new year, in what specific area of your life do you most need the Savior‚Äôs light or hope?', scriptureRef: '3 Nephi 11:11', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/bofm/3-ne/11?lang=eng#p11', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-doctrine-and-covenants-2025/52-christmas?lang=eng' }
        ];

        const YM_DATA = [
             { id: 'monday', day: 'Mon', date: 'Dec 22', title: 'Your Origin Story ‚ö°', text: 'Before he was born, Jesus Christ was already the Great Jehovah, the Creator of worlds without number. He wasn\'t just a baby in a manger; He is the infinite God who chose to come to earth to lead us. Understanding His mission gives you a clear perspective on your own purpose as a priesthood holder‚Äîyou are here to follow the ultimate Captain.', prompt: 'Reflection: How does knowing that the Creator of the universe is personally mindful of you change how you handle your challenges today?', scriptureRef: 'John 1:3', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/nt/john/1?lang=eng#p3', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-doctrine-and-covenants-2025/52-christmas?lang=eng' },
            { id: 'tuesday', day: 'Tue', date: 'Dec 23', title: 'The Priesthood Power to Love ü§ù', text: 'One of the greatest gifts the Savior offers is an unlimited capacity to love others, even the people who are hard to like or who treat you poorly. As a priesthood holder, you are called to minister in His way. This often requires a "softening of the heart" so you can truly see and take care of those around you.', prompt: 'Challenge: Think of someone at school or in your neighborhood who seems like an "outsider." Find one simple way to show them kindness or respect today.', scriptureRef: 'Matthew 5:44', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/nt/matt/5?lang=eng#p44', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-doctrine-and-covenants-2025/52-christmas?lang=eng' },
            { id: 'wednesday', day: 'Wed', date: 'Dec 24', title: 'Strength to Let It Go üïäÔ∏è', text: 'Forgiveness isn\'t for the weak; it‚Äôs a gift of power from the Savior. He can help you forgive people who have been cruel to you, even if they never apologize. When you choose to forgive, you stop their hurtful actions from "cankering" your soul, leaving you free to progress and find peace.', prompt: 'Reflection: Is there a grudge or a hurt you‚Äôve been holding onto? How would your life feel lighter if you let the Savior help you drop that burden?', scriptureRef: 'Doctrine and Covenants 64:10', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/dc-testament/dc/64?lang=eng#p10', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-doctrine-and-covenants-2025/52-christmas?lang=eng' },
            { id: 'thursday', day: 'Thu', date: 'Dec 25', title: 'The Gift of a New Mind üéÅ', text: 'True repentance is a "resplendent gift" that means changing your mind, your knowledge, and even your spirit. It‚Äôs not about being punished; it‚Äôs a never-ending privilege that helps you become more like the Savior. On this Christmas day, remember that He came so you could always have the chance to start fresh.', prompt: 'Challenge: Identify one habit or thought pattern you want to "change your mind" about. Offer that commitment to the Lord as your gift to Him today.', scriptureRef: 'Luke 13:3', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/nt/luke/13?lang=eng#p3', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-doctrine-and-covenants-2025/52-christmas?lang=eng' },
            { id: 'friday', day: 'Fri', date: 'Dec 26', title: 'Training for Eternity üëë', text: 'Everlasting life isn\'t just about living forever; it‚Äôs about the kind of life you live. Heavenly Father wants you to live the same quality of life that He and His Son live. You are training for a royal future right now.', prompt: 'Reflection: If you knew for a fact you were going to live with God one day, how would that change the way you act or talk this weekend?', scriptureRef: 'John 3:16', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/nt/john/3?lang=eng#p16', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-doctrine-and-covenants-2025/52-christmas?lang=eng' },
            { id: 'saturday', day: 'Sat', date: 'Dec 27', title: 'Accessing Godly Power ‚ö°', text: 'The world is full of "turbulent times," but you weren\'t meant to deal with them alone. Covenants are the "key" to accessing the Savior‚Äôs power. When you keep your covenants with precision, you are bound to Him, giving you the strength to handle any obstacle or temptation that comes your way.', prompt: 'Challenge: Reflect on your baptismal or priesthood covenants. Pick one specific area where you can be more "precise" in keeping that promise this week.', scriptureRef: 'Doctrine and Covenants 84:88', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/dc-testament/dc/84?lang=eng#p88', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-doctrine-and-covenants-2025/52-christmas?lang=eng' },
            { id: 'sunday', day: 'Sun', date: 'Dec 28', title: 'The Light That Never Fades üïØÔ∏è', text: 'Jesus Christ is the light, the life, and the hope of the world. When things feel dark or confusing, His light can help you see clearly and drive away despair. Because of His birth and Atonement, no failure is permanent and every wound can be healed. He is your source of strength for the new year ahead.', prompt: 'Reflection: Looking back on this year, when did you feel the Savior‚Äôs light the most? How can you stay closer to that light in 2026?', scriptureRef: '3 Nephi 11:11', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/bofm/3-ne/11?lang=eng#p11', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-doctrine-and-covenants-2025/52-christmas?lang=eng' }
        ];

        const YW_DATA = [
            { id: 'monday', day: 'Mon', date: 'Dec 22', title: 'An Eternal Perspective üåå', text: 'Just like the young girl mentioned in the lesson who peacefully faced a massive health challenge, you can have an eternal perspective. Jesus Christ is the Creator of the earth and the Messiah, and He knows you personally. When you focus on His life and mission, you can experience a "blessed and happy state" and even "unspeakable joy" despite the hard things happening around you.', prompt: 'Reflection: Lydia‚Äôs deepest desire was to be with her family and the Savior forever. What are your deepest desires for your life and your future?', scriptureRef: 'Mosiah 2:41', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/bofm/mosiah/2?lang=eng#p41', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-doctrine-and-covenants-2025/52-christmas?lang=eng' },
            { id: 'tuesday', day: 'Tue', date: 'Dec 23', title: 'The Gift of Loving Like Him üíñ', text: 'The Savior gives you the gift of an unlimited capacity to love. This includes the strength to love people who are difficult to be around or even those who aren\'t kind to you. With His help, you can experience a "change of heart" that allows you to minister to others in His way.', prompt: 'Challenge: Is there someone at school or in your ward who seems lonely or "unlovable"? Ask the Lord for His help to see them and love them as He does today.', scriptureRef: 'Matthew 5:44', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/nt/matt/5?lang=eng#p44', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-doctrine-and-covenants-2025/52-christmas?lang=eng' },
            { id: 'wednesday', day: 'Wed', date: 'Dec 24', title: 'Healing through Forgiveness üïØÔ∏è', text: 'Through the Atonement of Jesus Christ, you have the power to forgive anyone who has hurt you. Sometimes people are cruel, but the Savior can help you let go of that pain so it no longer "cankers" your soul. Forgiveness is a gift that brings peace to your own heart, regardless of what the other person does.', prompt: 'Reflection: Is there a small hurt or a big grudge that is weighing you down? How could inviting the Savior‚Äôs healing power help you feel more peace tonight?', scriptureRef: 'Doctrine and Covenants 64:10', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/dc-testament/dc/64?lang=eng#p10', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-doctrine-and-covenants-2025/52-christmas?lang=eng' },
            { id: 'thursday', day: 'Thu', date: 'Dec 25', title: 'The Joy of Starting Fresh üéÅ', text: 'Repentance is a "resplendent gift" that literally means to "change your mind" or your spirit. It is not something to be feared; it is a process that brings you comfort and joy as you become more like Jesus. On this Christmas Day, remember that the Savior was born so you could always have the privilege of a fresh start.', prompt: 'Challenge: Repentance is a "never-ending privilege". Think of one small way you can align your heart more with the Savior\'s today as a gift back to Him.', scriptureRef: 'Luke 13:3', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/nt/luke/13?lang=eng#p3', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-doctrine-and-covenants-2025/52-christmas?lang=eng' },
            { id: 'friday', day: 'Fri', date: 'Dec 26', title: 'A Life of High Quality üëë', text: 'The Savior offers you the promise of eternal life, which is the kind of life that God lives. It‚Äôs not just about living forever, but about the quality of that life. Because you are a daughter of God, your potential is to live and progress in the celestial realm with your family forever.', prompt: 'Reflection: Knowing that your ultimate goal is to live the same kind of life as our Heavenly Parents, how does that change how you value yourself right now?', scriptureRef: 'John 3:16', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/nt/john/3?lang=eng#p16', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-doctrine-and-covenants-2025/52-christmas?lang=eng' },
            { id: 'saturday', day: 'Sat', date: 'Dec 27', title: 'Reaching Up in Faith ‚ú®', text: 'Think of the woman in the Bible who "spiritually stretched" to touch the Savior‚Äôs clothes and was healed. When you "reach up" for the Lord\'s power with real intensity, He will lead you by the Holy Ghost to know exactly what to do in your life. Your faith motivates you to do things you wouldn\'t otherwise do, giving you access to His godly power.', prompt: 'Challenge: Like the young woman who chose her church commitment over a state competition, what is one "spiritual stretch" you can make this weekend to show the Lord He is your priority?', scriptureRef: 'Doctrine and Covenants 84:88', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/dc-testament/dc/84?lang=eng#p88', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-doctrine-and-covenants-2025/52-christmas?lang=eng' },
            { id: 'sunday', day: 'Sun', date: 'Dec 28', title: 'Your Source of Hope üïØÔ∏è', text: 'Jesus Christ is the light, the life, and the hope of the world. His light can drive away the "darkness of despair" and help you see your path more clearly. No matter what mistakes or trials you face, because of Him, "every broken heart can be mended" and "every tear can be dried."', prompt: 'Reflection: As you look toward the new year, how can you stay more "riveted" on the Savior to keep your doubts and fears away?', scriptureRef: '3 Nephi 11:11', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/bofm/3-ne/11?lang=eng#p11', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-doctrine-and-covenants-2025/52-christmas?lang=eng' }
        ];

        const SONGS_DATA = [
            { id: 'monday', day: 'Mon', title: 'The Matchless Life üåü', devotionalText: 'As we celebrate the Savior‚Äôs birth, we reflect on a life that began long before Bethlehem and has influenced every person who has ever lived. Jesus Christ was the Great Jehovah of the Old Testament and the Messiah of the New. He is the Creator of the earth, yet He walked the dusty roads of Palestine to heal the sick and teach the truths of eternity. His life is the central act of human history, and His influence is truly matchless.', 
                hymnTitle: 'I Believe in Christ', hymnLink: 'https://www.youtube.com/watch?v=9g2F2eiZSF8', hymnAnalysis: 'This hymn serves as a comprehensive creed, powerfully echoing the devotional‚Äôs message about the Savior‚Äôs "matchless life." The lyrics methodically build a testimony of Christ‚Äôs multifaceted identity, beginning with His role as the Son of God and "Lord of all." Lyrics like "He is God, the Son, the great I Am," directly affirm His divine status as the Jehovah of the Old Testament and the Messiah of the New. The hymn then transitions to His mortal ministry, declaring, "He healed the sick; the dead he raised," mirroring the devotional‚Äôs reflection on His healing power and His example of "doing good" among the children of men.', 
                songTitle: 'His Hands', songArtist: 'Kenneth Cope', songLink: 'https://www.youtube.com/watch?v=nSjNghc-vnw', songAnalysis: 'This song offers a deeply personal and tangible focus on the Savior\'s mortal ministry, complementing the devotional‚Äôs reflection question. The lyrics guide the listener to contemplate the specific actions of Christ‚Äôs hands‚Äîhow they healed the blind, blessed the children, and were ultimately pierced for our salvation. This imagery connects directly to the devotional‚Äôs themes of His healing and teaching, making His "matchless" influence feel intimate and accessible. The song‚Äôs narrative transforms the grand, historical figure of Christ into a personal Savior whose every action was an expression of love.' },
            { id: 'tuesday', day: 'Tue', title: 'The Gift of an Unlimited Capacity to Love ‚ù§Ô∏è', devotionalText: 'One of the most profound gifts the Savior offers is an unlimited capacity to love. This isn\'t just for those who love us back; with His help, we can learn to love the "unlovable" and even those who may currently persecute us. This may require a softening of our hearts as we are tutored by the Savior on how to truly care for one another.', 
                hymnTitle: 'Lord, I Would Follow Thee', hymnLink: 'https://www.youtube.com/watch?v=3CxaG15LpdY', hymnAnalysis: 'This hymn is a humble prayer that directly addresses the day\'s challenge to develop a more Christlike love. The lyrics serve as a guide for self-reflection, asking, "Who am I to judge another when I walk imperfectly?" This question encourages the listener to turn inward and recognize their own need for grace, which is the first step toward extending it to others. The plea, "Help me to love my neighbor," and the commitment to "serve his needs" align perfectly with the devotional\'s message about actively caring for one another, especially those who may seem "unlovable." It transforms the abstract concept of charity into a tangible, daily pursuit.', 
                songTitle: 'Through Heaven\'s Eyes', songArtist: 'Brian Stokes Mitchell', songLink: 'https://www.youtube.com/watch?v=CyUNPyomLmQ', songAnalysis: 'This song serves as a powerful modern parable about the transformative power of changing one\'s perspective, which is the essence of Christlike love. The lyrics tell a story of seeing value and purpose where others see none, teaching that "a single thread in a tapestry... can make a difference." This message directly complements the devotional‚Äôs challenge to love the "unlovable." The song suggests that every person has a divine purpose and worth, and by looking "through heaven\'s eyes," we can overcome our mortal judgments and see them as God does, full of potential and worthy of love.' },
            { id: 'wednesday', day: 'Wed', title: 'The Gift of Forgiveness üïäÔ∏è', devotionalText: 'Through His infinite Atonement, Jesus Christ grants us the ability to forgive others, even those who never accept responsibility for their actions. While it may be easy to forgive the humble, the Savior provides the strength to forgive anyone who has mistreated us. By accepting this gift, we ensure that the hurtful acts of others no longer canker our souls, allowing us to find true peace.', 
                hymnTitle: 'Where Can I Turn for Peace?', hymnLink: 'https://www.youtube.com/watch?v=3iLQctCrkLg', hymnAnalysis: 'This hymn beautifully captures the state of a soul burdened by hurt, asking the very question posed in the devotional\'s reflection: Where can one turn when feeling wounded and alone? The lyrics, "Where can I turn for peace? Where is my solace?" articulate the inner turmoil that comes from carrying a past hurt. The answer provided in the hymn is unequivocal: "He, only One." This aligns perfectly with the devotional\'s teaching that it is Jesus Christ who "grants us the ability to forgive" and provides the strength to do so. The hymn is a testament that true peace is not found in receiving an apology, but in turning to the Savior.', 
                songTitle: 'Forgiveness', songArtist: 'Matthew West', songLink: 'https://www.youtube.com/watch?v=oIbCpy0CQEo', songAnalysis: 'This song provides a raw and powerful narrative of the emotional struggle and ultimate spiritual triumph of forgiveness. Based on a true story, the lyrics depict the immense difficulty of forgiving someone who has caused unimaginable pain and is unrepentant‚Äîa direct echo of the devotional‚Äôs point about forgiving "even those who never accept responsibility." The song captures the internal battle between the desire for justice and the call to forgive, making it a compelling modern illustration of the devotional\'s reflection question about releasing a burden. By telling a specific story, the song makes the abstract principle of Atonement-fueled forgiveness feel tangible, difficult, yet ultimately achievable.' },
            { id: 'thursday', day: 'Thu', title: 'The Resplendent Gift of Repentance üéÅ', devotionalText: 'Repentance is often misunderstood, but at its core, it is a resplendent gift meant to be received with joy. The Greek word metanoeo implies a total change of mind, knowledge, and spirit. It is not a one-time event but a never-ending privilege that allows us to progress and find peace. As we repent, we literally breathe with gratitude to God for the breath He lends us. On this Christmas day, remember that He came so you could always have the chance to start fresh.', 
                hymnTitle: 'Come unto Jesus', hymnLink: 'https://www.youtube.com/watch?v=i7xCPQV91Dg', hymnAnalysis: 'This hymn is a gentle yet profound invitation that perfectly captures the joyful essence of repentance as described in the devotional. The lyrics, "Come unto Jesus; ye heavy laden, Careworn and fainting, oppressed and sore," speak directly to those in need of the fresh start that repentance offers. The hymn‚Äôs message aligns beautifully with the concept of metanoeo‚Äîit is not a command to feel sorrow, but an entreaty to "come," to change direction, and to find rest and renewal in the Savior. Phrases like "He‚Äôll safely guide you" and "He‚Äôll not forsake you" reinforce the idea of repentance as an ongoing process of turning to Him for strength and guidance.', 
                songTitle: 'Amazing Grace (My Chains Are Gone)', songArtist: 'Chris Tomlin', songLink: 'https://www.youtube.com/watch?v=Fd_jiqdkUcs', songAnalysis: 'This modern adaptation of a classic hymn powerfully illustrates the joy and relief that accompany true repentance. The added chorus, "My chains are gone, I\'ve been set free... My God, my Savior has ransomed me," uses vivid, modern language to describe the liberation that comes from accepting the Savior\'s Atonement. This feeling of freedom directly corresponds with the devotional\'s Christmas message that "He came so you could always have the chance to start fresh." It frames repentance not as a burden, but as the joyful un-chaining of the soul from past mistakes.' },
            { id: 'friday', day: 'Fri', title: 'The Promise of Life Everlasting üß¨', devotionalText: 'The fourth gift is the promise of eternal life, which is more than just living forever‚Äîit is the kind and quality of life that Heavenly Father and Jesus Christ live. While everyone will be resurrected and experience immortality, eternal life is reserved for those who choose to follow the Son and desire to become like Him. This gift allows us the eventual possibility of living as He lives.', 
                hymnTitle: 'O My Father', hymnLink: 'https://www.youtube.com/watch?v=Jg_icOtLd7A', hymnAnalysis: 'This hymn is a profound meditation on our divine origin and eternal potential, directly articulating the "kind and quality of life" God lives. The lyrics beautifully express core doctrines central to the concept of eternal life, asking, "In thy holy habitation, Did my spirit once reside?" and declaring the truth that we have a Mother in Heaven as well as a Father. This speaks to the family nature of God\'s existence‚Äîa central aspect of eternal life. The phrase "Thou hast wept for our returning" reinforces the deep, personal desire of our Heavenly Parents for us to return and become like them, which is the essence of this gift.', 
                songTitle: 'Homeward Bound', songArtist: 'The Tabernacle Choir', songLink: 'https://www.youtube.com/watch?v=MaQYQnrPgSM', songAnalysis: 'The song\'s narrative of a journey back to a "place where I belong" directly illuminates the devotional\'s reflection question. Lyrics like "every step I take is one step closer home" reframe our daily choices and struggles as part of a purposeful pilgrimage toward eternal life, not just random events. The song powerfully answers the question of how focusing on eternal life changes our perspective by turning mortality into a focused, homeward journey, giving profound meaning to our everyday decisions. The song‚Äôs style and relatable narrative make the grand concept of eternal life feel personal and grounded.' },
            { id: 'saturday', day: 'Sat', title: 'Drawing Power through Covenants üîó', devotionalText: 'To receive these gifts, the key is to make and keep sacred covenants. These covenants bind us to the Savior and give us access to godly power sufficient to deal with the burdens and temptations of our day. As we stay on the covenant path, we find true joy and the strength to keep ourselves "unspotted from the world."', 
                hymnTitle: 'How Firm a Foundation', hymnLink: 'https://www.youtube.com/watch?v=r0Xvr8maR34', hymnAnalysis: 'This powerful hymn stands as a declaration of the promises God makes to those who build their lives on the foundation of His gospel, which is accessed through covenants. The lyrics are a direct reflection of the principle of receiving "godly power," with lines like, "Fear not, I am with thee; oh, be not dismayed, For I am thy God and will still give thee aid." This is the power the devotional describes‚Äîthe strength to deal with life\'s burdens. The hymn assures the listener that when they are bound to the Savior, His promise is sure: "I‚Äôll strengthen thee, help thee, and cause thee to stand."', 
                songTitle: 'Give Me This Mountain', songArtist: 'The Truman Brothers', songLink: 'https://www.youtube.com/watch?v=NgNrukB1QoQ', songAnalysis: 'The core message of the song "Give Me This Mountain" by Truman Brothers is about finding strength, hope, and faith in the face of overwhelming challenges, trusting in a higher power to guide and support through difficult times, and emerging stronger from trials. This message is deeply personal for the Truman Brothers, as the song was inspired by their Aunt Rhonda\'s battle with stage 4 brain cancer. The lyrics reflect her experience of finding renewed hope despite her illness, and the band\'s belief that even in the darkest days, love surrounds and empowers one to overcome "mountains".' },
            { id: 'sunday', day: 'Sun', title: 'The Light, the Life, and the Hope üïØÔ∏è', devotionalText: 'Jesus Christ is the light, the life, and the hope of the world. His light dispels the darkness of despair and allows us to see our path clearly. Because of Him, no adversity is permanent; every broken heart can be mended and every tear dried. We bear testimony that He lives today, lighting the world and guiding His Church.', 
                hymnTitle: 'How Great Thou Art', hymnLink: 'https://www.youtube.com/watch?v=uWOFkA5ZAls', hymnAnalysis: 'This beloved hymn is a magnificent and awe-filled testimony of Jesus Christ as the Creator and Redeemer, perfectly capturing the devotional\'s theme. The opening verses reflect on the works of God‚Äîthe "worlds thy hands have made"‚Äîwhile the final verses turn to the ultimate gift of His Son, who came to "bleed and die to take away my sin." This journey from creation to redemption powerfully declares Christ\'s divinity and supports the devotional\'s claim that He is the source of all light and life. The anthem-like chorus, "Then sings my soul, my Savior God, to thee, How great thou art!" is a pure expression of worship and hope.', 
                songTitle: 'Cleanse You', songArtist: 'Calee Reed', songLink: 'https://www.youtube.com/watch?v=14214ubV7bA', songAnalysis: 'This song serves as a tender and personal answer to the day\'s reflection question: "In what specific area of your life do you most need the Savior‚Äôs light or hope?" The lyrics describe a love that "calms the troubled sea inside of me" and "breaks the chains of yesterday." For anyone facing anxiety, regret, or sorrow, these phrases offer a specific promise of Christ\'s healing power and light. The song is a personal testimony that His love is the direct antidote to life\'s specific pains. In Calee‚Äôs own words: I wrote this song as I began my season as a single mom. Sometimes the struggles we face feel endless.' }
        ];

        const STUDY_GUIDE_DATA = [
            {
                title: "Background",
                content: [
                    "This week‚Äôs lesson is centered on the celebration of the birth of Jesus Christ. Rather than focusing on a specific block of scripture chapters, the curriculum focuses on \"The Living Christ: The Testimony of the Apostles.\" This document was issued by the First Presidency and Quorum of the Twelve Apostles on January 1, 2000, to commemorate the 2,000th anniversary of the Savior‚Äôs birth.",
                    "President Russell M. Nelson has taught that \"The Living Christ\" is more than just a commemorative document; it is a condensed summary of the restoration of the gospel and the Savior's ministry. As we study it this Christmas, we join with the prophets in declaring that Jesus is the Living Christ, the immortal Son of God.",
                    <span>Full Lesson: <a href="https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-doctrine-and-covenants-2025/52-christmas?lang=eng" target="_blank" rel="noopener noreferrer" className="text-amber-600 hover:underline break-all">https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-doctrine-and-covenants-2025/52-christmas?lang=eng</a></span>,
                    <span>Full text of ‚ÄúThe Living Christ: The Testimony of the Apostles‚Äù: <a href="https://www.churchofjesuschrist.org/study/scriptures/the-living-christ-the-testimony-of-the-apostles/the-living-christ-the-testimony-of-the-apostles?lang=eng" target="_blank" rel="noopener noreferrer" className="text-amber-600 hover:underline break-all">https://www.churchofjesuschrist.org/study/scriptures/the-living-christ-the-testimony-of-the-apostles/the-living-christ-the-testimony-of-the-apostles?lang=eng</a></span>
                ]
            },
            {
                title: "Introduction: The Influence of the Savior",
                discussionPoint: "The Apostles begin by stating that \"None other has had so profound an influence upon all who have lived and will yet live upon the earth.\" They identify Him as the Great Jehovah of the Old Testament and the Creator of the earth. President Nelson reinforces that Jesus was \"anointed by Heavenly Father to be His personal representative in all things pertaining to the salvation of mankind.\"",
                quote: "\"All things were made by him; and without him was not any thing made that was made.\" (John 1:3)",
                question: "In a world that often tries to minimize the Savior's role, what evidence do you see in your own life or in history that confirms His \"profound influence\"?",
                answer: "‚Ä¢ We see His influence in the peace the gospel brings during personal trials.\n‚Ä¢ We see it in the charitable works done in His name worldwide.\n‚Ä¢ We see it in the way the calendar of the world centers on His birth.\n‚Ä¢ We see it in the changing of hearts when people repent and follow Him."
            },
            {
                title: "His Mortal Ministry and Example",
                discussionPoint: "Jesus‚Äôs ministry was characterized by \"doing good,\" healing the sick, and teaching the truths of eternity. The video \"Why We Need a Savior\" dramatically illustrates that without Him, there would be no forgiveness, no resurrection, and no hope‚Äîonly permanent loss and mistakes we could never take back. His gospel is a message of peace and goodwill.",
                quote: "\"How God anointed Jesus of Nazareth with the Holy Ghost and with power: who went about doing good, and healing all that were oppressed of the devil; for God was with him.\" (Acts 10:38)",
                question: "President Nelson taught that Jesus offers us the \"capacity to love\" and the \"ability to forgive.\" How does looking at the Savior‚Äôs mortal ministry help us accept these gifts, especially toward those who are difficult to love?",
                answer: "‚Ä¢ When we see that He healed those who didn't thank Him and prayed for those who crucified Him, we realize His love is unconditional.\n‚Ä¢ It teaches us that love is an action (\"doing good\"), not just a feeling.\n‚Ä¢ It reminds us that we can ask for His help to love the \"unlovable\" because He did it first."
            },
            {
                title: "The Atonement and Resurrection",
                discussionPoint: "The central act of human history was the Atonement. President Nelson clarified that we should not speak of the Atonement as an amorphous entity; rather, we must connect it to the Savior. \"It is the Savior who suffered. It is the Savior who broke the bands of death.\" Because He rose from the grave, death is not the end.",
                quote: "\"But now is Christ risen from the dead, and become the firstfruits of them that slept.\" (1 Corinthians 15:20)",
                question: "In the \"Why We Need a Savior\" video, the narrator notes that without Christ, \"every heartache lasted forever.\" How does the reality of the Resurrection change the way you view the grief or loss you may be feeling this Christmas season?",
                answer: "‚Ä¢ It changes grief from a permanent goodbye to a temporary separation.\n‚Ä¢ It provides a \"perfect brightness of hope\" that physical ailments and emotional wounds will be healed.\n‚Ä¢ It allows us to feel joy even amidst sorrow, knowing the victory has already been won."
            },
            {
                title: "The Restoration and His Living Presence",
                discussionPoint: "The testimony of the Apostles is not just based on ancient records but on modern revelation. They testify that His priesthood and Church have been restored. A crucial part of our Christmas celebration as Latter-day Saints is the knowledge that He is not just the babe in Bethlehem, but the Living Christ who directs His Church today.",
                quote: "\"And now, after the many testimonies which have been given of him, this is the testimony, last of all, which we give of him: That he lives! For we saw him, even on the right hand of God; and we heard the voice bearing record that he is the Only Begotten of the Father...\" (Doctrine and Covenants 76:22‚Äì24)",
                question: "Why is it important that our testimony of Jesus Christ includes not only His birth and death but also His appearance to Joseph Smith?",
                answer: "‚Ä¢ It confirms that God still speaks to His children today.\n‚Ä¢ It clarifies the nature of the Godhead (that the Father and Son are separate beings with bodies).\n‚Ä¢ It validates that the authority to act in His name (priesthood) is back on the earth."
            },
            {
                title: "The Light, The Life, and The Hope of the World",
                discussionPoint: "The document concludes with three powerful titles for the Savior: Light, Life, and Hope.\nLight: As Elder Soares taught, \"Light drives away darkness... Everything seems more joyful, more promising when there is light.\"\nLife: He makes resurrection a reality and gives \"abundant life\" here.\nHope: Because of Him, \"no adversity or misfortune is permanent.\"",
                quote: "Elder Ulisses Soares taught: \"A life anchored in Jesus Christ... becomes rich with purpose, alive in the Spirit, and filled with the joy that only He can give.\"",
                question: "Of the three titles‚ÄîLight, Life, or Hope‚Äîwhich one do you feel you need the most in your life right now, and why?",
                answer: "‚Ä¢ I need His Light because I have a difficult decision to make and need clarity.\n‚Ä¢ I need His Life because I feel spiritually drained and need His vitality to keep going.\n‚Ä¢ I need His Hope because I am worried about the state of the world or family challenges."
            }
        ];

        // ==========================================
        // ICONS (Inline SVG Components)
        // ==========================================
        const IconSun = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="12" r="4"/><path d="M12 2v2"/><path d="M12 20v2"/><path d="m4.93 4.93 1.41 1.41"/><path d="m17.66 17.66 1.41 1.41"/><path d="M2 12h2"/><path d="M20 12h2"/><path d="m6.34 17.66-1.41 1.41"/><path d="m19.07 4.93-1.41 1.41"/></svg>;
        const IconUsers = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>;
        const IconMusic = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M9 18V5l12-2v13"/><circle cx="6" cy="18" r="3"/><circle cx="18" cy="16" r="3"/></svg>;
        const IconBookOpen = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></svg>;
        const IconShare = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="18" cy="5" r="3"/><circle cx="6" cy="12" r="3"/><circle cx="18" cy="19" r="3"/><line x1="8.59" x2="15.42" y1="13.51" y2="17.49"/><line x1="15.41" x2="8.59" y1="6.51" y2="10.49"/></svg>;
        const IconChevronDown = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="m6 9 6 6 6-6"/></svg>;
        const IconChevronRight = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="m9 18 6-6-6-6"/></svg>;
        const IconLink = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/></svg>;
        const IconPlayCircle = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="12" r="10"/><polygon points="10 8 16 12 10 16 10 8"/></svg>;
        const IconPrinter = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><polyline points="6 9 6 2 18 2 18 9"></polyline><path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"></path><rect x="6" y="14" width="12" height="8"></rect></svg>;


        // ==========================================
        // COMPONENTS
        // ==========================================

        // 1. Toast Notification Component
        const Toast = ({ message, show, onClose }) => {
            useEffect(() => {
                if (show) {
                    const timer = setTimeout(onClose, 3000);
                    return () => clearTimeout(timer);
                }
            }, [show, onClose]);

            if (!show) return null;

            return (
                <div className="fixed bottom-24 left-1/2 transform -translate-x-1/2 bg-stone-800 text-white px-6 py-3 rounded-full shadow-lg z-50 flex items-center gap-2 animate-bounce toast-notification">
                    <span className="text-green-400">&#10003;</span>
                    {message}
                </div>
            );
        };

        // 2. Interactive Toggle Answer Component
        const ToggleAnswer = ({ question, answer }) => {
            const [isOpen, setIsOpen] = useState(false);

            return (
                <div className="mb-6 border-l-4 border-amber-200 pl-4">
                    <button 
                        onClick={() => setIsOpen(!isOpen)}
                        className="text-left font-bold text-amber-900 w-full hover:text-amber-700 transition-colors flex items-start gap-2"
                    >
                        <span className="mt-1">{isOpen ? <IconChevronDown className="w-5 h-5" /> : <IconChevronRight className="w-5 h-5" />}</span>
                        <span>{question}</span>
                    </button>
                    
                    {isOpen && (
                        <div className="mt-3 p-4 bg-stone-100 rounded-lg text-stone-700 italic border border-stone-200 fade-in">
                            <span className="font-bold not-italic text-stone-500 text-xs uppercase tracking-wider block mb-1">Possible Answer</span>
                            <div className="whitespace-pre-line">{answer}</div>
                        </div>
                    )}
                </div>
            );
        };

        // 3. Main App Component
        const App = () => {
            const [activeTab, setActiveTab] = useState('devotional');
            const [activeDayId, setActiveDayId] = useState('');
            const [showToast, setShowToast] = useState(false);
            const [youthGroup, setYouthGroup] = useState('ym'); // 'ym' or 'yw'

            // Initialize Day based on current date
            useEffect(() => {
                const dayMap = ['sunday', 'monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday'];
                const todayIndex = new Date().getDay();
                setActiveDayId(dayMap[todayIndex]);
            }, []);

            const getActiveData = (dataArray) => {
                return dataArray.find(d => d.id === activeDayId) || dataArray[0];
            };

            const copyToClipboard = (dayData) => {
                const promptParts = dayData.prompt.split(':');
                const promptLabel = promptParts[0];
                const promptText = promptParts.slice(1).join(':').trim();
                const scriptureText = (dayData.scriptureRef && dayData.scriptureLink)
                    ? `Scripture: ${dayData.scriptureRef}\n${dayData.scriptureLink}\n\n`
                    : ""; 

                // Use dayData.date if available, otherwise fallback to empty string or generic
                const dateStr = dayData.date ? dayData.date : "";

                const textToCopy = `‚ú® Daily Devotional ‚ú®\n\n${dateStr}\n*${dayData.title}*\n\n${dayData.text}\n\n*${promptLabel}:* ${promptText}\n\n${scriptureText}Full Lesson:\n${dayData.lessonLink}`;

                // Modern clipboard API
                if (navigator.clipboard && navigator.clipboard.writeText) {
                     navigator.clipboard.writeText(textToCopy).then(() => {
                        setShowToast(true);
                    }).catch(err => {
                        fallbackCopy(textToCopy);
                    });
                } else {
                    fallbackCopy(textToCopy);
                }
            };

            const fallbackCopy = (text) => {
                 try {
                    const textArea = document.createElement("textarea");
                    textArea.value = text;
                    
                    // Avoid scrolling to bottom
                    textArea.style.top = "0";
                    textArea.style.left = "0";
                    textArea.style.position = "fixed";
        
                    document.body.appendChild(textArea);
                    textArea.focus();
                    textArea.select();
                    document.execCommand('copy');
                    document.body.removeChild(textArea);
                    setShowToast(true);
                 } catch (err) {
                     console.error("Fallback copy failed", err);
                 }
            };

            const renderDevotional = () => {
                const data = getActiveData(DEVOTIONAL_DATA);
                return (
                    <div className="space-y-6 fade-in max-w-2xl mx-auto">
                        <div className="bg-white p-6 rounded-2xl shadow-sm border border-stone-200">
                            <span className="text-amber-600 text-sm font-bold uppercase tracking-widest">{data.date}</span>
                            <h2 className="text-3xl font-serif font-bold text-stone-800 mt-2 mb-4">{data.title}</h2>
                            <p className="text-stone-600 leading-relaxed text-lg">{data.text}</p>
                            
                            <div className="mt-8 p-5 bg-amber-50 rounded-xl border border-amber-100">
                                <h3 className="font-bold text-amber-900 mb-2 flex items-center gap-2">
                                    <span className="w-2 h-2 bg-amber-500 rounded-full"></span>
                                    {data.prompt.split(':')[0]}
                                </h3>
                                <p className="text-stone-700 italic">{data.prompt.split(':').slice(1).join(':')}</p>
                            </div>

                            <div className="mt-6 grid grid-cols-1 sm:grid-cols-2 gap-3">
                                {data.scriptureLink && (
                                    <a href={data.scriptureLink} target="_blank" className="flex items-center justify-center gap-2 bg-amber-600 text-white py-3 rounded-lg font-medium hover:bg-amber-700 transition">
                                        <IconBookOpen className="w-4 h-4" /> Read Scripture: {data.scriptureRef}
                                    </a>
                                )}
                                <a href={data.lessonLink} target="_blank" className="flex items-center justify-center gap-2 bg-stone-200 text-stone-700 py-3 rounded-lg font-medium hover:bg-stone-300 transition">
                                    <IconLink className="w-4 h-4" /> Full Lesson
                                </a>
                            </div>

                            <button 
                                onClick={() => copyToClipboard(data)}
                                className="w-full mt-4 py-4 border-t border-stone-100 text-stone-500 hover:text-amber-600 font-medium flex items-center justify-center gap-2 transition-colors"
                            >
                                <IconShare className="w-4 h-4" /> Share Devotional
                            </button>
                        </div>
                    </div>
                );
            };

            const renderYouth = () => {
                const data = getActiveData(youthGroup === 'ym' ? YM_DATA : YW_DATA);
                return (
                    <div className="fade-in max-w-3xl mx-auto">
                        {/* Toggle Switch for YM/YW */}
                        <div className="flex justify-center mb-6 bg-stone-200 p-1 rounded-xl inline-flex w-full sm:w-auto mx-auto">
                            <button 
                                onClick={() => setYouthGroup('ym')}
                                className={`flex-1 sm:flex-none px-8 py-2 rounded-lg font-bold transition-all ${youthGroup === 'ym' ? 'bg-white shadow-sm text-amber-700' : 'text-stone-500 hover:text-stone-700'}`}
                            >
                                Young Men
                            </button>
                            <button 
                                onClick={() => setYouthGroup('yw')}
                                className={`flex-1 sm:flex-none px-8 py-2 rounded-lg font-bold transition-all ${youthGroup === 'yw' ? 'bg-white shadow-sm text-amber-700' : 'text-stone-500 hover:text-stone-700'}`}
                            >
                                Young Women
                            </button>
                        </div>

                        <div className="bg-white p-6 rounded-2xl shadow-sm border border-stone-200 relative overflow-hidden">
                            {/* Decorative Top Border */}
                            <div className={`absolute top-0 left-0 w-full h-2 ${youthGroup === 'ym' ? 'bg-blue-600' : 'bg-pink-500'}`}></div>

                            <h2 className="text-2xl font-serif font-bold text-stone-800 mt-4 mb-4">{data.title}</h2>
                            <p className="text-stone-600 leading-relaxed">{data.text}</p>
                            
                            <div className="mt-6 p-5 bg-stone-50 rounded-xl border border-stone-100">
                                <h3 className="font-bold text-stone-800 mb-2">{data.prompt.split(':')[0]}</h3>
                                <p className="text-stone-600">{data.prompt.split(':').slice(1).join(':')}</p>
                            </div>
                             <div className="mt-6 grid grid-cols-1 sm:grid-cols-2 gap-3">
                                {data.scriptureLink && (
                                    <a href={data.scriptureLink} target="_blank" className={`flex items-center justify-center gap-2 text-white py-3 rounded-lg font-medium transition ${youthGroup === 'ym' ? 'bg-blue-600 hover:bg-blue-700' : 'bg-pink-500 hover:bg-pink-600'}`}>
                                        <IconBookOpen className="w-4 h-4" /> Read Scripture: {data.scriptureRef}
                                    </a>
                                )}
                                <a href={data.lessonLink} target="_blank" className="flex items-center justify-center gap-2 bg-stone-200 text-stone-700 py-3 rounded-lg font-medium hover:bg-stone-300 transition">
                                    <IconLink className="w-4 h-4" /> Full Lesson
                                </a>
                            </div>
                             <button 
                                onClick={() => copyToClipboard(data)}
                                className="w-full mt-4 py-4 border-t border-stone-100 text-stone-500 hover:text-stone-800 font-medium flex items-center justify-center gap-2 transition-colors"
                            >
                                <IconShare className="w-4 h-4" /> Share Content
                            </button>
                        </div>
                    </div>
                );
            };

            const renderSongs = () => {
                const data = getActiveData(SONGS_DATA);
                return (
                    <div className="fade-in max-w-3xl mx-auto">
                         <div className="text-center bg-white p-6 rounded-2xl shadow-sm border border-stone-200 mb-6">
                            <div className="w-12 h-12 bg-amber-100 rounded-full flex items-center justify-center mx-auto mb-4">
                                <IconMusic className="w-6 h-6 text-amber-700" />
                            </div>
                            <h2 className="text-2xl font-serif font-bold text-stone-800">Songs of the Soul</h2>
                            <p className="mt-2 text-stone-500 text-sm">Music to invite the Spirit into your daily study.</p>
                        </div>

                        <div className="bg-white p-6 rounded-2xl shadow-sm border border-stone-200">
                            <h3 className="text-lg font-bold text-stone-400 uppercase tracking-wider mb-4">Daily Selection</h3>
                            <h2 className="text-xl font-bold text-stone-800 mb-2">{data.title}</h2>
                            <p className="text-stone-600 italic mb-8 text-sm border-l-2 border-amber-300 pl-4">{data.devotionalText}</p>
                            
                            <div className="space-y-8">
                                {/* Hymn Section */}
                                <div>
                                    <span className="text-xs font-bold text-amber-600 tracking-widest uppercase mb-2 block flex items-center gap-2">
                                        <IconMusic className="w-3 h-3" /> Hymn Selection
                                    </span>
                                    <div className="flex items-start justify-between gap-4">
                                        <h3 className="text-xl font-serif font-bold text-stone-800">{data.hymnTitle}</h3>
                                        <a href={data.hymnLink} target="_blank" rel="noopener noreferrer" className="text-amber-600 hover:text-amber-700 transition-colors" aria-label="Play Song">
                                            <IconPlayCircle className="w-8 h-8" />
                                        </a>
                                    </div>
                                    <p className="mt-2 text-stone-600 text-sm leading-relaxed">{data.hymnAnalysis}</p>
                                </div>

                                <hr className="border-stone-100" />

                                {/* Song Section */}
                                <div>
                                    <span className="text-xs font-bold text-sky-600 tracking-widest uppercase mb-2 block flex items-center gap-2">
                                        <IconMusic className="w-3 h-3" /> Contemporary Song
                                    </span>
                                    <div className="flex items-start justify-between gap-4">
                                        <div>
                                            <h3 className="text-xl font-serif font-bold text-stone-800">{data.songTitle}</h3>
                                            <p className="text-xs text-stone-400 mb-2">by {data.songArtist}</p>
                                        </div>
                                        <a href={data.songLink} target="_blank" rel="noopener noreferrer" className="text-sky-600 hover:text-sky-700 transition-colors" aria-label="Play Song">
                                            <IconPlayCircle className="w-8 h-8" />
                                        </a>
                                    </div>
                                    <p className="mt-2 text-stone-600 text-sm leading-relaxed">{data.songAnalysis}</p>
                                </div>
                            </div>
                        </div>
                    </div>
                );
            };

            const renderStudy = () => {
                return (
                    <div className="fade-in max-w-6xl mx-auto pb-12">
                         <div id="printable-study-section" className="bg-white p-8 rounded-2xl shadow-sm border border-stone-200 relative">
                            
                            <div className="flex justify-between items-start mb-2">
                                 <div className="w-full">
                                    <h1 className="text-3xl font-serif font-bold text-center text-amber-800">Discussion Guide</h1>
                                 </div>
                                 <button 
                                    onClick={() => window.print()} 
                                    className="no-print absolute top-6 right-6 text-stone-400 hover:text-stone-600 hover:bg-stone-100 p-2 rounded-full transition-all"
                                    aria-label="Print Discussion Guide"
                                    title="Print Discussion Guide"
                                >
                                    <IconPrinter className="w-6 h-6" />
                                </button>
                            </div>

                            <p className="text-center text-stone-500 mb-8 italic">"{WEEK_INFO.title}"</p>
                            
                            {/* --- ADDED IMAGE HERE --- */}
                            <div className="mb-8">
                                <img 
                                    src="Graphic.jpg" 
                                    alt="Infographic: The Matchless Gift" 
                                    className="w-full h-auto rounded-lg shadow-md border border-stone-200"
                                    onError={(e) => {e.target.style.display = 'none'}} 
                                />
                            </div>
                            {/* ------------------------ */}
                            
                            {STUDY_GUIDE_DATA.map((section, idx) => (
                                <div key={idx} className="mb-10 last:mb-0">
                                    <h2 className="text-xl font-bold text-stone-800 mb-3 border-b border-amber-100 pb-2">{section.title}</h2>
                                    
                                    {section.content && section.content.map((p, i) => (
                                        <p key={i} className="text-stone-700 mb-3 leading-relaxed">{p}</p>
                                    ))}

                                    {section.discussionPoint && (
                                        <div className="mb-4">
                                            <h3 className="text-amber-700 font-semibold text-sm uppercase mb-1">Context</h3>
                                            <p className="text-stone-700">{section.discussionPoint}</p>
                                        </div>
                                    )}

                                    {section.quote && (
                                        <blockquote className="border-l-4 border-stone-300 pl-4 py-1 my-4 text-stone-600 italic bg-stone-50 p-3 rounded-r-lg">
                                            {section.quote}
                                        </blockquote>
                                    )}

                                    {section.question && (
                                        <ToggleAnswer question={section.question} answer={section.answer} />
                                    )}

                                    {section.questions && section.questions.map((qItem, qIdx) => (
                                        <ToggleAnswer key={qIdx} question={qItem.q} answer={qItem.a} />
                                    ))}
                                </div>
                            ))}

                            <div className="mt-12 pt-8 border-t border-stone-200 text-center">
                                <p className="text-stone-800 font-medium">Lesson Summary</p>
                                <p className="text-stone-600 mt-2 text-sm">Christmas is a time to focus on the "matchless gift" of God's Son. Through "The Living Christ," we are reminded that Jesus is the Creator, the Healer, the Atoning Sacrifice, and the Resurrected Lord. President Nelson reminds us that because of Him, we have access to the gifts of love, forgiveness, repentance, and life everlasting. By studying His words and His life, we draw His power into our lives, allowing us to face our challenges with faith and joy.</p>
                            </div>
                        </div>
                    </div>
                );
            };

            // Dynamic Footer based on view
            const renderFooter = () => (
                <footer className="p-6 text-center text-stone-400 text-xs">
                    <p>{WEEK_INFO.valediction}</p>
                </footer>
            );

            return (
                <div className="flex flex-col h-full bg-stone-100">
                    {/* Header */}
                    <header className="bg-white border-b border-stone-200 pt-6 pb-2 px-4 shadow-sm z-10">
                        <div className="max-w-4xl mx-auto text-center">
                            <h1 className="text-xs font-bold tracking-[0.2em] text-stone-400 uppercase mb-1">Come, Follow Me</h1>
                            <h2 className="text-lg sm:text-xl font-serif font-bold text-stone-800 leading-tight">{WEEK_INFO.title}</h2>
                            <p className="text-stone-500 text-xs mt-1 mb-4">{WEEK_INFO.dateRange}</p>

                            {/* Main Nav Tabs */}
                            <div className="flex justify-center space-x-1 sm:space-x-4 mt-4 overflow-x-auto hide-scrollbar pb-2">
                                <button onClick={() => setActiveTab('devotional')} className={`flex flex-col sm:flex-row items-center gap-2 px-4 py-2 rounded-xl transition-all ${activeTab === 'devotional' ? 'bg-amber-50 text-amber-700 ring-1 ring-amber-200' : 'text-stone-400 hover:text-stone-600'}`}>
                                    <IconSun className="w-5 h-5" />
                                    <span className="text-xs sm:text-sm font-medium">Daily</span>
                                </button>
                                <button onClick={() => setActiveTab('youth')} className={`flex flex-col sm:flex-row items-center gap-2 px-4 py-2 rounded-xl transition-all ${activeTab === 'youth' ? 'bg-amber-50 text-amber-700 ring-1 ring-amber-200' : 'text-stone-400 hover:text-stone-600'}`}>
                                    <IconUsers className="w-5 h-5" />
                                    <span className="text-xs sm:text-sm font-medium">Youth</span>
                                </button>
                                <button onClick={() => setActiveTab('songs')} className={`flex flex-col sm:flex-row items-center gap-2 px-4 py-2 rounded-xl transition-all ${activeTab === 'songs' ? 'bg-amber-50 text-amber-700 ring-1 ring-amber-200' : 'text-stone-400 hover:text-stone-600'}`}>
                                    <IconMusic className="w-5 h-5" />
                                    <span className="text-xs sm:text-sm font-medium">Music</span>
                                </button>
                                <button onClick={() => setActiveTab('study')} className={`flex flex-col sm:flex-row items-center gap-2 px-4 py-2 rounded-xl transition-all ${activeTab === 'study' ? 'bg-amber-50 text-amber-700 ring-1 ring-amber-200' : 'text-stone-400 hover:text-stone-600'}`}>
                                    <IconBookOpen className="w-5 h-5" />
                                    <span className="text-xs sm:text-sm font-medium">Study</span>
                                </button>
                            </div>
                        </div>
                    </header>

                    {/* Secondary Day Navigation (Horizontal Scroll) - Only show for Daily, Youth, Songs */}
                    {activeTab !== 'study' && (
                        <div className="bg-white border-b border-stone-200 py-2 px-4 shadow-sm z-10">
                            <div className="max-w-4xl mx-auto">
                                <div className="flex space-x-3 overflow-x-auto hide-scrollbar pb-1 sm:justify-center">
                                    {DEVOTIONAL_DATA.map((d) => (
                                        <button
                                            key={d.id}
                                            onClick={() => setActiveDayId(d.id)}
                                            className={`flex-shrink-0 flex flex-col items-center justify-center w-12 h-14 rounded-lg transition-all border ${activeDayId === d.id ? 'bg-stone-800 text-white border-stone-800 shadow-md transform scale-105' : 'bg-white text-stone-500 border-stone-200 hover:border-stone-300'}`}
                                        >
                                            <span className="text-[10px] font-bold uppercase">{d.day}</span>
                                            <span className={`text-lg font-bold leading-none ${activeDayId === d.id ? 'text-amber-400' : 'text-stone-800'}`}>{d.date.split(' ')[1]}</span>
                                        </button>
                                    ))}
                                </div>
                            </div>
                        </div>
                    )}

                    {/* Content Area - Scrollable */}
                    <main className="flex-1 overflow-y-auto p-4 pb-20">
                        {activeTab === 'devotional' && renderDevotional()}
                        {activeTab === 'youth' && renderYouth()}
                        {activeTab === 'songs' && renderSongs()}
                        {activeTab === 'study' && renderStudy()}
                        {renderFooter()}
                    </main>

                    <Toast message="Copied to Clipboard!" show={showToast} onClose={() => setShowToast(false)} />
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
