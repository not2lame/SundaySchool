<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Come, Follow Me Companion</title>
    
    <!-- Tailwind CSS (Styling) -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Fonts: Inter (Body) and Merriweather (Headings) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Merriweather:ital,wght@0,300;0,400;0,700;1,400&display=swap" rel="stylesheet">
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    
    <!-- Babel (to compile JSX in browser) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>

    <!-- Tailwind Configuration -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        serif: ['Merriweather', 'serif'],
                    },
                    colors: {
                        stone: { 50: '#fafaf9', 100: '#f5f5f4', 200: '#e7e5e4', 300: '#d6d3d1', 400: '#a8a29e', 500: '#78716c', 600: '#57534e', 700: '#44403c', 800: '#292524', 900: '#1c1917' },
                        amber: { 50: '#fffbeb', 100: '#fef3c7', 200: '#fde68a', 300: '#fcd34d', 400: '#fbbf24', 500: '#f59e0b', 600: '#d97706', 700: '#b45309', 800: '#92400e', 900: '#78350f' }
                    }
                }
            }
        }
    </script>

    <style>
        .hide-scrollbar::-webkit-scrollbar { display: none; }
        .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        .fade-in { animation: fadeIn 0.5s ease-in; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* Print Styles */
        @media print {
            body * {
                visibility: hidden;
            }
            #printable-study-section, #printable-study-section * {
                visibility: visible;
            }
            #printable-study-section {
                position: absolute;
                left: 0;
                top: 0;
                width: 100%;
                margin: 0;
                padding: 0;
                border: none;
                box-shadow: none;
            }
            .no-print {
                display: none !important;
            }
        }
    </style>
</head>
<body class="bg-stone-100 text-stone-800 h-screen flex flex-col overflow-hidden">

    <!-- Loading Fallback -->
    <div id="root" class="h-full flex flex-col">
        <div class="flex items-center justify-center h-full bg-stone-100 text-stone-500 p-4 text-center">
            <div>
                <h2 class="text-xl font-bold mb-2">Loading App...</h2>
                <p class="text-sm">If this takes longer than a few seconds, your network may be blocking the script libraries (React).</p>
            </div>
        </div>
    </div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // ==========================================
        // DATA CONSTANTS
        // ==========================================

        const WEEK_INFO = {
            title: "The Lord Called His People Zion",
            dateRange: "February 2‚Äì8, 2026",
            valediction: "May we all labor with one heart and one mind to build a Zion that prepares the world for the return of the Lamb."
        };

        const DEVOTIONAL_DATA = [
            { id: 'monday', day: 'Mon', fullDay: 'Monday', date: 'Feb 2', title: 'Zion is a Heart Condition ‚ù§Ô∏è', text: 'Building Zion isn\'t about moving to a specific city; it\'s about the state of our souls. The Lord defines Zion as the "pure in heart." While the world often focuses on external structures, Enoch‚Äôs people succeeded because they focused on internal transformation. When we purify our motives and choose to see others as God sees them, we begin to build Zion right where we are.', prompt: 'Challenge: Identify one way you can "purify your heart" today‚Äîperhaps by releasing a long-held grudge or a snap judgment of someone else.', scriptureRef: 'Doctrine and Covenants 97:21', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/dc-testament/dc/97?lang=eng&id=p21', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-old-testament-2026/06?lang=eng' },
            { id: 'tuesday', day: 'Tue', fullDay: 'Tuesday', date: 'Feb 3', title: 'One Heart, One Mind, No Barriers ü§ù', text: 'The people of Enoch were of "one heart and one mind." In our adult lives, we often face political, social, or cultural divisions that pull us apart. However, true unity doesn\'t mean we are all the same; it means we are all focused on the same Savior. By aligning our will with Christ, our individual differences become threads in a beautiful, unified tapestry.', prompt: 'Reflection: Think of a time you felt completely unified with a group that was diverse. What was the common goal that brought you together?', scriptureRef: 'Moses 7:18', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/pgp/moses/7?lang=eng&id=p18', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-old-testament-2026/06?lang=eng' },
            { id: 'wednesday', day: 'Wed', fullDay: 'Wednesday', date: 'Feb 4', title: 'The Beauty of Our Differences üåà', text: 'Elder Ulisses Soares taught that "human dignity presupposes respect for our differences." As followers of Christ, we should be the most diverse yet unified people on earth. Our varied gifts, backgrounds, and ethnicities are not obstacles to Zion; they are the very assets that make the body of Christ strong. We don\'t just "tolerate" diversity‚Äîwe celebrate it as a gift from God.', prompt: 'Challenge: Reach out to someone in your ward or community who comes from a different background than you and ask them to share one thing they love about their heritage.', scriptureRef: 'Acts 17:26', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/nt/acts/17?lang=eng&id=p26', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-old-testament-2026/06?lang=eng' },
            { id: 'thursday', day: 'Thu', fullDay: 'Thursday', date: 'Feb 5', title: 'A God Who Weeps With Us üíß', text: 'Enoch was surprised to see the God of Heaven weep over His children. This vision teaches us that God is not a distant, stoic being. He is intimately connected to our joys and our sorrows. When we see God‚Äôs compassion for the "workmanship of his hands," it inspires us to have more compassion for those around us who are struggling or feel like they don\'t belong.', prompt: 'Reflection: How does knowing that God feels your pain change the way you approach Him in prayer?', scriptureRef: 'Moses 7:32-33', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/pgp/moses/7?lang=eng&id=p32-33', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-old-testament-2026/06?lang=eng' },
            { id: 'friday', day: 'Fri', fullDay: 'Friday', date: 'Feb 6', title: 'Building Bridges, Not Walls üåâ', text: 'In a world that is increasingly polarized, we are called to be bridge-builders. Elder Gary E. Stevenson reminded us that peacemaking begins in our hearts and homes. We can build digital bridges by only posting things online that uplift, and physical bridges by seeking to repair strained relationships. Zion cannot exist where there is contention.', prompt: 'Challenge: Use Elder Stevenson\'s "Digital Bridge Building" rule today: Before you post or reply online, ask, "Will this build a bridge?" If not, don\'t send it.', scriptureRef: 'Matthew 5:9', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/nt/matt/5?lang=eng&id=p9', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-old-testament-2026/06?lang=eng' },
            { id: 'saturday', day: 'Sat', fullDay: 'Saturday', date: 'Feb 7', title: 'The Lamb Slain From the Foundation üêë', text: 'Enoch was shown the Savior‚Äôs sacrifice and told that the Lamb was "slain from the foundation of the world." This means that God‚Äôs plan of mercy was never a backup plan. It was established before we ever came to earth. Because Christ‚Äôs Atonement is infinite, its power reaches all the way back to Adam and Eve and forward to us, providing the ultimate source of unity and healing for all of God\'s children.', prompt: 'Reflection: How does the "infinite" nature of the Atonement help you forgive others and foster unity in your life?', scriptureRef: 'Moses 7:47', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/pgp/moses/7?lang=eng&id=p47', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-old-testament-2026/06?lang=eng' },
            { id: 'sunday', day: 'Sun', fullDay: 'Sunday', date: 'Feb 8', title: 'A New Day of Light ‚òÄÔ∏è', text: 'As we conclude this week, we look forward to the Second Coming that Enoch saw in vision. We are told that "truth will I send forth out of the earth" and "righteousness will I send down out of heaven" to gather the elect. We are part of that gathering. As we live with respect and dignity for all, we help usher in the "light of a new day" where we can truly say to every person, "You are my brother; you are my sister."', prompt: 'Challenge: During your meetings today, look for someone who might feel like an outsider and make a deliberate effort to make them feel "at home" in the gospel.', scriptureRef: 'Moses 7:62', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/pgp/moses/7?lang=eng&id=p62', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-old-testament-2026/06?lang=eng' }
        ];

        const YM_DATA = [
             { id: 'monday', day: 'Mon', date: 'Feb 2', title: 'Zion is a Heart Condition ‚ù§Ô∏è', text: 'Zion isn\'t just a city in a history book; it\'s a condition of the heart and spirit. The Lord taught that Zion is simply "the pure in heart." For you, building Zion starts in your own heart and your own home. It‚Äôs about becoming the kind of guy who doesn\'t let contention or drama take up space in your life.', prompt: 'Challenge: Zion starts with you. Pick one habit or thought that keeps you from being "pure in heart" and work on dropping it today.', scriptureRef: 'Doctrine and Covenants 97:21', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/dc-testament/dc/97?lang=eng&id=p21', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-old-testament-2026/06?lang=eng' },
            { id: 'tuesday', day: 'Tue', date: 'Feb 3', title: 'No More "-ites" in the Quorum ü§ù', text: 'In the Book of Mormon, after Christ visited, there were no Lamanites or "any manner of -ites." Everyone was one. We can help build Zion by abandoning attitudes of prejudice and promoting respect for every single person. In your quorum or at school, there shouldn\'t be "tiers" of friends‚Äîjust brothers who value each other‚Äôs unique attributes and gifts.', prompt: 'Reflection: Think about your quorum. Is there anyone who feels like an "outsider"? How can you help them feel like they belong?', scriptureRef: 'Moses 7:18', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/pgp/moses/7?lang=eng&id=p18', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-old-testament-2026/06?lang=eng' },
            { id: 'wednesday', day: 'Wed', date: 'Feb 4', title: 'The Strength of the Falls üåà', text: 'Think of the Igua√ß√∫ Falls‚Äîhundreds of different waterfalls that all come from the same river. That‚Äôs us. We share the same divine origin and substance, even though we come from different cultures, nationalities, and backgrounds. Our differences don\'t make us weaker; they make us a "unique people" and a "beloved community" when we stay connected to Christ.', prompt: 'Challenge: Find someone today who is different from you‚Äîmaybe they speak another language or have different hobbies‚Äîand find one thing you actually have in common.', scriptureRef: 'Acts 17:26', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/nt/acts/17?lang=eng&id=p26', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-old-testament-2026/06?lang=eng' },
            { id: 'thursday', day: 'Thu', date: 'Feb 5', title: 'Real Strength is Peacemaking üíß', text: 'Some people think being a peacemaker means being weak or "naive." Actually, it takes way more strength to be a peacemaker than to be a hothead. Peacemaking is a Christlike attribute that requires serious courage. It means approaching people with an open heart and extended hands rather than clenched fists.', prompt: 'Reflection: When was a time you felt stronger by staying calm and making peace instead of reacting with anger?', scriptureRef: 'Moses 7:32-33', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/pgp/moses/7?lang=eng&id=p32-33', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-old-testament-2026/06?lang=eng' },
            { id: 'friday', day: 'Fri', date: 'Feb 6', title: 'The One-Week Reboot üåâ', text: 'Contention is everywhere‚Äîonline, in the locker room, and sometimes at home. Elder Stevenson challenged us to a "contention-free zone." If things start getting heated at home or with your friends, pause and "reboot" with kind words. Remember, Zion is built when we choose to build bridges of cooperation instead of walls of segregation.', prompt: 'Challenge: Try the "Digital Bridge Building" test: Before you post, reply, or comment on social media today, ask yourself if it builds a bridge. If it doesn\'t, don\'t send it.', scriptureRef: 'Matthew 5:9', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/nt/matt/5?lang=eng&id=p9', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-old-testament-2026/06?lang=eng' },
            { id: 'saturday', day: 'Sat', date: 'Feb 7', title: 'The Savior Was the Foundation üêë', text: 'Enoch saw the Savior on the cross and learned that the Lamb was "slain from the foundation of the world." This means Jesus Christ was always the plan. He was prepared from the beginning to redeem us. Because His commitment to you was a "settled fact" before the world even started, you can have total confidence that He will help you build your own "City of Holiness."', prompt: 'Reflection: How does knowing that Christ was committed to saving you before the world began help you trust Him today?', scriptureRef: 'Moses 7:47', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/pgp/moses/7?lang=eng&id=p47', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-old-testament-2026/06?lang=eng' },
            { id: 'sunday', day: 'Sun', date: 'Feb 8', title: 'Getting Ready for the Return ‚òÄÔ∏è', text: 'Enoch‚Äôs vision was one of the first prophecies of the Second Coming. As we get closer to that day, the world will likely get more polarized. But as "children of the covenant," we can eliminate prejudiced behavior by seeing others with the Savior‚Äôs eyes. When we value the varied gifts of everyone around us, we help bring about the "new day" Enoch saw.', prompt: 'Challenge: At church today, be the guy who starts a conversation with someone who looks like they‚Äôre having a rough time or feels out of place.', scriptureRef: 'Moses 7:62', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/pgp/moses/7?lang=eng&id=p62', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-old-testament-2026/06?lang=eng' }
        ];

        const YW_DATA = [
            { id: 'monday', day: 'Mon', date: 'Feb 2', title: 'Zion is a Heart Condition ‚ù§Ô∏è', text: 'Zion isn\'t just a story about people who lived a long time ago; it\'s a condition of the heart and spirit. The Lord defines Zion as "the pure in heart". Building Zion starts in your own heart and your own room. When you choose to let go of judgment and embrace kindness, you are building Zion right where you stand.', prompt: 'Challenge: Zion starts with you. Today, identify one judgmental thought you‚Äôve had about yourself or someone else and replace it with a thought of love.', scriptureRef: 'Doctrine and Covenants 97:21', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/dc-testament/dc/97?lang=eng&id=p21', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-old-testament-2026/06?lang=eng' },
            { id: 'tuesday', day: 'Tue', date: 'Feb 3', title: 'One Heart and One Mind ü§ù', text: 'Enoch‚Äôs people were "of one heart and one mind". In your Young Women class, this doesn\'t mean you all have to dress the same or have the same hobbies. It means you are united in your love for Christ. We build this kind of unity when we genuinely knit our hearts together, regardless of our differences.', prompt: 'Reflection: Think of a time you felt totally "at home" with your friends or in your class. What did people do to make you feel like you belonged?', scriptureRef: 'Moses 7:18', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/pgp/moses/7?lang=eng&id=p18', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-old-testament-2026/06?lang=eng' },
            { id: 'wednesday', day: 'Wed', date: 'Feb 4', title: 'Celebrating Our Differences üåà', text: 'True sisterhood in Christ celebrates diversity. Elder Soares taught that the light of a new day shines brighter when we treat others with respect and dignity. Like a beautiful system of waterfalls, we all share the same divine origin, but we flow in different cultures and experiences. Your unique personality and background are what make your class a "beloved community".', prompt: 'Challenge: Find someone at school or in your ward who seems different from you and genuinely compliment a unique gift or attribute you see in them.', scriptureRef: 'Acts 17:26', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/nt/acts/17?lang=eng&id=p26', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-old-testament-2026/06?lang=eng' },
            { id: 'thursday', day: 'Thu', date: 'Feb 5', title: 'A God Who Feels Your Heart üíß', text: 'Enoch was stunned to see God weep for His children. This teaches us that Heavenly Father isn\'t distant; He is deeply affected by what you go through. He weeps with you in your "bitterness" and rejoices with you in your joy. Because He cares so much, you can always turn to Him.', prompt: 'Reflection: How does knowing that God is emotionally connected to your life change how you feel when things get difficult?', scriptureRef: 'Moses 7:32-33', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/pgp/moses/7?lang=eng&id=p32-33', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-old-testament-2026/06?lang=eng' },
            { id: 'friday', day: 'Fri', date: 'Feb 6', title: 'Being a Digital Peacemaker üåâ', text: 'The world can be full of "social media pile-ons" and conflict. But you are called to be a peacemaker. Elder Stevenson invited us to build "digital bridges". This means using your phone to publish peace and share goodness instead of hate or sarcasm. Peacemaking isn\'t weak; it takes incredible heart and courage.', prompt: 'Challenge: Take the "Digital Bridge" challenge today: Before you post, comment, or text, ask yourself, "Will this build a bridge?" If not, don\'t send it.', scriptureRef: 'Matthew 5:9', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/nt/matt/5?lang=eng&id=p9', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-old-testament-2026/06?lang=eng' },
            { id: 'saturday', day: 'Sat', date: 'Feb 7', title: 'Prepared from the Beginning üêë', text: 'Enoch saw that the Savior was the "Lamb slain from the foundation of the world". This means Christ\'s Atonement wasn\'t a backup plan; it was the foundation of everything. He was prepared from the beginning to redeem you. Because His love for you is a "settled fact," you can have hope no matter what the world looks like.', prompt: 'Reflection: How does knowing that the Plan of Salvation was built on Christ\'s sacrifice from the very beginning give you peace today?', scriptureRef: 'Moses 7:47', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/pgp/moses/7?lang=eng&id=p47', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-old-testament-2026/06?lang=eng' },
            { id: 'sunday', day: 'Sun', date: 'Feb 8', title: 'Lifting Up Your Heart ‚òÄÔ∏è', text: 'Enoch‚Äôs vision was a prophecy of the Savior\'s return. Even though the world has its "bitterness," the Lord tells us to "lift up your heart, and be glad". As Young Women, you help gather the elect when you look at others through the Savior‚Äôs eyes and choose to see their divine kinship.', prompt: 'Challenge: In your Young Women class today, be the one who ensures no one sits alone and everyone feels the "warmth" of the gospel.', scriptureRef: 'Moses 7:62', scriptureLink: 'https://www.churchofjesuschrist.org/study/scriptures/pgp/moses/7?lang=eng&id=p62', lessonLink: 'https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-old-testament-2026/06?lang=eng' }
        ];

        const SONGS_DATA = [
            { id: 'monday', day: 'Mon', title: 'Zion is a Heart Condition ‚ù§Ô∏è', devotionalText: 'Building Zion isn\'t about moving to a specific city;\nit\'s about the state of our souls. The Lord defines Zion as the "pure in heart."\nWhile the world often focuses on external structures, Enoch‚Äôs people succeeded because they focused on internal transformation.\nWhen we purify our motives and choose to see others as God sees them, we begin to build Zion right where we are.', 
                hymnTitle: 'More Holiness Give Me', hymnLink: 'https://www.youtube.com/watch?v=n51QQTvKzKc', hymnAnalysis: 'This hymn is a tender prayer for the very "internal transformation" described in the devotional. The lyrics, "More purity give me," and "More holiness in my heart," directly voice the desire to become the "pure in heart" that defines Zion.\nAs the devotional challenges us to purify our motives and release grudges, this hymn provides the spiritual language to ask for God\'s help in doing so. The plea for "more sorrow for sin" and "more Savior, like thee" aligns perfectly with the process of building Zion within our own souls.', 
                songTitle: 'Change My Heart, Oh God', songArtist: 'Worship Song', songLink: 'https://www.youtube.com/watch?v=dd-vGFoMqcI', songAnalysis: 'This simple yet profound prayer song captures the essence of the day\'s challenge to "purify your heart." The metaphor of the potter and the clay ("You are the Potter, I am the clay") illustrates the submission required for internal change.\nListening to this song invites a spirit of humility and willingness to let God mold our character. It reinforces the devotional\'s message that Zion is built not by external force, but by allowing the Lord to shape our hearts from the inside out.' },
            { id: 'tuesday', day: 'Tue', title: 'One Heart, One Mind, No Barriers ü§ù', devotionalText: 'The people of Enoch were of "one heart and one mind."\nIn our adult lives, we often face political, social, or cultural divisions that pull us apart.\nHowever, true unity doesn\'t mean we are all the same; it means we are all focused on the same Savior.\nBy aligning our will with Christ, our individual differences become threads in a beautiful, unified tapestry.', 
                hymnTitle: 'Israel, Israel, God Is Calling', hymnLink: 'https://www.youtube.com/watch?v=fyju2aFehFI', hymnAnalysis: 'This hymn is a rousing call to gather out of the world and into the unity of the gospel. The line "Babylon the great is falling; God shall all her towers o\'erthrow" represents leaving behind the divisions of the world to join a people of one heart.\nThe music\'s triumphant tone inspires a feeling of collective purpose. It reminds us that the "common goal" bringing us together is the call of the Lord Himself, helping us overcome the political and social barriers mentioned in the devotional.', 
                songTitle: 'We Are One', songArtist: 'One Voice Children\'s Choir', songLink: 'https://www.youtube.com/watch?v=8y3wp77960A', songAnalysis: 'Performed by a diverse group of children, this song visually and musically demonstrates the "beautiful, unified tapestry" described in the text. The lyrics celebrate standing together despite differences, echoing the sentiment of being of "one heart and one mind."\nThe song\'s infectious energy and message of solidarity serve as a powerful reminder that unity is not just a doctrinal concept but a joyful reality we can create. It encourages us to see our individual threads as essential parts of a greater whole.' },
            { id: 'wednesday', day: 'Wed', title: 'The Beauty of Our Differences üåà', devotionalText: 'Elder Ulisses Soares taught that "human dignity presupposes respect for our differences."\nAs followers of Christ, we should be the most diverse yet unified people on earth.\nOur varied gifts, backgrounds, and ethnicities are not obstacles to Zion;\nthey are the very assets that make the body of Christ strong.\nWe don\'t just "tolerate" diversity‚Äîwe celebrate it as a gift from God.', 
                hymnTitle: 'Lord, I Would Follow Thee', hymnLink: 'https://www.youtube.com/watch?v=TE1vWJFX-jo', hymnAnalysis: 'This hymn perfectly addresses the humility required to respect human dignity and differences. The poignant question, "Who am I to judge another?" invites us to suspend our biases and look past surface-level differences to the heart of the individual. The devotional asks us to see our background differences as assets rather than obstacles. This hymn supports that mindset by teaching us to be our "brother\'s keeper" and to love freely without judgment, creating the emotional and spiritual safety where true unity can flourish.', 
                songTitle: 'In Christ There Is No East or West', songArtist: 'Chris Brunelle', songLink: 'https://www.youtube.com/watch?v=GG8hzY1OoM4', songAnalysis: 'This song is the perfect anthem for celebrating diversity within the body of Christ. The lyrics, "In Christ there is no east or west, In him no south or north," directly dismantle the barriers of geography and culture, affirming that "All Christly souls are one in him."\nThe devotional emphasizes that our backgrounds are assets, not obstacles. This hymn reinforces that truth by declaring that our "high communion" is found in the Savior, regardless of our race or origin, fostering a spirit of deep respect and dignity.' },
            { id: 'thursday', day: 'Thu', title: 'A God Who Weeps With Us üíß', devotionalText: 'Enoch was surprised to see the God of Heaven weep over His children.\nThis vision teaches us that God is not a distant, stoic being.\nHe is intimately connected to our joys and our sorrows.\nWhen we see God‚Äôs compassion for the "workmanship of his hands," it inspires us to have more compassion for those around us who are struggling or feel like they don\'t belong.', 
                hymnTitle: 'How Firm a Foundation', hymnLink: 'https://www.youtube.com/watch?v=r0Xvr8maR34', hymnAnalysis: 'This hymn provides the comforting voice of the Lord speaking to us in our trials. The verse, "The rivers of sorrow shall not thee o‚Äôerflow; For I will be with thee, thy troubles to bless," mirrors the devotional\'s teaching that God is "intimately connected to our joys and our sorrows."\nIt answers the reflection question by reminding us that because God feels our pain, we can approach Him with confidence. He is not distant; He is the firm foundation who promises to sanctify our "deepest distress" and weep with us in our suffering.', 
                songTitle: 'Peace in Christ', songArtist: '2018 Youth Theme', songLink: 'https://www.youtube.com/watch?v=R46J-GjbRWA', songAnalysis: 'This song beautifully captures the solace found in a compassionate Savior. The lyrics acknowledge the lack of peace on earth‚Äîechoing the sorrow that causes God to weep‚Äîbut point us to the "peace in Christ" that heals the broken heart.\nThe devotional speaks of God\'s compassion for the "workmanship of his hands." This song helps us feel that compassion personally, acting as a musical embrace that assures us we are never alone in our struggles.' },
            { id: 'friday', day: 'Fri', title: 'Building Bridges, Not Walls üåâ', devotionalText: 'In a world that is increasingly polarized, we are called to be bridge-builders.\nElder Gary E. Stevenson reminded us that peacemaking begins in our hearts and homes.\nWe can build digital bridges by only posting things online that uplift, and physical bridges by seeking to repair strained relationships.\nZion cannot exist where there is contention.', 
                hymnTitle: 'Nay, Speak No Ill', hymnLink: 'https://www.youtube.com/watch?v=JGINzVRnhkg', hymnAnalysis: 'This hymn acts as a strict yet loving admonition against contention, directly supporting the day\'s challenge. The lyrics, "Nay, speak no ill, a child of God across the pleasant earth," are a timeless reminder to avoid the polarization and negativity mentioned in the devotional.\nIt serves as a musical version of the "Digital Bridge Building" rule. Listening to this can check our impulses to criticize or argue, reminding us that "kind words will never die" and that Zion requires us to speak only that which builds up.', 
                songTitle: 'Kindness Begins with Me', songArtist: 'Primary Song', songLink: 'https://www.youtube.com/watch?v=IdQaJadeWZQ', songAnalysis: 'Though short and simple, this song encapsulates the core message that peacemaking "begins in our hearts and homes." The repeated affirmation, "I want to be kind to everyone," is the foundational attitude of a bridge-builder.\nIn the context of adult life and digital communication, this childlike determination becomes a powerful discipline. It reminds us that the complex work of ending contention starts with the simple, individual choice to be kind in every interaction.' },
            { id: 'saturday', day: 'Sat', title: 'The Lamb Slain From the Foundation üêë', devotionalText: 'Enoch was shown the Savior‚Äôs sacrifice and told that the Lamb was "slain from the foundation of the world."\nThis means that God‚Äôs plan of mercy was never a backup plan.\nIt was established before we ever came to earth. Because Christ‚Äôs Atonement is infinite, its power reaches all the way back to Adam and Eve and forward to us, providing the ultimate source of unity and healing for all of God\'s children.', 
                hymnTitle: 'I Stand All Amazed', hymnLink: 'https://www.youtube.com/watch?v=1zNFduONf6Q', hymnAnalysis: 'This hymn expresses the profound awe we should feel when contemplating the Savior\'s infinite sacrifice. The lyrics, "I stand all amazed at the love Jesus offers me," reflect the emotion Enoch must have felt witnessing the Lamb slain.\nThe devotional emphasizes that this plan was "established before we ever came to earth." The hymn captures the personal impact of that eternal plan, helping us understand that His mercy is the "ultimate source of unity and healing" for us individually.', 
                songTitle: 'Lamb of God', songArtist: 'Rob Gardner (London Symphony Orchestra)', songLink: 'https://www.youtube.com/watch?v=Gehi6pb5Ksc', songAnalysis: 'This majestic piece from the oratorio Lamb of God musically narrates the Savior\'s Atonement with power and reverence. The title itself connects directly to the "Lamb slain from the foundation of the world" mentioned in the scripture.\nThe soaring instrumentation and choral backing evoke the scale of the Atonement‚Äîits infinite nature reaching backward and forward in time. Listening to this allows the magnitude of God\'s plan to wash over us, inspiring gratitude for the mercy that was never a "backup plan."' },
            { id: 'sunday', day: 'Sun', title: 'A New Day of Light ‚òÄÔ∏è', devotionalText: 'As we conclude this week, we look forward to the Second Coming that Enoch saw in vision.\nWe are told that "truth will I send forth out of the earth" and "righteousness will I send down out of heaven" to gather the elect.\nWe are part of that gathering. As we live with respect and dignity for all, we help usher in the "light of a new day" where we can truly say to every person, "You are my brother; you are my sister."', 
                hymnTitle: 'The Morning Breaks', hymnLink: 'https://www.youtube.com/watch?v=wLsYNUd_Zq4', hymnAnalysis: 'This hymn is the quintessential anthem of the "New Day of Light." Its lyrics, "The morning breaks, the shadows flee; Lo, Zion‚Äôs standard is unfurled," perfectly match the devotional\'s focus on the Restoration and the Second Coming.\nThe imagery of "truth from earth" and "angels from heaven" in the hymn mirrors the promise given to Enoch. Singing this helps us feel the excitement of being part of the gathering, motivating us to usher in that light by welcoming others as brothers and sisters.', 
                songTitle: 'A Great Work', songArtist: 'The Church of Jesus Christ of Latter-day Saints (Youth Theme)', songLink: 'https://www.youtube.com/watch?v=BMU6C-iN-rA', songAnalysis: 'This energetic song is a modern call to action for the gathering of Israel. The lyrics, "This is a great work, a work that requires us to do what we\'ve never done before," align with the charge to be active participants in the latter days.\nIt empowers us to see ourselves as the "elect" mentioned in the devotional. The driving rhythm and hopeful message inspire us to take the challenge seriously‚Äîto reach out, gather, and make everyone feel "at home" in this great and marvelous work.' }
        ];

        const STUDY_GUIDE_DATA = [
            {
                title: "Background",
                content: [
                    "This week‚Äôs lesson focuses on Moses 7, which contains a portion of the Joseph Smith Translation of the Bible. It details the ministry of the prophet Enoch, who lived in a time of great wickedness yet successfully established a holy city called Zion. In this chapter, we see a vision of God's heart‚ÄîHis weeping over the suffering of His children‚Äîand His plan to redeem them through Jesus Christ. The text offers a blueprint for how we, as modern Saints, can build Zion in our own hearts and communities.",
                    <span>Full Lesson: <a href="https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-old-testament-2026/06?lang=eng" target="_blank" rel="noopener noreferrer" className="text-amber-600 hover:underline break-all">https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-old-testament-2026/06?lang=eng</a></span>
                ]
            },
            {
                title: "Introduction: \"The Lord Called His People Zion\"",
                discussionPoint: "The manual sets the stage by defining Zion not just as a location, but as a people who share a specific set of characteristics: they are of one heart and one mind, they dwell in righteousness, and there are no poor among them. Enoch‚Äôs people achieved this despite the contention surrounding them.",
                quote: "Paragraphs 1-3 (Source: February 2‚Äì8 Manual): \"Throughout history, people have tried to achieve what Enoch and his people accomplished: building an ideal society where there is no poverty or violence.\"",
                questions: [
                    {
                        q: "The world is full of division, yet Enoch‚Äôs people became \"of one heart and one mind\" (Moses 7:18). What does it look like practically for a ward or a community to be \"of one heart\" while still being made up of very different individuals?",
                        a: "[It means our hearts are knit together in unity and love, even if our opinions or backgrounds differ. It implies that our ultimate loyalty is to the Savior, which supersedes political or cultural loyalties. Being of \"one mind\" doesn't mean we all think the exact same thoughts, but that we are all focused on the same goal: the glory of God and the welfare of our neighbors.]"
                    }
                ]
            },
            {
                title: "Moses 7:18‚Äì21: Unity in Diversity",
                discussionPoint: "A key aspect of Zion is unity. However, unity does not mean uniformity. In the video \"We Come Together and Unite as One,\" members from around the world share that the Church is a \"melting pot\" where diversity is a strength. One member noted, \"The Lord‚Äôs kingdom is a melting pot for all of His children... It is something that we should and we can celebrate.\"",
                quote: "Moses 7:18: \"And the Lord called his people Zion, because they were of one heart and one mind, and dwelt in righteousness; and there was no poor among them.\"",
                questions: [
                    {
                        q: "Elder Soares suggests that we should \"value the different attributes and varied gifts we all have.\" How can our differences in background, culture, or personality actually help us build Zion rather than hinder it?",
                        a: "[Different backgrounds allow us to see needs that others might miss. A diverse ward can minister to a wider variety of people. When we \"celebrate our differences\" as Elder Soares suggests, we learn to love people for who they are, not just because they are like us. Unity created from diversity is stronger because it requires the active practice of Christlike love and patience; it isn't just \"natural\" affinity.]"
                    }
                ]
            },
            {
                title: "Peacemaking: The Foundation of Zion",
                discussionPoint: "Building Zion requires us to eliminate contention. Elder Stevenson teaches that peacemaking is not just a global concept but begins \"in the most basic place‚Äîin our hearts. Then in our homes and families.\" He emphasizes that we cannot build a peaceful community (Zion) without being \"lovers and makers of peace\" individually.",
                quote: "Source Material: Blessed Are the Peacemakers by Elder Gary E. Stevenson",
                questions: [
                    {
                        q: "Elder Stevenson shared a story about a family who decided to respond to a grumpy relative with \"a deliberate, heartfelt outpouring of kind words and thoughtful deeds\" instead of silence or retaliation. Why is \"persuasion, long-suffering, gentleness, and kindness\" (D&C 121:41) often more effective at building Zion than trying to force others to change?",
                        a: "[Contention drives the Spirit away, making it impossible to be of \"one heart.\" Kindness softens hearts. In the story Elder Stevenson shared, the \"cold exchanges began to thaw\" and \"smiles replaced scowls\" because kindness did its quiet work. Zion is a condition of the heart. We cannot force someone into Zion; we can only invite them through love.]"
                    }
                ]
            },
            {
                title: "Moses 7:28‚Äì41: The God Who Weeps",
                discussionPoint: "One of the most unique and powerful contributions of the Book of Moses is the revelation that God weeps. Enoch is shocked that a perfect, eternal being would weep. The Lord explains that He weeps because of the suffering and wickedness of His children‚Äîbecause \"they are the workmanship of mine own hands ‚Ä¶ and I have also given them commandment, that they should love one another ‚Ä¶ but they are without affection, [and they hate one another.] (Moses 7:32-33 paraphrased)",
                quote: "Moses 7:28‚Äì29: \"And it came to pass that the God of heaven looked upon the residue of the people, and he wept... And Enoch said unto the Lord: How is it that thou canst weep, seeing thou art holy, and from all eternity to all eternity?\"",
                questions: [
                    {
                        q: "How does knowing that God weeps for His children change the way we view Him? How does it change the way we view those who are struggling or making poor choices?",
                        a: "[It destroys the idea of God as a distant, unfeeling force. It shows He is a loving Father deeply invested in our well-being. If God weeps for them, perhaps we should judge them less and have more compassion for them. It teaches us that our choices have a real emotional impact on our Father in Heaven.]"
                    }
                ]
            },
            {
                title: "Moses 7:47: The Lamb Slain from the Foundation of the World",
                discussionPoint: "Amidst the sorrow of wickedness, Enoch is given hope through a vision of Jesus Christ. The phrase \"Lamb slain from the foundation of the world\" teaches that the Atonement was not a backup plan. It was the central pillar of God's plan from the very beginning. Because of this, the prophets of old like Enoch could look forward to the cross for redemption just as we look back to it.",
                quote: "Moses 7:47: \"And behold, Enoch saw the day of the coming of the Son of Man, even in the flesh; and his soul rejoiced, saying: The Righteous is lifted up, and the Lamb is slain from the foundation of the world.\"",
                questions: [
                    {
                        q: "Why was it necessary for Enoch (and for us) to see the vision of the Savior immediately after seeing the depth of the world's wickedness?",
                        a: "[Without the Savior, the wickedness and misery of the world would lead to despair. The vision of the \"Lamb\" provides the only true hope. It reminds us that God had a solution for human weakness prepared before the world was even created. It gave Enoch the strength to continue preaching (\"his soul rejoiced\") despite the difficulty of his mission.]"
                    }
                ]
            },
            {
                title: "Moses 7:59‚Äì67: Looking Forward to the Second Coming",
                discussionPoint: "Enoch‚Äôs vision concludes with the latter days‚Äîour day. He sees the Restoration (truth coming out of the earth) and the gathering of the elect to a New Jerusalem (Zion). This gives us our marching orders: we are to help \"righteousness and truth\" sweep the earth.",
                quote: "Moses 7:62: \"And righteousness will I send down out of heaven; and truth will I send forth out of the earth, to bear testimony of mine Only Begotten... and righteousness and truth will I cause to sweep the earth as with a flood, to gather out mine elect from the four quarters of the earth.\"",
                questions: [
                    {
                        q: "We often speak of the \"gathering of Israel.\" Based on our discussion today about unity, diversity, and peacemaking, how do we effectively \"gather\" people to Zion today?",
                        a: "[We gather by creating a community where people feel loved and welcome, regardless of their background (as discussed in the Unity section). We gather by being peacemakers in our communities, showing that the gospel brings light and calm to a chaotic world. We gather by bearing testimony of the \"Only Begotten,\" keeping the Savior at the center of all we do.]"
                    }
                ]
            },
            {
                title: "Lesson Summary",
                content: [
                    "This week, we walked with Enoch and saw that building Zion is not about physical location, but about the condition of our hearts. We learned from Elder Soares that true unity requires us to value and celebrate our diversity as \"brothers and sisters in Christ.\" We learned from Elder Stevenson that the path to this unity is paved with peacemaking in our homes and private lives. Finally, we were reminded that the central hope of Zion‚Äîand the universe‚Äîis the \"Lamb slain from the foundation of the world,\" Jesus Christ. As we align our hearts with Him, we help prepare the earth for His return."
                ]
            }
        ];

        // ==========================================
        // ICONS (Inline SVG Components)
        // ==========================================
        const IconSun = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="12" r="4"/><path d="M12 2v2"/><path d="M12 20v2"/><path d="m4.93 4.93 1.41 1.41"/><path d="m17.66 17.66 1.41 1.41"/><path d="M2 12h2"/><path d="M20 12h2"/><path d="m6.34 17.66-1.41 1.41"/><path d="m19.07 4.93-1.41 1.41"/></svg>;
        const IconUsers = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>;
        const IconMusic = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M9 18V5l12-2v13"/><circle cx="6" cy="18" r="3"/><circle cx="18" cy="16" r="3"/></svg>;
        const IconBookOpen = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></svg>;
        const IconShare = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="18" cy="5" r="3"/><circle cx="6" cy="12" r="3"/><circle cx="18" cy="19" r="3"/><line x1="8.59" x2="15.42" y1="13.51" y2="17.49"/><line x1="15.41" x2="8.59" y1="6.51" y2="10.49"/></svg>;
        const IconChevronDown = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="m6 9 6 6 6-6"/></svg>;
        const IconChevronRight = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="m9 18 6-6-6-6"/></svg>;
        const IconLink = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/></svg>;
        const IconPlayCircle = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="12" r="10"/><polygon points="10 8 16 12 10 16 10 8"/></svg>;
        const IconPrinter = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><polyline points="6 9 6 2 18 2 18 9"></polyline><path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"></path><rect x="6" y="14" width="12" height="8"></rect></svg>;


        // ==========================================
        // COMPONENTS
        // ==========================================

        // 1. Toast Notification Component
        const Toast = ({ message, show, onClose }) => {
            useEffect(() => {
                if (show) {
                    const timer = setTimeout(onClose, 3000);
                    return () => clearTimeout(timer);
                }
            }, [show, onClose]);

            if (!show) return null;

            return (
                <div className="fixed bottom-24 left-1/2 transform -translate-x-1/2 bg-stone-800 text-white px-6 py-3 rounded-full shadow-lg z-50 flex items-center gap-2 animate-bounce toast-notification">
                    <span className="text-green-400">&#10003;</span>
                    {message}
                </div>
            );
        };

        // 2. Interactive Toggle Answer Component
        const ToggleAnswer = ({ question, answer }) => {
            const [isOpen, setIsOpen] = useState(false);

            return (
                <div className="mb-6 border-l-4 border-amber-200 pl-4">
                    <button 
                        onClick={() => setIsOpen(!isOpen)}
                        className="text-left font-bold text-amber-900 w-full hover:text-amber-700 transition-colors flex items-start gap-2"
                    >
                        <span className="mt-1">{isOpen ? <IconChevronDown className="w-5 h-5" /> : <IconChevronRight className="w-5 h-5" />}</span>
                        <span>{question}</span>
                    </button>
                    
                    {isOpen && (
                        <div className="mt-3 p-4 bg-stone-100 rounded-lg text-stone-700 italic border border-stone-200 fade-in">
                            <span className="font-bold not-italic text-stone-500 text-xs uppercase tracking-wider block mb-1">Possible Answer</span>
                            <div className="whitespace-pre-line">{answer}</div>
                        </div>
                    )}
                </div>
            );
        };

        // 3. Main App Component
        const App = () => {
            const [activeTab, setActiveTab] = useState('devotional');
            const [activeDayId, setActiveDayId] = useState('');
            const [showToast, setShowToast] = useState(false);
            const [youthGroup, setYouthGroup] = useState('ym'); // 'ym' or 'yw'

            // Initialize Day based on current date
            useEffect(() => {
                const dayMap = ['sunday', 'monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday'];
                const todayIndex = new Date().getDay();
                setActiveDayId(dayMap[todayIndex]);
            }, []);

            const getActiveData = (dataArray) => {
                return dataArray.find(d => d.id === activeDayId) || dataArray[0];
            };

            const copyToClipboard = (dayData) => {
                const promptParts = dayData.prompt.split(':');
                const promptLabel = promptParts[0];
                const promptText = promptParts.slice(1).join(':').trim();
                const scriptureText = (dayData.scriptureRef && dayData.scriptureLink)
                    ? `Scripture: ${dayData.scriptureRef}\n${dayData.scriptureLink}\n\n`
                    : ""; 

                // Use dayData.date if available, otherwise fallback to empty string or generic
                const dateStr = dayData.date ? dayData.date : "";

                const textToCopy = `‚ú® Daily Devotional ‚ú®\n\n${dateStr}\n*${dayData.title}*\n\n${dayData.text}\n\n*${promptLabel}:* ${promptText}\n\n${scriptureText}Full Lesson:\n${dayData.lessonLink}`;

                // Modern clipboard API
                if (navigator.clipboard && navigator.clipboard.writeText) {
                      navigator.clipboard.writeText(textToCopy).then(() => {
                        setShowToast(true);
                    }).catch(err => {
                        fallbackCopy(textToCopy);
                    });
                } else {
                    fallbackCopy(textToCopy);
                }
            };

            const fallbackCopy = (text) => {
                 try {
                    const textArea = document.createElement("textarea");
                    textArea.value = text;
                    
                    // Avoid scrolling to bottom
                    textArea.style.top = "0";
                    textArea.style.left = "0";
                    textArea.style.position = "fixed";
        
                    document.body.appendChild(textArea);
                    textArea.focus();
                    textArea.select();
                    document.execCommand('copy');
                    document.body.removeChild(textArea);
                    setShowToast(true);
                 } catch (err) {
                     console.error("Fallback copy failed", err);
                 }
            };

            const renderDevotional = () => {
                const data = getActiveData(DEVOTIONAL_DATA);
                return (
                    <div className="space-y-6 fade-in max-w-2xl mx-auto">
                        <div className="bg-white p-6 rounded-2xl shadow-sm border border-stone-200">
                            <span className="text-amber-600 text-sm font-bold uppercase tracking-widest">{data.date}</span>
                            <h2 className="text-3xl font-serif font-bold text-stone-800 mt-2 mb-4">{data.title}</h2>
                            <p className="text-stone-600 leading-relaxed text-lg">{data.text}</p>
                            
                            <div className="mt-8 p-5 bg-amber-50 rounded-xl border border-amber-100">
                                <h3 className="font-bold text-amber-900 mb-2 flex items-center gap-2">
                                    <span className="w-2 h-2 bg-amber-500 rounded-full"></span>
                                    {data.prompt.split(':')[0]}
                                </h3>
                                <p className="text-stone-700 italic">{data.prompt.split(':').slice(1).join(':')}</p>
                            </div>

                            <div className="mt-6 grid grid-cols-1 sm:grid-cols-2 gap-3">
                                {data.scriptureLink && (
                                    <a href={data.scriptureLink} target="_blank" className="flex items-center justify-center gap-2 bg-amber-600 text-white py-3 rounded-lg font-medium hover:bg-amber-700 transition">
                                        <IconBookOpen className="w-4 h-4" /> Read Scripture: {data.scriptureRef}
                                    </a>
                                )}
                                <a href={data.lessonLink} target="_blank" className="flex items-center justify-center gap-2 bg-stone-200 text-stone-700 py-3 rounded-lg font-medium hover:bg-stone-300 transition">
                                    <IconLink className="w-4 h-4" /> Full Lesson
                                </a>
                            </div>

                            <button 
                                onClick={() => copyToClipboard(data)}
                                className="w-full mt-4 py-4 border-t border-stone-100 text-stone-500 hover:text-amber-600 font-medium flex items-center justify-center gap-2 transition-colors"
                            >
                                <IconShare className="w-4 h-4" /> Share Devotional
                            </button>
                        </div>
                    </div>
                );
            };

            const renderYouth = () => {
                const data = getActiveData(youthGroup === 'ym' ? YM_DATA : YW_DATA);
                return (
                    <div className="fade-in max-w-3xl mx-auto">
                        {/* Toggle Switch for YM/YW */}
                        <div className="flex justify-center mb-6 bg-stone-200 p-1 rounded-xl inline-flex w-full sm:w-auto mx-auto">
                            <button 
                                onClick={() => setYouthGroup('ym')}
                                className={`flex-1 sm:flex-none px-8 py-2 rounded-lg font-bold transition-all ${youthGroup === 'ym' ? 'bg-white shadow-sm text-amber-700' : 'text-stone-500 hover:text-stone-700'}`}
                            >
                                Young Men
                            </button>
                            <button 
                                onClick={() => setYouthGroup('yw')}
                                className={`flex-1 sm:flex-none px-8 py-2 rounded-lg font-bold transition-all ${youthGroup === 'yw' ? 'bg-white shadow-sm text-amber-700' : 'text-stone-500 hover:text-stone-700'}`}
                            >
                                Young Women
                            </button>
                        </div>

                        <div className="bg-white p-6 rounded-2xl shadow-sm border border-stone-200 relative overflow-hidden">
                            {/* Decorative Top Border */}
                            <div className={`absolute top-0 left-0 w-full h-2 ${youthGroup === 'ym' ? 'bg-blue-600' : 'bg-pink-500'}`}></div>

                            <h2 className="text-2xl font-serif font-bold text-stone-800 mt-4 mb-4">{data.title}</h2>
                            <p className="text-stone-600 leading-relaxed">{data.text}</p>
                            
                            <div className="mt-6 p-5 bg-stone-50 rounded-xl border border-stone-100">
                                <h3 className="font-bold text-stone-800 mb-2">{data.prompt.split(':')[0]}</h3>
                                <p className="text-stone-600">{data.prompt.split(':').slice(1).join(':')}</p>
                            </div>
                             <div className="mt-6 grid grid-cols-1 sm:grid-cols-2 gap-3">
                                {data.scriptureLink && (
                                    <a href={data.scriptureLink} target="_blank" className={`flex items-center justify-center gap-2 text-white py-3 rounded-lg font-medium transition ${youthGroup === 'ym' ? 'bg-blue-600 hover:bg-blue-700' : 'bg-pink-500 hover:bg-pink-600'}`}>
                                        <IconBookOpen className="w-4 h-4" /> Read Scripture: {data.scriptureRef}
                                    </a>
                                )}
                                <a href={data.lessonLink} target="_blank" className="flex items-center justify-center gap-2 bg-stone-200 text-stone-700 py-3 rounded-lg font-medium hover:bg-stone-300 transition">
                                    <IconLink className="w-4 h-4" /> Full Lesson
                                </a>
                            </div>
                             <button 
                                onClick={() => copyToClipboard(data)}
                                className="w-full mt-4 py-4 border-t border-stone-100 text-stone-500 hover:text-stone-800 font-medium flex items-center justify-center gap-2 transition-colors"
                            >
                                <IconShare className="w-4 h-4" /> Share Content
                            </button>
                        </div>
                    </div>
                );
            };

            const renderSongs = () => {
                const data = getActiveData(SONGS_DATA);
                return (
                    <div className="fade-in max-w-3xl mx-auto">
                         <div className="text-center bg-white p-6 rounded-2xl shadow-sm border border-stone-200 mb-6">
                            <div className="w-12 h-12 bg-amber-100 rounded-full flex items-center justify-center mx-auto mb-4">
                                <IconMusic className="w-6 h-6 text-amber-700" />
                            </div>
                            <h2 className="text-2xl font-serif font-bold text-stone-800">Songs of the Soul</h2>
                            <p className="mt-2 text-stone-500 text-sm">Music to invite the Spirit into your daily study.</p>
                        </div>

                        <div className="bg-white p-6 rounded-2xl shadow-sm border border-stone-200">
                            <h3 className="text-lg font-bold text-stone-400 uppercase tracking-wider mb-4">Daily Selection</h3>
                            <h2 className="text-xl font-bold text-stone-800 mb-2">{data.title}</h2>
                            <p className="text-stone-600 italic mb-8 text-sm border-l-2 border-amber-300 pl-4">{data.devotionalText}</p>
                            
                            <div className="space-y-8">
                                {/* Hymn Section */}
                                <div>
                                    <span className="text-xs font-bold text-amber-600 tracking-widest uppercase mb-2 block flex items-center gap-2">
                                        <IconMusic className="w-3 h-3" /> Hymn Selection
                                    </span>
                                    <div className="flex items-start justify-between gap-4">
                                        <h3 className="text-xl font-serif font-bold text-stone-800">{data.hymnTitle}</h3>
                                        <a href={data.hymnLink} target="_blank" rel="noopener noreferrer" className="text-amber-600 hover:text-amber-700 transition-colors" aria-label="Play Song">
                                            <IconPlayCircle className="w-8 h-8" />
                                        </a>
                                    </div>
                                    <p className="mt-2 text-stone-600 text-sm leading-relaxed">{data.hymnAnalysis}</p>
                                </div>

                                <hr className="border-stone-100" />

                                {/* Song Section */}
                                <div>
                                    <span className="text-xs font-bold text-sky-600 tracking-widest uppercase mb-2 block flex items-center gap-2">
                                        <IconMusic className="w-3 h-3" /> Contemporary Song
                                    </span>
                                    <div className="flex items-start justify-between gap-4">
                                        <div>
                                            <h3 className="text-xl font-serif font-bold text-stone-800">{data.songTitle}</h3>
                                            <p className="text-xs text-stone-400 mb-2">by {data.songArtist}</p>
                                        </div>
                                        <a href={data.songLink} target="_blank" rel="noopener noreferrer" className="text-sky-600 hover:text-sky-700 transition-colors" aria-label="Play Song">
                                            <IconPlayCircle className="w-8 h-8" />
                                        </a>
                                    </div>
                                    <p className="mt-2 text-stone-600 text-sm leading-relaxed">{data.songAnalysis}</p>
                                </div>
                            </div>
                        </div>
                    </div>
                );
            };

            const renderStudy = () => {
                return (
                    <div className="fade-in max-w-6xl mx-auto pb-12">
                         <div id="printable-study-section" className="bg-white p-8 rounded-2xl shadow-sm border border-stone-200 relative">
                            
                            <div className="flex justify-between items-start mb-2">
                                 <div className="w-full">
                                    <h1 className="text-3xl font-serif font-bold text-center text-amber-800">Discussion Guide</h1>
                                 </div>
                                 <button 
                                    onClick={() => window.print()} 
                                    className="no-print absolute top-6 right-6 text-stone-400 hover:text-stone-600 hover:bg-stone-100 p-2 rounded-full transition-all"
                                    aria-label="Print Discussion Guide"
                                    title="Print Discussion Guide"
                                >
                                    <IconPrinter className="w-6 h-6" />
                                </button>
                            </div>

                            <p className="text-center text-stone-500 mb-8 italic">"{WEEK_INFO.title}"</p>
                            
                            {/* --- ADDED IMAGE HERE --- */}
                            <div className="mb-8">
                                <img 
                                    src="Graphic.jpg" 
                                    alt="Infographic: Old Testament" 
                                    className="w-full h-auto rounded-lg shadow-md border border-stone-200"
                                    onError={(e) => {e.target.style.display = 'none'}} 
                                />
                            </div>
                            {/* ------------------------ */}
                            
                            {STUDY_GUIDE_DATA.map((section, idx) => (
                                <div key={idx} className="mb-10 last:mb-0">
                                    <h2 className="text-xl font-bold text-stone-800 mb-3 border-b border-amber-100 pb-2">{section.title}</h2>
                                    
                                    {section.content && section.content.map((p, i) => (
                                        <p key={i} className="text-stone-700 mb-3 leading-relaxed">{p}</p>
                                    ))}

                                    {section.discussionPoint && (
                                        <div className="mb-4">
                                            <h3 className="text-amber-700 font-semibold text-sm uppercase mb-1">Context</h3>
                                            <p className="text-stone-700">{section.discussionPoint}</p>
                                        </div>
                                    )}

                                    {section.quote && (
                                        <blockquote className="border-l-4 border-stone-300 pl-4 py-1 my-4 text-stone-600 italic bg-stone-50 p-3 rounded-r-lg">
                                            {section.quote}
                                        </blockquote>
                                    )}

                                    {section.question && (
                                        <ToggleAnswer question={section.question} answer={section.answer} />
                                    )}

                                    {section.questions && section.questions.map((qItem, qIdx) => (
                                        <ToggleAnswer key={qIdx} question={qItem.q} answer={qItem.a} />
                                    ))}
                                </div>
                            ))}
                        </div>
                    </div>
                );
            };

            // Dynamic Footer based on view
            const renderFooter = () => (
                <footer className="p-6 text-center text-stone-400 text-xs">
                    <p>{WEEK_INFO.valediction}</p>
                </footer>
            );

            return (
                <div className="flex flex-col h-full bg-stone-100">
                    {/* Header */}
                    <header className="bg-white border-b border-stone-200 pt-6 pb-2 px-4 shadow-sm z-10">
                        <div className="max-w-4xl mx-auto text-center">
                            <h1 className="text-xs font-bold tracking-[0.2em] text-stone-400 uppercase mb-1">Come, Follow Me</h1>
                            <h2 className="text-lg sm:text-xl font-serif font-bold text-stone-800 leading-tight">{WEEK_INFO.title}</h2>
                            <p className="text-stone-500 text-xs mt-1 mb-4">{WEEK_INFO.dateRange}</p>

                            {/* Main Nav Tabs */}
                            <div className="flex justify-center space-x-1 sm:space-x-4 mt-4 overflow-x-auto hide-scrollbar pb-2">
                                <button onClick={() => setActiveTab('devotional')} className={`flex flex-col sm:flex-row items-center gap-2 px-4 py-2 rounded-xl transition-all ${activeTab === 'devotional' ? 'bg-amber-50 text-amber-700 ring-1 ring-amber-200' : 'text-stone-400 hover:text-stone-600'}`}>
                                    <IconSun className="w-5 h-5" />
                                    <span className="text-xs sm:text-sm font-medium">Daily</span>
                                </button>
                                <button onClick={() => setActiveTab('youth')} className={`flex flex-col sm:flex-row items-center gap-2 px-4 py-2 rounded-xl transition-all ${activeTab === 'youth' ? 'bg-amber-50 text-amber-700 ring-1 ring-amber-200' : 'text-stone-400 hover:text-stone-600'}`}>
                                    <IconUsers className="w-5 h-5" />
                                    <span className="text-xs sm:text-sm font-medium">Youth</span>
                                </button>
                                <button onClick={() => setActiveTab('songs')} className={`flex flex-col sm:flex-row items-center gap-2 px-4 py-2 rounded-xl transition-all ${activeTab === 'songs' ? 'bg-amber-50 text-amber-700 ring-1 ring-amber-200' : 'text-stone-400 hover:text-stone-600'}`}>
                                    <IconMusic className="w-5 h-5" />
                                    <span className="text-xs sm:text-sm font-medium">Music</span>
                                </button>
                                <button onClick={() => setActiveTab('study')} className={`flex flex-col sm:flex-row items-center gap-2 px-4 py-2 rounded-xl transition-all ${activeTab === 'study' ? 'bg-amber-50 text-amber-700 ring-1 ring-amber-200' : 'text-stone-400 hover:text-stone-600'}`}>
                                    <IconBookOpen className="w-5 h-5" />
                                    <span className="text-xs sm:text-sm font-medium">Study</span>
                                </button>
                            </div>
                        </div>
                    </header>

                    {/* Secondary Day Navigation (Horizontal Scroll) - Only show for Daily, Youth, Songs */}
                    {activeTab !== 'study' && (
                        <div className="bg-white border-b border-stone-200 py-2 px-4 shadow-sm z-10">
                            <div className="max-w-4xl mx-auto">
                                <div className="flex space-x-3 overflow-x-auto hide-scrollbar pb-1 sm:justify-center">
                                    {DEVOTIONAL_DATA.map((d) => (
                                        <button
                                            key={d.id}
                                            onClick={() => setActiveDayId(d.id)}
                                            className={`flex-shrink-0 flex flex-col items-center justify-center w-12 h-14 rounded-lg transition-all border ${activeDayId === d.id ? 'bg-stone-800 text-white border-stone-800 shadow-md transform scale-105' : 'bg-white text-stone-500 border-stone-200 hover:border-stone-300'}`}
                                        >
                                            <span className="text-[10px] font-bold uppercase">{d.day}</span>
                                            <span className={`text-lg font-bold leading-none ${activeDayId === d.id ? 'text-amber-400' : 'text-stone-800'}`}>{d.date.split(' ')[1]}</span>
                                        </button>
                                    ))}
                                </div>
                            </div>
                        </div>
                    )}

                    {/* Content Area - Scrollable */}
                    <main className="flex-1 overflow-y-auto p-4 pb-20">
                        {activeTab === 'devotional' && renderDevotional()}
                        {activeTab === 'youth' && renderYouth()}
                        {activeTab === 'songs' && renderSongs()}
                        {activeTab === 'study' && renderStudy()}
                        {renderFooter()}
                    </main>

                    <Toast message="Copied to Clipboard!" show={showToast} onClose={() => setShowToast(false)} />
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
